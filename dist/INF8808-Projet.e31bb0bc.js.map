{"version":3,"sources":["scripts/vesselTypeClasses.js","scripts/onglet1.js","scripts/preprocess.js","scripts/onglet3.js","scripts/chord.js","index.js"],"names":["vesselTypeClasses","build","div","bounds","d3","select","node","getBoundingClientRect","margin","top","right","bottom","left","width","height","svg","append","attr","csv","d","date","timeParse","Other","Tugs","Fishing","Barges","Tanker","PleasureCrafts","Excursion","Merchant","then","data","keys","columns","slice","color","scaleOrdinal","domain","range","schemeSet2","stackedData","stack","x","scaleTime","extent","call","axisBottom","ticks","text","y","scaleLinear","axisLeft","areaChart","area","y0","y1","selectAll","enter","key","style","highlight","event","noHighlight","size","sort","_","i","on","GLOBAL_VESSEL_TYPE","REGION_NAME","REGION_COLOR","REGION_NAME_ALT","findGlobalVesselType","vesselType","includes","clean","cleanData","forEach","element","push","substring","chordMatrix","departureDate","arrivalDate","matrix","Array","length","index","departureRegion","arrivalRegion","j","filter","map","value","count","reduce","partialSum","v","Number","rebuild","startDate","endDate","remove","buildHeatmap","window","innerWidth","myGroups","preproc","myVars","scaleBand","padding","myColor","transformData","heatmapMap","line","keyStart","keyStop","has","set","current","get","p","max","from","values","Region","Type","transformedData","rectSelect","rectUnselect","bandwidth","initLegend","drawLegend","Map","region","type","toFixed","colorScale","defs","linearGradient","tick","nodes","offset","join","fill","scale","axis","axisRight","chordWidth","outerRadius","innerRadius","colors","tooltip","res","chordDirected","padAngle","sortSubgroups","descending","links","datum","source","target","pageX","pageY","ribbonArrow","radius","groups","arc","highlightGroup","unhighlightGroup","startAngle","Math","PI","eventData","chordData","stackData","onglet1","chord","time_graph","onglet3","$","click","hasClass","tab","classed","removeClass","addClass","traffic","ndx","crossfilter","vesselTraffic","dimension","timeMonth","vesselTraffics","group","reduceSum","minDate","maxDate","timeScale","rangeRound","vesselTrafficChart","dc","BarChart","margins","round","brushOn","elasticY","yAxis","render","selection","startString","endString","toISOString","split","start","invert","end"],"mappings":";;AKAA;;AACA;;AACA;AJFA,ADAO,SAASA,iBAAT,GAA6B;AIApC,ADAA,ADAO,AFCH,IEDSoE,KFCF,CACH,QADG,EAEH,EEHuB,GAAG,CAAC,KFCxB,EAGH,CEJ0B,EAAW,MFClC,EAIH,GEL0B,EAAwB,KFC/C,EAKH,EEN0B,EAAmC,GFC1D,EAMH,KEP0B,EAA+C,OAA/C,EAAwD,AFC/E,EAOH,QAPG,EAQH,KET0B,CFCvB,CEDkG,CFUrG,OEV0B,AFCvB,CAAP,CEDmH,MAArF,CAA3B;ADEP,ADUC;ACTM,ACFA,IAAMC,KDEGpE,KAAT,CAAeC,ACFE,GDEjB,ACFoB,CAAC,CDED,OCFA,EAAW,SAAX,EAAsB,qBAAtB,EAA6C,cAA7C,EAA6D,WAA7D,EAA0E,SAA1E,EAAqF,QAArF,EAA+F,qBAA/F,EAAsH,qBAAtH,CAApB;ADGL;AIAF,AJCE,ACHK,IGEH4K,AHFSxG,EDGLnE,MAAM,CIDd,EJCiBC,CCHQ,CDGN,CAACC,CCHQ,CAAC,IDGZ,CAAU,ICHC,EAAY,SAAZ,EAAuB,IDGlC,EAAiCC,GCHtB,CDGX,CCH6C,EDGLC,OCH7B,EAA6C,SAA7C,EAAwD,CDGnE,EAAf,MCH0B,EAAmE,SAAnE,EAA8E,SAA9E,EAAyF,SAAzF,CAArB;ADIL,MAAIC,MAAM,GAAG;AIAf,ADJA,AHIgBC,AEJT,ADCA,CGGN,GJAeA,ACHH8D,GDGM,EAAE,AEJL4B,EEIL/F,AJAI,EIAd,EAAc,CFJR,CAAiBF,EDCI,CCDrB,EAAsBkG,ADCE,CAAC,QCDzB,ADCwB,ECDSC,ADCE,OCDnC,EAA0C,ADClB,EAAsB,qBAAtB,EAA6C,cAA7C,EAA6D,WAA7D,EAA0E,SAA1E,EAAqF,QAArF,EAA+F,oBAA/F,EAAqH,qBAArH,CAAxB;AGIHjG,ADJJ,AHGyBM,AEHvBR,EEIEE,AFJFF,EEII,AJDmBQ,CIClBQ,AFJF,CAACb,EEIF,CAAO,AJDmB,EAAE,CEH9B,CAAW,CFGE,eEHb,EACGA,MADH,CEIE,AFHQ,EEG8ByB,GFJxC,CEIE,CAA4C,AFF3CwE,MAFH,IEIuDyE,SAAT,EAAoB;AAC5DC,ADJR,AHEqCrK,AECnC4F,EAAAA,EECMyE,AJF6BrK,MAAM,CIE5B,CAACV,AJF6B,EAA9B,AECD,CAACC,EECP,CAAcE,AFDR,EECU,AFDJgG,CECK/F,MAAH,CAAU,CFDlB,EAAiBgG,OAAjB,CAAZ,KECoB,CAAd,EAA2C0E,SAA3C;AAEA3K,ADLR,AHCiDQ,AEEhD,ADHD,ECKA,EEAQR,AJJyCQ,EIIvC,CAACM,CJJ0C,CCD5CsD,CGKD,AJJ+C,CIIxC,kBAAP,AHLR,CAA8BC,CGKK3C,IAA3B,CAAgC,IHLxC,EAA0C,IGKOC,IAAT,EAAe;AAC3C+I,ADLL,AHAQ,ACAb,GDAA,GIKUA,AHLN,CAAC,EEAS7K,KAAT,CCKc,ADLCC,GCKE6B,ADLjB,EAAoBA,ECKf,EDLL,CFAD,CEA2BqE,CFAN,QEApB,EAAqCC,MFAtC,CEAC,CFAqC,CEAS,YFA/C,EAAoD,eAApD,EAAoE,eAApE,EAAoF,WAApF,EAAgG,qBAAhG,EAAsH,wBAAtH,EAAgJ,qBAAhJ,EAAuK,oBAAvK,EAA4L,sBAA5L,EAAmN,aAAnN,EAAiO,WAAjO,EAA6O,eAA7O,EAA6P,mBAA7P,EAAkR3B,QAAlR,CAA2RD,UAA3R,CAAJ,EAA4S;AGMlSwG,ADLV,AHDA,ACCE,MGKQA,ADLN7B,AHAJvI,KIKe,AJLV,ACAI,CGKOZ,EJLRE,EGAM,CCKJ,CAAYC,CDLLoG,AFAf,CGKsB,AJLV,CIKWnG,AJLVQ,IGAQ,CAAC4F,AHAhB,CIKc,CAAU,CJLTjG,MAAM,CGAZ,AHAaI,GGAO,CAArC,AHAQ,GAA6BJ,CIKf,CAAZ,EAAyCuB,EJLR,CAACrB,CIKlC,EAA+C,EJNzD,UIMU,EAA6D,YAA7D;AAEAwK,ADLV,AHHA,AEKK,ADHJ,GAFD,GGQUA,ADLN1K,AHDJM,GEGcyF,ADHP,GECG,AHDJ,CCAK,CAAC,CECC,AHDJ,CIMW,CAACwE,IJNNvK,AEGV,CAAsBN,GAAtB,CEGe,CAAV,AJNW,AEGWkG,CFHV3F,GAAb,GAAmBD,CCAjB,CCGN,CDH8BkE,CCGQ2B,EFHT,CAAC1F,IEG9B,ADHM,CAAiC8D,CDF5C,AEKoD,CFR3B,CAOzB,OCFW,CAAJ,EAAkD;AGOlD,ADLLhE,ADGF,ADJE,IECAA,CCAI,CFGAsD,CCHD,EAAEqF,CDGG,CDJD,ECII,MCHI,CDGC5C,ECHA,AFDhB,ICIsB,CCJX,ADIYC,UAAzB,CAFoD,CAGpD;AEGM0E,ADNJzK,AHAF,ACDC,GAFM,CGSDyK,ADNJzK,EHAEK,GGAG,AHAA,ACDA,EGOM,ADNJqI,CCMK7C,AJNJrG,CCDC,CAAC,CDCC,CAACG,KGAK,CHAT,CAAW,CIMf,ADNc,CCMOD,AHPhB,EGOkB,AHPJ,CGOKC,ADRjB,MCQc,CAAU,SJN3B,EACTW,KIK0B,CAArB,AJNI,CACF,CIKgD,IJN9C,ACDC,EDGRC,ACHuD,IDChD,CAEF,CIIF,EAAgE,IJN5D,EAEOJ,ACHN,EAA+D,GDGpD,CIIhB,EJJmBL,MAAM,CAACI,GCHrB,CDGM,CCH2E,EDGrDJ,MAAM,CAACE,KAFpC,EAGPO,ACJQ,EAAmG,EDCpG,CAGF,QAHE,CCDC,CDIOH,CCJ0G,KDIpG,GAAGN,MAAM,CAACC,GAAhB,GAAsBD,MAAM,CAACG,CCJpC,EAAgJ,GDCjJ,EAITK,MAJS,CAIF,ECLG,CDCD,CCDiK,CDMxKC,IALO,CAKF,KCNG,EAA6K,IDC9K,EAMF,eAAeT,MAAM,CAACI,GCPnB,CDOH,CCPiN,EDOpL,GAA7B,GAAmCJ,ACPhC,EAAwN,IDOlL,CAACC,GAA1C,GAAgD,ECP7C,CDCD,CAAV,ACDkP,SAAvO,EAAkP,SAAlP,EAA6PiE,QAA7P,CAAsQD,UAAtQ,CAAJ,EAAuR;AGQ3R,ADND9D,AHOFP,AEJA,ADJE,EDQFA,CIZE,CDKAO,AHOA,CAACO,CEJGV,EFIN,CAAO,CGPC,CFDC,CECC4I,ADGE,GAAG,KDJb,EECkB,GAAC,IAHR,SHUb,EAAsC,UAASjI,CAAT,EAAW;AIClD,ADPGP,AHOE,AELYH,ADHf,CGNH,EAcGL,AHVM,CEGLQ,ADEcH,CETlB,EFSqB,CCFb,CDEe,ADHd,CECC2I,CHOG,AELI,EDHJ,CAAC,MECM,EFDP,CECQ,CFDG,gBAAX,EAA6B,eAA7B,EAA8C,eAA9C,EAA+D,iBAA/D,EAAkF,kBAAlF,EAAsG,oBAAtG,EAA4H,gBAA5H,EAA8I,kBAA9I,EAAkK,eAAlK,EAAmL,oBAAnL,EAAyM,cAAzM,EAAyN,oBAAzN,EAA+O,6BAA/O,EAA8Q,iBAA9Q,EAAiS,gBAAjS,EAAmT1E,QAAnT,CAA4TD,UAA5T,CAAJ,EAA6U;AEHvU,AHYPrD,AENmBV,ADFvB,GEJF,CDMyBA,EFMnBU,GENwB,CFMpB,CENsB,ADFvB,CDQIhB,AENE,EFMA,CAACiB,MCRd,GDQW,CAAa,UAAb,EAAyBF,CAAC,CAACC,IAA3B,CADF;AIEbgK,ADbE,AHaM9J,AEP6BX,ADDlC,CGQF,CAAC,CHVO,CCG4BA,ECFR,AHSrBW,GCRC,CCCkC,CFO9B,CEPgC,CFO7BH,ACRH,CDQI,AEPA,ADDH,CGQb,AJAiBG,CIAlB,CAAiB+J,GJFJ,EIEb,CAAuB,YAAY,IHRtB,EAA4B,aAA5B,EAA2C,aAA3C,EAA0D3G,QAA1D,CAAmED,UAAnE,CAAJ,EAAoF;AGSzF,ADTF5D,AHSMU,AERyCX,ADA7C,EEDFC,EDC+CD,EEQzC,AJAAW,CIAC6J,ADTF,CCSG,AFR2C,CEQ1C,CDTDhC,AHSE,AER2C,CDA5C,CDQIjI,CIAL,AJAM,CIAP,AJAQI,CIAA+J,GJHJ,EGNO,GCSX,ADTc9K,CCSG,IHRtB,CEDyB,CAACI,IAApB,GAA2BJ,MCS5B,ADTkC,CCSvC,ADTwCE,ECSI,GDd9C;ACeM,ADfN,AHeMc,AETS,ADCd,GCDD,ADDO,GECPV,AHSMU,EIAM+J,CHRL,EGQQ,CDTT,CHSO,ACRH,CGQQH,AHRP,CGQQ,ADTVhC,AHSOjI,CIAI,AJAH,CAACK,GIAC,CAAD,CAAQO,EJJf,CGLQ,CCSD,CAAa,CDTTvB,ICSJ,CAAZ,AHRI,CEDkB,CAACC,AFCG,GEDvB,GAA0BD,MAAM,CAACG,MAN1C,AFOU,EAA2C,uCAA3C,EAAmF,gBAAnF,EAAoG,mBAApG,EAAwH,wBAAxH,EAAiJ,mBAAjJ,EAAqK,uBAArK,EAA6L,uBAA7L,EAAqN,eAArN,EAAqO,eAArO,EAAqP,gBAArP,EAAuQ+D,QAAvQ,CAAgRD,UAAhR,CAAH,EAAgS;AGUjSrE,ADTN,AHQMqB,AEVN,ADEE,IGSIrB,EAAE,ADTFiJ,AHQA5H,AETJZ,CEUOR,IFVF,ADCE,CDQG,CICN,CAAU,AJDDc,AETL4C,CFSM,CAACtC,CGRA,CDDH,CDCZ,CEAkBZ,CDDHL,CFIN,GGHc,EDDF,CCCG,ADDFI,CEUlB,EAA2B+C,ADTjC,CDDU,GAAqBnD,CEUzB,CAAiC,IFVF,CAACE,IEUhC,CFXN,CEWkD,MAA5C;AACAN,ADTN,AHQMsB,AEXN,ADGC,GAFM,CGWDtB,EAAE,ADTFkJ,AHQA5H,AETJZ,CEUOT,EHTF,GDQK,AETJ,CEUF,AHTK,CGSK,AJDDc,ACRH,CDQI,AETL4C,CFSMrC,CGRA,EDDF,ADCJ,CEAS2H,CFAD,CDER,AEHO7I,MAAM,CEUlB,AFVmBC,EEUQ+K,ADTF,AFApB,CCDA,CDCoB,CEAC,CDDDhL,CCC/B,CAZmD,CCqB7C,ADPN,CCOyC,EFVJ,CAACG,IDC3B,ECHX,ADG8C,CCPM,CAQpD,GEQM,EAAmD,IHT9C,CGSL,CHTqD,YAAhD,EAA8D,eAA9D,EAA+E+D,QAA/E,CAAwFD,UAAxF,CAAJ,EAAyG;AGU1GrE,AJDAuB,ACRJ,IGSIvB,EAAE,AJDFuB,CICGtB,IHTA,EGSH,IHTJ,GDQkB,EAAEc,CAAC,CAACQ,KICA4J,GAAlB,MJRK,MIQyB5H,KAA9B,CAAoC,SAApC,EAA+C,OAA/C,EAAwD6H,OAAxD,CAAgE,cAAhE,EAAgF,IAAhF;AAEAJ,ADTN,AHOMxJ,AERN,ADAC,GAFM,CGYDwJ,CAAC,CAAC,ADTFrK,AHOAa,AERAb,GCCG,ADDA,ADAF,GECKb,ADDAA,GCCG,AHOA,AERA,CCCCG,ADDAA,CFQEc,CAAC,CAACS,GGPR,ADDA,CCCW,ADDA,EEUhB,CAAD,CAAuB6J,CJVlB,UIUL,CAAmC,AFV7B,EACXzK,ICAW,EACXA,ADFW,CACJ,KCAI,ADDA,CCEJ,CDALC,GEQG,CDTM,ADDA,CAEJ,CCCLA,IAFS,CAEJ,CDHI,EAEKJ,ICDL,CDCU,CCCLA,EDDQL,GCCH,GAAGA,ADDM,CAACI,IAAf,CCCc,CAACA,CDDOJ,GCCtB,GAAsBA,ADDM,CAACE,KCCD,ADD5B,CCC6BA,EDDQ,EAF1C,CCCA,CDETO,CCCAA,GDJS,CCCA,ADEJ,CCCA,ODJI,CCCA,CDEMH,CCCAA,KDDM,CCCA,EDDGN,CCCAA,KDDM,CCCA,ADDCC,CCCAA,EDDhB,CCCA,EDDsBD,CCCAA,KDDM,CCCA,ADDCG,CCCAA,KDJnC,CCCA,CDGXK,CCCAA,KDLW,CCCA,ADGJ,CCCA,EDLI,CCCA,CDITC,CCCAA,GDNS,CCCA,ADIJ,CCCA,UDNI,CCCA,EAKS,gBAAgBT,GDDHA,GCCS,CAACI,EDDJ,CAACA,CCCJ,GAAYyI,ADNrC,WCMS,GDD4B7I,CCCe,GAA3C,EDDkC,CAACC,CCCeD,EDN3D,ICMiE,CAACC,EDN9E,CCMuE,ADfnB,CAgBpD,ECDkF4I,WAA7D,IAA4E,GALrF,CAAZ,CAfmD,CAsBnD;ACGM+B,AJFAvJ,ACRJ,IGUIuJ,CAAC,CAAC,AJFFvJ,IIEC,CAAD,AHVG,CGUK6J,EJFA,EAAGvK,CAAC,CAACU,ACRjB,EGUI,CAAiB,mBAAjB;AAEAuJ,ADJN,AHTW,AEQX,ADNC,IGWKA,CAAC,AJbH,CIaI,ADJFhG,ADDAsB,MCCM,EDDE,CCCCC,EDDEA,GEKV,CAAD,CAAkB8E,ADJF,CAACxG,CDDC,CAACb,QEKnB,CAA8B,ADJrB,CAAoBrC,IAApB,EAA0BqE,EDDzC,IEKM,GDJS,EAAqCC,OAArC,CAAf;ACKM+E,ADHN,AHAC,AEFD,ADND,GDJC,CIeMA,CAAC,AJHJtJ,CGAGyH,ADFA3C,GFVN,CAYS,EGAG,ADFA,GCEGD,ADFAA,KFEG5E,EGAI,ADFA,CCECuC,ADFAD,CFEd,EAAe,OIGIkH,CFL5B,CCEA,ADpBoD,CEuB7C,AFHP,cEGM,CAAqCG,QAArC,CAA8C,aAA9C;AACH,ADFH,AHDE,MGCIlC,EHDExH,IAAI,CGCC,EHDED,CGCC3B,EAAE,CAACC,AHDA,CAAC4B,KGCJ,CAAU,CHDX,CAAaC,KAAb,CAAmB,CAAnB,CAAb,CADsB,CACc,cGCtB,CAAhB,CA3BmD,CA6BnD;ACCD,AFJC,ADPK,CGHP,KFUQQ,CAAC,EDPOiC,CCOJvE,EAAE,CAACyG,CDPR,CAAe9E,IAAf,EAAqB,CCOhB,GACPO,KADO,CACD,CAAE,CAAF,EAAKzB,KAAL,CADC,EAEPwB,MAFO,CAEAqE,QAFA,EAGPI,OAHO,CAGC,IAHD,CAAV;ACIA,AHFE,AEGF/F,ADXA,ECWAA,GAAG,CCDG0I,ADCFzI,ADXE4D,EDQEzC,CGEC,GAAG/B,ADCZ,CFHa,AEGF,CCDG,CAACsJ,AFVA,CDQCtJ,AEGhB,EFHkB,AEIfa,ADZe,CDQCmB,CCRnB,ECWA,CACQ,KCFI,GACTuH,AHHa,GACXtH,AEEL,KCDY,CACA,AHHI,CACJ,GGCA,EACU,aDCevB,MADrC,QAEG+B,IAFH,CAEQzC,EAAE,CAAC0C,GFLK,EAEXR,KAFW,AEKR,CFHGlC,AEGWsC,CAAd,CFHK,AECb,CFDcH,CEIXiB,SFNa,AEGhB,CFHE,AEMW,MAHb,EAIGvC,IAJH,CAIQ,WAJR,EAIqB,8BAJrB,EA1BoD,CAgCpD;AELF,ADFc,AHEV,ACXFc,EAAAA,CEWG6H,GFXC,CAAC/E,CDWGrC,CIAD0I,KHXP,CAAa,CESD,CAEK9K,ECAnB,ADAqB,AHAA,CIAD2K,ADAElB,EHAEzJ,EAAE,CAACqC,ACXZqC,IGWf,CDFc,AHEU,CIAO,CDC1BM,AFZiB,CDYfpD,CCZmB,GDWF,CGFV,AHGFA,CGHV,CA9BmD,CAmCnD,CHHsB,EAEnBD,IAFmB,CAApB,CAPsB,CAWtB;AIHA,AFKF,ADhBE,MGWMA,AFKFkB,CAAC,CDhBD6B,EGWM,AFKF1E,EAAE,CELG2K,AFKFlE,EDhBA,CAAC,MGWU,AFKd,CELejB,CHXZ,CCiBVtD,ADjBG,CGWS,CAAc,EHXF,CCgBjB,ADhBJ,CCiBG,CAAExB,EDhBLgE,GGUuB3D,CAAC,AFMrB,EENyB,AFMf,CAAV,ADhBI,CCeH,ADfI,ECiBXkB,KDjBU,CCeH,ADfJ,CCiBIuE,GDjBgB,CAApB,ECeI,CDdJ9B,CCiBHgC,MDjBU,CCcH,ADdI,CCiBH,IAHD,CAAV,WDda,CAAP,GAA6B,EAF7B,IAGAhC,OAAO,CAAC,gBAAD,CAAP,GAA4B,CAAC,cAAD,CAHhC,EAGkD;AGS9C,ADEN,AHCE,AEKF/D,ADhBI6D,ECgBJ7D,GAAG,CCNG+I,ADMF9I,ADhBA4D,EDWIlC,CAAC,EIHI,ADEF,CHCCtC,AEKZ,CAAW,CCNGW,AHCA,CAAC4B,ACXF,CCgBb,ADhBcoC,CEUG,CAChBgF,ADMElH,EDjBC,CAAe,CCgBnB,CCNc,ADONzC,CCNDqJ,AHAK,CEMF,CAACtG,CCPG,AHEXd,EGAFrB,IHDW,CACFZ,AEKF,CCPM,ADOM6C,CCLZ,AHAI,AEKJ,CFLKL,AEIb,ECNc,AD/BsC,CAwCpD,CCNC3B,EHDS,CAAUc,CGFN,CAGR,EHDI,EGFI,AHEY,EGCd,OAHE,CHEYZ,CGEzBqC,AHF0B,SGFb,CAIH,MAJG,EAKbzB,IALa,CAKR,UAASZ,CAAT,EAAY;ACNRC,ADMU,AHHO,ACXrB,MGQIA,IAAI,CDMaD,CCNXf,ADMI,CHHWe,CIHb,AJGc,CIHbE,AJGcD,IAAN,KIHX,AHRM0D,CGQO,MHRA,CAAC,GGQd,EAAyB3D,CAAC,CAACC,IAA3B,CADH,EHPgB,CAAP,CAAwB4D,SAAxB,CAAkC,CAAlC,EAAoC,EAApC,CADH;AGUT2G,ADKqB,AHHJ,AEQ3B,ADlBM,GEQQ,EAMblI,AHJS,CIFAkI,AJCE,AESN5E,EFPHzE,EGHW,GCAG,ADOhBtB,AHNW,AESC,CFPJ,CIHU,AJGR,CIHSG,AJGX,AEOOf,CEVK,CAACyB,AJGRhB,AEOI,CCVJ,ADUKqC,CCHX,GHJC,CAFG,CAAV,CIDiB,ADAL,CFRW4B,CEgBtB7D,CCPS,CAACE,AFSG,CETF,CAACM,ADDD,CAQN,ADGLa,CDnB6B,CAAC,GGQd,AFUH,CACP,CCXK,ADWJ,CETE,CAACnB,ADMI,CCNH,CAACG,GFSN,EEXU,ADAL,ADWK,ECFhB6C,CCNS,AHXoB,CGWnBhD,ADHC,AFVK,CGaL,ADMR,CCNSI,GFQN,CEXU,AFUH,CAAhB,EENY,CAACJ,CAAC,CAACO,CDJD,EASM,GCTD,GAKP,CAACP,CAAC,CAACK,CDIcyC,CAAT,EAAY9C,CAAZ,ECTD,ADSgB,GCHvB,CAACA,CAAC,CAACQ,cANI,GAOP,CAACR,CAAC,CAACS;AATF,ADYT4H,AHNFzI,ACXI,IEiBFyI,AHNFzI,CINI,EJMD,CAACC,GGMK,CAACX,EHNV,CAAW,GGMT,AHNF,CGMiB,CHLdY,IADH,CACQ,CCZc6D,OAAO,CAAC,EDW9B,EACqB,YCZQ,CAHZ,IDeqBhE,CGKpC,EACCkC,GHNkB,CGKnB,CACM2D,CHNuC,GAD/C,EAEG9D,CGKY,CAACwB,EHPhB,CAEQjE,EAAE,CAAC0C,KGKH,CAAoB3B,CAAC,CAAC6I,EHLtB,CAActH,CAAd,EGKoB,AHLHK,CGKYwC,IHL7B,CGKA,AHLuB,CGI7B,CHJM,CGML5B,AHRH,EAfsB,CAmBtB,EGEE,CAEO,OAFP,EAEgB4F,MAAM,CAACpI,CAAC,CAAC6I,MAAF,CAASzE,KAAV,CAFtB;ACDD,ADICiE,ADCJ,ADpBM,GGGS,CAAb,ADgBEA,OAAO,ADCFxC,CCDG3G,MAAR,CAAe,KDCnB,CAAuBc,CAAvB,EAA0B+D,EDpBEJ,OAAO,CAAC,GCoBpC,EAAyCK,WCDrC,ADCJ,ECAKnC,ADAiD,EDpBnB,CAJhB,CEuBf,CACM2D,OAAO,CAACtC,WAAR,CAAoBlD,CAAC,CAAC8I,MAAF,CAAS1E,KAA7B,CADN,EAEC5B,KAFD,CAEO,OAFP,EAEgB4F,MAAM,CAACpI,CAAC,CAAC8I,MAAF,CAAS1E,KAAV,CAFtB;ACHF,ADMEiE,AHPFzI,AEMA,ADpBI,IEqBFyI,AHPFzI,EICM6K,CJDH,CAAC5K,AEMA4E,CELK,EDMA,ADDF,CELKiG,ADMFxL,EHPV,AEMU4G,CFNC,GGOT,CAAe,EHPjB,EICuB,AJApBhG,CIAqBc,AFKJ,EAApB,ADpBsB+C,CDctB,CICuB,AJAf,CIAR,IHf6B,CAAC,ODc9B,EACuB,EGMrB,EACC9B,CHRH,EAEG/B,AChB0B,CEqB3B,AFrBoB,CEsBdE,AFtBwC6D,CEsBvC,CAACgF,AHRV,CAEQ,GAFR,EGQQ,AHNKnJ,CGMIgF,AFtBK,CAAoC,CAApC,EDctB,ACd6D,CEqB3D,CHJC5E,ACjBmB,CALL,GDmBjB,CAGQ,GAHR,EAGaH,MAAM,GAAC,EAHpB,EAIGkC,IAJH,CAIQ,OAJR,EApBsB,CA0BtB;AIHA,ADME,ADDF,ADrBI,MGgBE8I,EFKA/J,GCCGyH,CDDC,GAAGrI,CAAC,CAACwE,CCCC,CCNG,ADMFhC,GCNKiI,CFKT,CCCJ,ADDa,CELG,ADMF,CCNGG,GHhBDjH,KCqBFoC,CELD,CAAc,AHhBJ,CEsBvB,AFtBwB,CCqBX,CCCe,CDDL,MELI/F,CAAC,CDM5B,CAAP,OFtB8B,CANf;AGsBoB,ADOpC,AHHD,AEEE,ADrBE,GEGQ,EAoBXgD,EApBW,CAoBR,AHJElB,CAAC,EIJkC7C,CJI/BA,CIJiC,AFMlC8E,CENmC8G,AJIhC,CAAC9I,IGhBD,EAoBK,ECRwB,CAAa/B,CAAC,CAACC,AJI9C,AEEY,EDrBE0D,CDoBrBzC,CILsC,AFMf6E,CENW,ADQXrD,GDFI,CFFpB,AEEqB,ADrBA,CEuBd,AHHP,ACpBsB,CDoBrB,CGGsBI,AHHvB,CGGO,CHHH,CGGsB,IHH1B,CADA,EAEP3B,GEA2B,CAArB,CFFC,CAED,ACrBsB,CDqBpBxB,AC5BM,CC4BmCqE,KFA3C,EAAU,CAAV,CAFC,CAAV,CEE+D,IAAI+B,IAAI,CAAC,cAAD,CAArE;AENmC,ADSnCsC,AHFFzI,AEAC,ADrBG,GGckB,CAAtB,ADSEyI,AHFFzI,CEFa,CAAb,CFEG,CAACC,GGEK,CAAC2C,EHFV,CAAW,EGET,CAAc,AHFhB,ACrBcmB,EDsBXjC,IGCD,AHFF,CACQzC,ACtBa,CEuBGyD,AFvBF,CDsBZ,CAACV,GGCkB,CAAC+G,EFvBT,CARJ,CD8BT,CGCgB,AHDJjH,CAAZ,EGC8B,AHDfF,GGCrB,EHDM,CAAqB,EAArB,CADR,EA9BsB,CAiCtB;AITA,ADSEyG,ADDFzH,ADtBI,IEuBFyH,ADDFzH,EERMkK,EFQF,CAACpH,ECCI,CAAClB,IDDV,CCCE,ADDW,CCCG,ECTI,GAAGmI,ADSrB,EAAqBjI,EDDVqD,ADtBUpC,GEuBK,CAACqF,ADDZ,EAAI,CDtBS,CAAC,CGcK,ADSb,CCTc+B,EDSA,CAAnC,ECTqB,GAAsBC,OHdf,CATb,CGuBM,CAAgC,UAAAhL,CAAC;AAAA,ADUvD,AHADJ,AEDE,ADtBE,GEAQ,CHuBZA,CGCCoD,EAxBW,AHuBT,CGCC,AHDAnD,EEDImG,CEToDhG,CAAC,CAACwK,CJU9D,CAAW,GEDK,EETwC,ADb5C,CHuBZ,AEDmBzE,CCED,CHAfjG,ACxBgB6D,ECsBI,CAAC,CFCxB,CACQ,ECxBkB,CAAC,GEwBE,OHD7B,EACuB,CEFA,ADtBG,CCsBP,ADhCF,GDiCjB,AED4CoC,EFGzCjG,EEH6C,CAAC,CFCjD,CAEQ,GAFR,EAEa,CAFb,EAGGA,IAHH,CAGQ,GAHR,EAGa,AEJmC,CFIlC,AEJZ,EFCF,EAIG+B,IAJH,CAIQ,mBAJR,EAKG/B,IALH,CAKQ,aALR,EAKuB,OALvB,EAlCsB,CAyCtB;AIjBwD,ADWzB,ADD7B,ADtBE,GGYmB,CAAvB,MFUQmG,CCC8BoC,MDDvB,CCC8B,CAAC7F,CDD5BuD,ICCoB,ADDhB,CCC8B,ADD7B,KDtBG1C,OEuBY,EAA4B,EDD5C,CAAJ,GAAuB0C,ECCH,CAAP,CDDc,CAAC,ADtBA,CAACpC,OAAO,CAAC,WCsBV,CAA3C,CDtBoD,CAAR,CAX7B;AGyBjB,ADS6E,AHO7E,AC7BI,GEFQ,EAyBX7D,CCVKmL,EJgBAhJ,CG/BM,CAyBN,GCVO,ADfD,EAyBDhD,CCVK0L,CDUH,AHME,AC7BFhH,CEuBCsF,EHMIrJ,GAAG,CAACC,AC7BF,CAAC,IGaQ,ADUlB,CCVmBL,AJgBZ,CAAW,CGND0J,AFvBR,ED6BF,CAAlB,CIhBgB,CAAqB,CAArB,ADUL,CAAwBf,CCVK,CAAxB,EAA2BlI,IAA3C,GDUW,CAzBC,EA0BXuC,KA1BW,CA0BL,MA1BK,EA0BG,UAASxC,CAAT,EAAW;ACV1B,ADU4B,AHM5B,AERE,ADlCe,MG0BXkL,CH1BJ,CD0CIhJ,EERA,CCE6BkG,ADF5B3D,CFQG,CIhBG,CFQH,CFQGxF,AERFiH,CERKyE,CDUyB,AHM1B,CGN2B3K,AHM1BkC,AERT,CCEoC,ADF5B8D,CCE6B6C,EHM/B,GACVtH,CGPuC,AHM7B,CGNsC6C,AHO9C,AETE,CAAL,CER2B,CAAC9E,AFQJ,ECEe,CCVzB,ADUY,CCVM,CAAlB,EAAqB,AJiBvBU,CIjBE,AJiBX,EIjBmCC,AJiBvB,IIjBjB;AAEA,ADQ4D,AHOzC,AERfwE,ADrBH,GEJW,EA0BkD,CCRxD0G,EFOF1G,GAAG,CAAC0B,CFQkB5E,CAAC,CIfZ,AJeavB,AERxB,CFQyB,AERjBgG,CFQkBpF,CIfZ3B,EAAE,CAACuC,AJeO,CAAOvB,EER/B,EFQuB,AERL,CFQH,GIfD,GACjBiB,MADiB,CACV,CAAC+J,OAAD,EAAUC,OAAV,CADU,EAEjBE,UAFiB,CAEN,CAAC,CAAD,EAAI,GAAJ,CAFM,CAAlB;AAIA,ADtBY,AHiC+B,AEPrC,ADrBP,GEsBE5I,AF1CH,ED+Ce,CIVP6I,CJYHlJ,CGlCS,CA2BL,AHKM,CAEP,OGlCM,EA2BK,CHOFnC,AERC+F,CFQV,EAAY,CIZM,AFIJ,CAAC,CC1BT,CCsBe,CDM1BjG,GCN8BwL,CDtBnB,CCsBqB,ADM3B,CCN4BC,QAAP,ADtBf,CCsB+B,AFIvB,CCEH,ADFD,CAAyBxK,EC1B7B,CAAd,CApCmD,CAkEnD,ADJkB,CAA+B,CAA/B,EAAiC,CAAC,CAAlC,CADM,iBEHK,EAC1BrB,KAD0B,CACpB,GADoB,EAE1BC,MAF0B,CAEnB,GAFmB,EAG1B6L,OAH0B,CAGlB;AAAClM,AJSU,AEPd,ADpBR,IGkBYA,GAAG,EAAE,AHlBVmE,EGkBI,EJSkB3B,CAAC,CAAC9B,CAAC,CAAC,CAAD,AEPhB+F,ADpBhB,CD2B8B,CAAR,EEPF,CAAC,oBAAD,CAFI;AEAHxG,ADMrBK,AHGuC,AEN/B,ADpBT,EEuBCA,ECNqBL,CDMlB,AHCY,CGDXqJ,CHICxG,EIVqB,AJOX,CAGP,CIVoB,ADM5B,CAAUkG,CCNC,EDMX,EACGzI,EDJc,CFOAG,CAAT,EGJR,AHIoB,CGHV,GADV,EAEGF,IAFH,CAEQ,IAFR,EAEc,QAFd,EAGGuC,SAHH,CAGa,GAHb,EAIGzB,IAJH,CAIQ,UAASZ,CAAT,EAAY;ACVYR,ADUV,AHAA,AEVE,IEAQA,KFA1B,CEAgC,CDUTQ,CCVW,ADUV,CAACmJ,AHAFrH,CIVlB,AJUmB,CAAC9B,CAAC,CAAC,CAAD,CGAV,AHAQ,CAAR;AIVsBP,ADUJ,AHAD,AELlC,ADpBA,GEqBL,CCN4CA,CDWzC6C,AHJY,CAAb,CA3CsB,AEmCpB,CEC4C,AJY9C,CC3BYwB,CGeoC,ADMlD,GAMGjE,ADPQ,MCCX,CAMU,AF3BL,CAAqBe,EEqB1B,EAOGd,AF5BE,EAA2BiE,EEqBhC,CAOQ,OAPR,EAOiB,CF5BZ,EAA0CC,IEqB/C,EAQGnE,KF7BE,CEqBL,CAQU,AF7BkD,MEqB5D,EASK2C,KATL,CASW,MATX,EASmB,UAASM,CAAT,EAAWC,CAAX,EAAa;ACfrB,ADeuB,ADT5B,ADpBN,GGW6B,EAI1B6H,CHfG3G,KE6BmCmE,CDT7BhC,ADpBA,EGWiB,CAIhBuE,AHfE,EE6BgC,CAAC5H,CAAD,ADT5B,ADpBAmB,CE6Be,EDTZO,EDpBP,CCoBU,ADpBAvB,CCoBCmD,EETG,CFSP,CEJnB0E,AFI2B/E,KETD,CAKpB8E,AHhB2B,CAAC3G,CCoBf,CAAhB,IDpBS,CAAf,MGW6B,EAM1BsH,KAN0B,CAMpBxM,EAAE,CAAC4L,SANiB,EAO1BtJ,CAP0B,CAOxB4J,SAPwB,EAQ1BO,OAR0B,CAQlB,IARkB,EAS1BC,QAT0B,CASjB,IATiB,CAA3B;AAWAN,ADOkD,AHFlDpJ,AENImE,EECJiF,CDFF,CHOEpJ,CGGGO,GDTC4D,ECDN,CAUW,EHHA,CACR/D,CEPU,CAACsC,GCDd,CCEoB,CAACiH,ADQA,ADTf,EFMJ,CACW,CEPU,CECrB,AFDI,ECDN,CCE6BhK,CDSxB9B,ICTH,ADFF,AHOE,CILiC,ADSzB,CCTR,AJOCc,EGTH,EAWe3B,AHJb,CAEMoC,CGES,CAAC+H,GAAH,GACRjB,GHLL,EAGC7F,KAHD,CGIa,CACI6F,CHDhBtI,MAJD,CAIQ,GGAK,EAERqI,CHNL,EAKGpI,IALH,CAKQ,GGDK,CAEIoI,GHNjB,EAKiB,MGDJ,CAXf,EAeKlF,CHHuBhD,CGZ5B,AHYmB,CGGX,CHHuB,UGZ/B,EAeqB,UAAS8C,CAAT,EAAY9C,CAAZ,EAAe;ACXlCqL,ADYIhC,AHJ2B,AEV3B5E,ADrBN,EGuBE4G,EDYIhC,GFnCD,CCqBC5E,GAAG,ADrBAL,CCqBC+B,CFU8B,EEVlC,CAAQH,ADrBA,EEmCM,CAAChG,AFnCJ,CGuBG,ADYA,AFnCpB,CGuBqB6L,CDYGlD,AFnCJvE,ECqBd,CFU8CpE,CAAC,AEV7BoG,CEEtB,ADYkB,AHJkC7D,AC/B7B,CEmCnB,EHJ2B,AC/BL0B,GCqBtB,GDrB4B,CAACE,MAAnC,EAA2CC,KAAK,EAAhD,EAAoD;AGyBlDiH,ADWG,AHLsD,AETtD,ADrBHpH,EGwBAoH,CDNF,CFlBEpH,CEoCGjB,AHXH,EGPF,AHaKR,CGKG,EFpCA,CAAC4B,CDyBP,CAMS,GC/BH,CAAN,EDyBA,CIDkB,ADNpB,AFlBkB,CGwBGpB,AJOF,CGKG,CCZpB,CAAsB,AHxBFkB,KAAJ,CAAUhB,CD+BAlD,CAAT,EGKc,AHLF,CIP7B,EAAmC,IHxBE,CAACmE,MAAtB,CGwByB,AHxBzC;AGyBI,ADYAmF,AHN2B,AC9BhC,IEoCKA,ICZMwC,KJM4B9K,IINnB,CJMwB,CAAChB,CINtBf,ADYF,AHNyB,CGMxB0J,AHNyBpG,CINtB,CAACrD,CJMkB,CAAZ,CGMX,CAAhB,ECZkB,CAAU,sDAAV,CAAlB;AACA,ADYD,AHPkD,AETnD,GCJJ,EAnEmD,AH0EjD,CGeF,CHRKY,CINOyB,CAAC,CFJL,CFGN,AEHOkD,CEIOqH,AJMN,EEVE,CFGV,AEHW5F,EFUEhE,CEVN,CAAQ+D,EEIQ,AJDvB,CICwBnG,CJlDF,CA0DtB,EIRc,AFJP,CEIsB,AFJ3B,EAAuB,CEIX,CAAV;AACA,AFJA2E,ADpBNvB,EAAAA,MGwBYxD,AFJN+E,GAAG,CAAC0B,CEIO,AHxBN,CAACzC,CCoBN,CEIcoI,AFJN7F,KDpBd,CAAoB,CCoBd,EEIuB,AFJN,CEIOnG,IAAV,CAAe,CHxBduE,MGwBD,CAAd,QHxBc,EAAkBtB,CAAlB,EAAwB;AGyBtC,ADaNnD,AHNE,AEXM,ADpBNsD,EEqCFtD,EFrCEsD,CEqCC,CAAC0F,ECbMmD,AJOFtJ,GGMR,CAAU6F,GAAV,AFrCa,CAAC5E,CEsCX7D,AHPc,EIPX,CJOc,AEXFkG,GCiBlB,AFrCE,CEsCQ,ADlBY,ADpBA,CCoBC,ECiBvB,EAEGjG,AHRK2C,IGMR,CAEQ,AFvCe6B,IEqCvB,AHNoB,CAAS5B,CGQf,CDnBQ,CAAJ,CAAuB3B,CFWrB,EAAgBf,CAAhB,AC/BE,CEqCtB,ADjBkB,CFWqB,AEXQ,ADpBTuE,CEwCnClC,ADpBe,ADpBI,ECoB2B,ADpBL,CCoBM,CAAhC,CADK,ICkBvB,CAGa,MAHb,EAIGzB,IAJH,CAIQ,UAASZ,CAAT,EAAY;AChBd,ADgBgB,AHTlBf,AEXI,ADpBJgF,MD+BAhF,AC/BAgF,EGwBM+H,AJOJ,CAAC3J,EGSsBrC,CAAC,AFxCpB,CEwCqBmJ,AFxCpBpG,CAAD,CAAN,CAAUwB,CGwBR,AHxBF,CD+BA,AEXYwB,CCoBM,AHTL,EC/BEnF,CCoBC,CAAC,EDpBE,CAChB4D,ED8BH,EAAwBhC,EC/BT,CACL,ED8BV,CAA8B,OEXd,ADnBLxC,CCiBQ,ADjBT,CD8BV,CC9BiB,CD8BwB,EAAzC,EADmC,CACW;AGSV,ADnBhC,ADnBA,GEkCR,EAKGsC,KALH,GAMGzC,EFxCYwE,IEkCf,ADfiB,CCqBP,GANV,EAOGvE,IAPH,CAOQ,AFzCsB,KAAKE,CAAC,CAAC,IEkCrC,EAOqB,UAASA,CAAT,CFzCe,CEyCH,AFzCE,CAAsBe,KAAtB,CAA4B,CAA5B,EAA8B,CAAC,CAA/B,CAApB,IACFuD,aAAa,KAAKtE,CAAC,CAAC,gBAAD,CAAD,CAAoBe,KAApB,CAA0B,CAA1B,EAA4B,CAAC,CAA7B,CADhB,IAEFgD,aAAa,IAAI/D,CAAC,CAAC,gBAAD,CAFhB,IAGFgE,WAAW,IAAIhE,CAAC,CAAC,cAAD,CAHrB;AGuBF,ADkB6B,AHX/Bf,AEdmB,ADZhB,MD0BHA,CChCe,CGyBTsC,AJOJ,CIPK,AJOJrC,AEdD,ADXCuF,EEoCmC,CF3CvB,CGyBJ,AHlBJ,EDyBP,CAAU,CIPJ,IAAa/E,CJOLM,CAAd,ACzBQ0E,CEoC2C1E,CAAC,AHXnCwC,CIPO,ADkB6B+G,EFpC9C,EGkBqB,AJO5B,CAAuB,GIPrB,EAAgC,ADkBiB,GAAe,CHXlE,EGWmD,AHXjB,CAAlC,EGWwEC,AHbrC,CAEG,GGWsC,CAACC,EAA1B,GAA+B,EAA5C,IAAkD,cAAlD,GAAmEvB,WAAnE,GAAiF,KAAxF;ACjBzB6D,ADiByH,AHVhI,AEVE,ADhBM,GE6BX,EAOsI,AHbpI,CIJQA,AJvDc,CAgEtB,AElBE,MAMO,EDhBWrH,EGmBD,GAAGuG,AHnBG,CAACtG,KAAjB,CGmBoB,CAACsH,WAAR,GAAsBC,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CAAd;AACAF,ADSV,ADZM,ADjBK,GEqCRnM,GCjBOmM,CH3BS,EEoCnB,AF5BOpH,CEoCG,EDpBEwB,GEGO,AH3BA,CEoCnB,AF5Bc,EGmBQ8E,ADkBnBpL,EDrBgB,ECYnB,CASQ,ADrBc2E,EEGO,CAACwH,ADS9B,ADZyB,ADhBVpH,CCgBWwB,CCqBb,CATb,CDZsB,CCsBnBvG,ADtB2BmG,ICY9B,CAUQ,AFtCM,CGmBQ,CFHA,ADhBKnB,CCgBrB,ADhBQ,CGmB8BoH,ADS5C,EAUc,GCnBQ,CAA4B,GAA5B,ADStB,ECTuD,ADoBpDpM,CCpBmB,CAAZ,EDSV,CAWQ,WAXR,EAWqB,UAASE,CAAT,EAAY;ACnB1B,ADmB4B,AFvCrB,KGiBR,MAGO,ADmB6BA,CAAC,CAACuJ,EFvCXxE,MAAM,CAACF,CEuCE,GAAe2E,IAAI,CAACC,CFvCvB,CEuCG,AFvCT,GEuCkC,AFvCb1E,MAAM,CAACD,CAAD,CAA9C,mBEuC4B,GAAwD,IAA/D;AClBzB,ADkB+F,AHXvG,AEXIsB,ADjBQ,GE4Bd,EAYG5D,EFhDgB,CDoCXG,AEXFyD,CDjB2D,CGqBjD+F,ADOhB,AFpCmB,CEgDV,AFhDL,IG6BiB,CFJR,CAACxH,CEIUwG,CJOL,GAAG,AEXhB,ECWN,EAYwB,ADvBD,CEIU,AFJ3B,CEI4BiB,GJO1BzJ,GIPgB,CAAiBpB,CAAjB,ADmBSvB,CCnBvB,ADmBc,EAAY,GHZd,GAAU;AINtB,ADkB4B,AHXlCf,AEXEwF,ADjBH,KAVD,CDsCExF,EAAE,AEXAwF,CFWCpC,CIPSgK,CDkB6BrM,ADtBpC,CCsBqC,ADtBpCmG,CEIS,ADkB4BoD,EDtBzC,CEIgB4B,AFJRlF,EFWV,CAAa,IGW4B,ADtBvC,EEIyB,AFJRG,CEISgG,ADkB4B5C,EHXxD,EGW4D,AHXpChH,CGWqCiH,CClB3C,CAAiB,ADkBM,ADtBvC,CEIkClI,CAAD,AJOnC,CGWkE,AHXpC,EIPU,CAAC7B,EDkBA,GClBvB,ADkBwD,CClBpE,AJON,EAAyC,CGWP,AHXlC;AINMqM,ADiB2E,AHVlF,AEXE,ADjBJ,GE0BD,AFtCA,EEmDGvJ,AHbD,CILQuJ,AJ5Dc,CAqEtB,GGJF,CAaS,MClBY,ADKrB,EAaiB,CClBOI,KAAK,CAACF,GDkBJnJ,CAAT,EAAYC,CAAZ,EAAc,EClBP,GAAoBmJ,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAAd;AACAF,ADiBuB,ADrB9B,ADhBH,KCTE,CE6BQA,GHpBH/H,EEqCiCmE,ICjBrB,AHpBnB,EEqC8C,CCjBxBiE,ADiByBtJ,CAAD,CAAb,CCjBR,CAACkJ,WAAJ,GAAkBC,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,CAAZ;AACH,ADgB6C,ADnBlD,ADjBH,GEuBC,EAcG1J,GDpBK8D,CAAC,CCMT,CAcS,CDpBG,EAAV,UCMF,EAcwB,MAdxB,EAeG9D,KAfH,CAeS,WAfT,EAesB,EAftB,EAgBGX,IAhBH,CAgBQ,UAAS7B,CAAT,EAAY;AAAE,AHXpB,AEVA,QFUM4C,AEVF2D,GCqBuBf,ADrBpB,CFUG,EEVA,CFUG,AEVb,EFUA,CGWkC,CAACtC,WAAR,CAAoBlD,CAAC,CAACoE,KAAtB,CAAP;AClBhB0F,ADkBqD,AHVzDlK,AEVAsE,GCIF,CCFM4F,AJQJlK,AEVAsE,GFUG,CAAC7B,CIRK,AFFJ,CEEK2C,AFFJwB,IAAN,CAAW/B,EEEP,AJQJ,CIRkBxF,AJQJ,AEVA,CAACwH,CEEK,CAACvH,IFFV,CFUX,CIRkB,AFFlB,CEE4B,AJQF,CEVDwE,OAAzB,CAAiC,OEEf,CAAd,EAA2CiG,AFFbjF,KAAD,EAAW,EEExC,EAAsDqH,WAAtD,EAAmEC,SAAnE;AACAhC,ADkBP,AHXG,AETE1D,IEEE0D,CJQDpJ,CEVD0F,CAAC,CAAC1C,CFSJ,CACQ/C,CIRG,CAACmE,AFFV,CAAO,CFUG,CAACnC,IIRT,AJQI,CIRY5D,CJOpB,CIPsB,CAACC,AJSpBoD,KAFH,CIPoB,CAAU,CJU3BzC,MAHH,CAGU,MAHV,EIPoB,AJWfC,CIXD,EAA6CiM,CJOjD,CAIU,GAJV,EAIerM,IIXX,CJOJ,CIP8DsM,CJYzDlM,IALL,CAKU,GIZN,AJOJ,EAKe,UAASgD,CAAT,EAAWC,CAAX,EAAa;AIX3B,AJW6B,AEb1B,GEfJ,UJ4BqC,KAAKA,AEb5B2B,CFa6B,IAAE9B,AEb1B,CAAC8D,GFa6B,GAAC,AEdzC,CFckC,CAAb;AIVjC,ADkBD,AHRyD,AEZjD,KFOJ,EAKuD,EGQlD2C,ODpBO3E,KAAK,CAACiC,CCoBtB,CAAwB+C,EDtBX,OCsBb,EAAmCf,KAAnC,EAA0C;AACxCA,AHdE,AENI,ECoBNA,GHRO7I,EGQF,CACF0E,CHfD,CAMU,IGQZ,CACU,EHfR,AENeE,EFYI9B,GEZC,CFMpB,AENqB+B,ECqBJ3E,AHRZF,CGQG,EAAY,ADrBL,CFMf,CAOU,EEboB,IAAEc,EFMhC,EAOoBgC,AEbgB,CAACuB,GFMrC,EAQKrE,CEdU,CAAD,EFMd,CAQU,AEdsC,IFMhD,EAQgB,CARhB,EASKA,IATL,CASU,IATV,EASgB,CAThB,EAUK0C,KAVL,CAUW,MAVX,EAUmB,UAASxC,CAAT,EAAW;AGKR,AHLU,AEnBvB,OAAP,ICwB2BA,CAAC,CAAC6I,AHLQ7H,KAAK,CGKf,AHLgBhB,CGKPoE,AHLM,CAAZ,IGKH,IAAkBsF,SAAS,CAACtF,KAAnC;AAA0C,AHLhB,GGIlD,EAEGtE,AHhBD,EAWKkD,EGGP,AHdE,CGgBM,AHLE,SGGV,EAEmB,AHhBjB,EAWqBP,CGGvB,QHdE,EAYKO,EAZL,CAYQ,YAZR,EAYsBL,WAZtB;AGiBH,AHHG/C,AElBE,IFkBFA,GAAG,CAACyC,EElBGqC,KAAK,CAACC,CFkBb,CAAc,GElBP,IAAe,GFkBtB,CElBwB/D,CFkBI,GElBA,CAACuD,MAAtB,CAAD,GAAkC,GAAlC,IAAyCoC,GAA7C,EAAkD;AFkBpD,AEjBIA,KFkBD3F,GElBC2F,CFiBJ,CACQ1F,CElBD,GFkBK,AElBD6D,CFkBE7B,IAAL,AElBQ,CAAC8B,CFiBjB,EAEGrC,EEnBQ,GFiBX,CEjB0B,EFoBvBzC,EEpByBe,IFiB5B,AEjBgC,CFoBtB,AEpBuBuD,MFiBjC,AEjBW,CAAD,CFqBLrE,EErBuC,EFiB5C,CAIU,AErBN,GFiBJ,EAIeJ,KAAK,GAAGkD,IA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","file":"INF8808-Projet.e31bb0bc.js","sourceRoot":"..","sourcesContent":["export function vesselTypeClasses() {\r\n    return [\r\n        \"Barges\",\r\n        \"Excursion\",\r\n        \"Fishing\",\r\n        \"Merchant\",\r\n        \"Other\",\r\n        \"PleasureCrafts\",\r\n        \"Tanker\",\r\n        \"Tugs\",\r\n        \"Other\"\r\n    ]\r\n}","import { vesselTypeClasses } from './vesselTypeClasses.js'\r\n\r\n// Source : https://d3-graph-gallery.com/graph/stackedarea_template.html\r\nexport function build(div) {\r\n  // set the dimensions and margins of the graph\r\n  const bounds = d3.select('#stacked-area-chart').node().getBoundingClientRect()\r\n  var margin = {top: 60, right: 230, bottom: 50, left: 70},\r\n  width = bounds.width - margin.left - margin.right,\r\n  height = 650 - margin.top - margin.bottom;\r\n\r\n  // append the svg object to the body of the page\r\n  var svg = div.select(\"#stacked-area-chart\")\r\n  .append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n  .append(\"g\")\r\n    .attr(\"transform\",\r\n          \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n  d3.csv('./TRIP_STACK_HALF_MONTH.csv', function(d){\r\n      return { \r\n        date : d3.timeParse(\"%Y-%m-%d\")(d.date),\r\n        Other : d.Other,\r\n        Tugs : d.Tugs,\r\n        Fishing : d.Fishing,\r\n        Barges : d.Barges,\r\n        Tanker : d.Tanker,\r\n        PleasureCrafts: d.PleasureCrafts,\r\n        Excursion : d.Excursion,\r\n        Merchant : d.Merchant,\r\n      }\r\n  }).then( function(data) {\r\n    const keys = data.columns.slice(1)  // List of Vessel Types = header of the csv files\r\n\r\n    const color = d3.scaleOrdinal()\r\n      .domain(vesselTypeClasses())\r\n      .range(d3.schemeSet2);\r\n\r\n    const stackedData = d3.stack()\r\n      .keys(keys)\r\n    (data)\r\n\r\n    // Add X axis\r\n    const x = d3.scaleTime()\r\n    .domain(d3.extent(data, d => d.date))\r\n    .range([ 0, width ]);\r\n    svg.append(\"g\")\r\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n      .call(d3.axisBottom(x).ticks(10))\r\n\r\n    // Add X axis label:\r\n    svg.append(\"text\")\r\n      .attr(\"text-anchor\", \"end\")\r\n      .attr(\"x\", width)\r\n      .attr(\"y\", height+40 )\r\n      .text(\"Temps\");\r\n\r\n    // Add Y axis\r\n    const y = d3.scaleLinear()\r\n      .domain([0, 12000])\r\n      .range([ height, 0 ]);\r\n    svg.append(\"g\")\r\n      .call(d3.axisLeft(y).ticks(15))\r\n\r\n    // Add Y axis label:\r\n    svg.append(\"text\")\r\n      .attr(\"text-anchor\", \"end\")\r\n      .attr(\"x\", 0)\r\n      .attr(\"y\", -20 )\r\n      .text(\"Nombre de navires\")\r\n      .attr(\"text-anchor\", \"start\")\r\n\r\n    // Area generator\r\n    const areaChart = svg.append('g')\r\n    const area = d3.area()\r\n      .x(function(d) { return x(d.data.date); })\r\n      .y0(function(d) { return y(d[0]); })\r\n      .y1(function(d) { return y(d[1]); })\r\n\r\n    // Show the areas\r\n    areaChart\r\n    .selectAll(\"mylayers\")\r\n    .data(stackedData)\r\n    .enter()\r\n    .append(\"path\")\r\n      .attr(\"class\", function(d) { return \"myArea \" + d.key })\r\n      .style(\"fill\", function(d) { return color(d.key); })\r\n      .attr(\"d\", area)\r\n\r\n    // What to do when one group is hovered\r\n    const highlight = function(event, d) {\r\n      d3.selectAll(\".myArea\").style(\"opacity\", .1)  // reduce opacity of all groups\r\n      d3.select(\".\"+d).style(\"opacity\", 1)  // expect the one that is hovered\r\n    }\r\n\r\n    // And when it is not hovered anymore\r\n    const noHighlight = function(){\r\n      d3.selectAll(\".myArea\").style(\"opacity\", 1)\r\n    }\r\n\r\n    // LEGEND //\r\n    const size = 20\r\n    svg.selectAll(\"myrect\")   // Add one dot in the legend for each name.\r\n      .data(keys.sort())\r\n      .enter()\r\n      .append(\"rect\")\r\n        .attr(\"x\", width)\r\n        .attr(\"y\", function(_,i){ return 10 + i*(size+5)}) // 100 is where the first dot appears. 25 is the distance between dots\r\n        .attr(\"width\", size)\r\n        .attr(\"height\", size)\r\n        .attr(\"rx\", 4)\r\n        .attr(\"ry\", 4)\r\n        .style(\"fill\", function(d){ return color(d)})\r\n        .on(\"mouseover\", highlight)\r\n        .on(\"mouseleave\", noHighlight)\r\n\r\n    svg.selectAll(\"mylabels\")   // Add one dot in the legend for each name.\r\n      .data(keys.sort())\r\n      .enter()\r\n      .append(\"text\")\r\n        .attr(\"x\", width + size*1.2)\r\n        .attr(\"y\", function(_,i){ return 10 + i*(size+5) + (size/2)}) // 100 is where the first dot appears. 25 is the distance between dots\r\n        .style(\"fill\", function(d){ return color(d)})\r\n        .text(function(d){ return d})\r\n        .attr(\"text-anchor\", \"left\")\r\n        .style(\"alignment-baseline\", \"middle\")\r\n        .on(\"mouseover\", highlight)\r\n        .on(\"mouseleave\", noHighlight)\r\n    })\r\n}\r\n","export const GLOBAL_VESSEL_TYPE = ['Barges', 'Excursion', 'Fishing', 'Merchant', 'Other', 'Pleasure Crafts', 'Tanker', 'Tugs']\r\nexport const REGION_NAME = ['Arctic', 'Central', 'East Canadian Water', 'Newfoundland', 'Maritimes', 'Pacific', 'Quebec', 'St. Lawrence Seaway', 'West Canadian Water']\r\nexport const REGION_COLOR = ['#CAB2D6', '#6A3D9A', '#33A02C', '#FB9A99', '#FDBF6F', '#E31A1C', '#1F78B4', '#A6CEE3', '#FF7F00']\r\nexport const REGION_NAME_ALT = ['Arctic', 'Central', 'East_Canadian_Water', 'Newfoundland', 'Maritimes', 'Pacific', 'Quebec', 'St_Lawrence_Seaway', 'West_Canadian_Water']\r\n\r\nfunction findGlobalVesselType(vesselType) {\r\n  if (['Barge Bulk Cargo', 'Barge Chemical','Barge Chips','Barge Derrick','Barge General','Barge Log','Barge Miscellaneous','Barge Oil Drilling Rig', 'Barge Oil/Petroleum', 'Barge Rail/Trailer','Barge Self-Propelled','Barge Towed',\"Don't use\",'Landing Craft','Logs Raft Section'].includes(vesselType)) {\r\n    return 'Barges'\r\n  } else if (['Excursion Passenger'].includes(vesselType)) {\r\n    return 'Excursion'\r\n  } else if (['Crab Boat', 'Dragger (Scallop, Clam, etc.)', 'Factory Ship', 'Fishery Patrol', 'Fishing Vessel', 'Gillnetter', 'Groundfish Boat (Open Boat)', 'Lobster Boat', 'Longliner', 'Other Fishing VSL (Open Boat)', 'Seiner', 'Shrimp Boat', 'Trawler', 'Troller'].includes(vesselType)) {\r\n    return 'Fishing'\r\n  } else if (['Cruise', 'Merchant (Dry)', 'Merchant Auto', 'Merchant Bulk', 'Merchant Cement', 'Merchant Coastal', 'Merchant Container', 'Merchant Ferry', 'Merchant General', 'Merchant Lash', 'Merchant Livestock', 'Merchant Ore', 'Merchant Passenger', 'Merchant Rail/Trailer Ferry', 'Merchant Reefer', 'Merchant RO/RO'].includes(vesselType)) {\r\n    return 'Merchant'\r\n  } else if (['Yacht - Pleasure Crafts', 'Yacht Power', 'Yacht Sails'].includes(vesselType)) {\r\n    return 'Pleasure Crafts'\r\n  } else if(['Merchant (Tanker)', 'Merchant Chemical', 'Merchant Chemical/Oil Products Tanker','Merchant Crude','Merchant Gasoline','Merchant Liquified Gas','Merchant Molasses','Merchant Ore/Bulk/Oil','Merchant Super Tanker','Merchant ULCC','Merchant VLCC','Merchant Water'].includes(vesselType)) {\r\n    return 'Tanker'\r\n  } else if (['Tug', 'Tug Fire', 'Tug Harbour', 'Tug Ocean', 'Tug Supply', 'Tugs Workboat'].includes(vesselType)) {\r\n    return 'Tugs'\r\n  } else {\r\n    return 'Other'\r\n  }\r\n}\r\n\r\nexport function clean(data) {\r\n  const cleanData = []\r\n  data.forEach(element => {\r\n    if (element['Lenght'] != 0 && \r\n        element['Width'] != 0 & \r\n        element['Maximum Draugth'] < 30 &&\r\n        element['Departure Date'] < ['Arrival Date']) {\r\n      cleanData.push({\r\n        'Arrival Date': element['Arrival Date'].substring(0,10),\r\n        'Arrival Hardour': element['Arrival Hardour'],\r\n        'Arrival Region': element['Arrival Region'],\r\n        'DeadWeight Tonnage': element['DeadWeight Tonnage'],\r\n        'Departure Date': element['Departure Date'].substring(0, 10),\r\n        'Departure Hardour': element['Departure Hardour'],\r\n        'Departure Region': element['Departure Region'],\r\n        'Lenght': element['Lenght'],\r\n        'Maximum Draugth': element['Maximum Draugth'],\r\n        'Vessel Type': element['Vessel Type'],\r\n        'Global Vessel Type': findGlobalVesselType(element['Vessel Type']),\r\n        'Width': element['Width']\r\n      })\r\n    }\r\n  })\r\n\r\n  return cleanData\r\n}\r\n\r\nexport function chordMatrix(data, departureDate, arrivalDate) {\r\n  const matrix = new Array(REGION_NAME.length)\r\n  for (let index = 0; index < matrix.length; index++) {\r\n    matrix[index] = new Array(REGION_NAME.length)\r\n  }\r\n  \r\n  REGION_NAME.forEach((departureRegion, i) => {\r\n    REGION_NAME.forEach((arrivalRegion, j) => {\r\n      matrix[i][j] = data\r\n        .filter((d) => {\r\n          return departureRegion === d['Departure Region'].slice(0,-7)\r\n            && arrivalRegion === d['Arrival Region'].slice(0,-7)\r\n            && departureDate <= d['Departure Date']\r\n            && arrivalDate >= d['Arrival Date']\r\n        })\r\n        .map((value) => value.count)\r\n        .reduce((partialSum, v) => Number(partialSum) + Number(v), 0)\r\n    })\r\n  })\r\n\r\n  return matrix\r\n}","import * as preproc from './preprocess.js'\r\n\r\nexport function rebuild(div, startDate, endDate) {\r\n  div.select(\"#tab-3-heatmap\")\r\n    .select('svg')\r\n    .remove()\r\n\r\n  buildHeatmap(div, startDate, endDate)\r\n}\r\n\r\n// https://d3-graph-gallery.com/heatmap.html\r\nexport function buildHeatmap(div, startDate, endDate) {\r\n\r\n  const size = 0.28*window.innerWidth\r\n  // set the dimensions and margins of the graph\r\n  const margin = {top: 10, right: 5, bottom: 90, left: 115},\r\n    width = size - margin.left - margin.right,\r\n    height = size - margin.top - margin.bottom;\r\n\r\n  // append the svg object to the body of the page\r\n  const svg = div.select(\"#tab-3-heatmap\")\r\n  .append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right + 50)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n  .append(\"g\")\r\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`)\r\n\r\n  // Labels of row and columns\r\n  const myGroups = preproc.GLOBAL_VESSEL_TYPE\r\n  const myVars = preproc.REGION_NAME\r\n\r\n  // Build X scales and axis:\r\n  const x = d3.scaleBand()\r\n    .range([ 0, width ])\r\n    .domain(myGroups)\r\n    .padding(0.01)\r\n\r\n  svg.append(\"g\")\r\n    .attr(\"transform\", `translate(0, ${height})`)\r\n    .call(d3.axisBottom(x))\r\n    .selectAll('text')\r\n    .attr('transform', 'translate(-20,20)rotate(-45)')\r\n\r\n  // Build Y scales and axis:\r\n  const y = d3.scaleBand()\r\n    .range([ height, 0 ])\r\n    .domain(myVars)\r\n    .padding(0.01)\r\n  svg.append(\"g\")\r\n    .call(d3.axisLeft(y))\r\n\r\n  // Build color scale\r\n  const myColor = d3.scaleLinear()\r\n    .range([\"white\", \"#ff0000\"])\r\n\r\n\r\n  function transformData(d, departureDate, arrivalDate) {\r\n    let map = heatmapMap()\r\n\r\n    const data = d.filter((line) => {\r\n      return departureDate <= line['Departure Date'] && arrivalDate >= line['Arrival Date']\r\n    })\r\n\r\n    data.forEach(line => {\r\n      const keyStart = line['Departure Region']+line['Global Vessel Type'];\r\n      const keyStop = line['Arrival Region']+line['Global Vessel Type'];\r\n      if (!map.has(keyStart)) {\r\n        map.set(keyStart, {\r\n          'Region': line['Departure Region'].slice(0,-7),\r\n          'Type': line['Global Vessel Type'],\r\n          'count': 1\r\n          });\r\n      } else {\r\n        const current = map.get(keyStart);\r\n        current.count += 1;\r\n        map.set(keyStart, current);\r\n      }\r\n      if (!map.has(keyStop)) {\r\n        map.set(keyStop, {\r\n          'Region': line['Arrival Region'].slice(0,-7),\r\n          'Type': line['Global Vessel Type'],\r\n          'count': 1\r\n          });\r\n      } else {\r\n        const current = map.get(keyStop);\r\n        current.count += 1;\r\n        map.set(keyStop, current);\r\n      }\r\n    })\r\n\r\n    const p = [];\r\n    let max = 0\r\n    Array.from(map.values()).forEach((value) => {\r\n      p.push({\r\n        'Region': value.Region,\r\n        'Type': value.Type,\r\n        'count' : (value.count / (2*data.length)) * 100\r\n      })\r\n      if ((value.count / (2*data.length)) * 100 >= max) {\r\n        max = (value.count / (2*data.length)) * 100\r\n      }\r\n    })\r\n    myColor.domain([0,max])\r\n\r\n    return p\r\n  }\r\n\r\n  //Read the data\r\n  d3.csv(\"./TRIP_HEATMAP.csv\").then( function(data) {\r\n    // add the squares and interaction\r\n    const transformedData = transformData(data, startDate, endDate)\r\n    svg.selectAll()\r\n    .data(transformedData, function(d) {\r\n      return d.Type+':'+d.Region;\r\n    })\r\n    .enter()\r\n    .append(\"g\")\r\n    .attr(\"class\", \"square\")\r\n    .on('mouseenter', function() { rectSelect(this, x, y) })\r\n    .on('mouseleave', function() { rectUnselect(this) })\r\n    .append(\"rect\")\r\n      .attr(\"x\", function(d) { return x(d.Type) })\r\n      .attr(\"y\", function(d) { return y(d.Region) })\r\n      .attr(\"width\", x.bandwidth() )\r\n      .attr(\"height\", y.bandwidth() )\r\n      .style(\"fill\", function(d) { return myColor(d.count) })\r\n    \r\n      initLegend(svg,myColor)\r\n      drawLegend(width + margin.right + 10, 0, height, 15, 'url(#gradient)', myColor)\r\n  })\r\n}\r\n\r\nfunction heatmapMap() {\r\n  let map = new Map();\r\n\r\n  preproc.REGION_NAME.forEach((region) => {\r\n    preproc.GLOBAL_VESSEL_TYPE.forEach((type) => {\r\n      const key = region + type\r\n      map.set(key, {\r\n        'Region': region,\r\n        'Type': type,\r\n        'count': 0\r\n      })\r\n    })\r\n  })\r\n  return map\r\n}\r\n\r\nfunction rectSelect(element, x, y) {\r\n  d3.select(element)\r\n    .append(\"text\")\r\n    .attr('x', function(d) { return x(d.Type) + x.bandwidth() / 2; })\r\n    .attr('y', function(d) { return y(d.Region) + y.bandwidth() / 2; })\r\n    .attr('text-anchor', 'middle')\r\n    .attr('dominant-baseline', 'middle')\r\n    .text(function(d) {\r\n      return d.count.toFixed(2) + '%'\r\n    })\r\n}\r\n\r\nfunction rectUnselect(element) {\r\n  d3.select(element)\r\n    .select('text')\r\n    .remove()\r\n}\r\n\r\nfunction initLegend(svg, colorScale) {\r\n  const defs = svg.append('defs')\r\n  svg.append('rect').attr('class', 'legend bar')\r\n  svg.append('g').attr('class', 'legend axis')\r\n\r\n  const linearGradient = defs\r\n  .append('linearGradient')\r\n  .attr('id', 'gradient')\r\n  .attr('x1', 0).attr('y1', 1).attr('x2', 0).attr('y2', 0)\r\n\r\n  linearGradient.selectAll('stop')\r\n  .data(colorScale.ticks().map((tick, i, nodes) => (\r\n    {\r\n      offset: `${ (100*i / nodes.length)}%`,\r\n      color: colorScale(tick)\r\n    })))\r\n  .join('stop')\r\n  .attr('offset', d => d.offset)\r\n  .attr('stop-color', d => d.color)\r\n}\r\n\r\nfunction drawLegend(x, y, height, width, fill, colorScale) {\r\n  d3.select('.legend.bar')\r\n    .attr('fill', fill)\r\n    .attr('x', x)\r\n    .attr('y', y)\r\n    .attr('height', height)\r\n    .attr('width', width)\r\n    \r\n  const scale = d3.scaleLinear()\r\n  .domain(colorScale.domain())\r\n  .range([height, 0])\r\n\r\n  let axis = d3.axisRight()\r\n  .ticks(7)\r\n  .scale(scale);\r\n\r\n  d3.select('.legend.axis')\r\n  .call(axis)\r\n  .attr('transform', 'translate('+ (x+15) + ',' + y + ')')\r\n}\r\n","import * as preproc from './preprocess.js'\r\n\r\n// https://d3-graph-gallery.com/chord.html\r\n// https://observablehq.com/@d3/directed-chord-diagram\r\n// https://jyu-theartofml.github.io/posts/circos_plot\r\n// http://strongriley.github.io/d3/ex/chord.html\r\nexport function build(div, data, startDate, endDate) {\r\n  let chordWidth = window.innerWidth / 2\r\n\r\n  var margin = {\r\n    top: chordWidth*0.175,\r\n    right: chordWidth*0.05, \r\n    bottom: chordWidth*0.07,\r\n    left: chordWidth*0.20 }, // TODO : Revoir valeur\r\n  width = chordWidth - margin.left - margin.right,\r\n  height = chordWidth - margin.top - margin.bottom;\r\n\r\n  const outerRadius = width/3.5;\r\n  const innerRadius = outerRadius-10\r\n\r\n  // create the svg area\r\n  const svg = div.select('#tab-3-chord-diagram')\r\n  .append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n  .append(\"g\")\r\n    .attr(\"transform\", \"translate(\" + (margin.left+outerRadius) + \",\" + (margin.top+outerRadius) + \")\");\r\n\r\n  // create input data: a square matrix that provides flow between entities\r\n  const matrix = preproc.chordMatrix(data, startDate, endDate)\r\n  \r\n  const colors = preproc.REGION_COLOR\r\n  \r\n  const tooltip = d3.select('#tooltip-chord-container')\r\n\r\n  // give this matrix to d3.chord(): it will calculates all the info we need to draw arc and ribbon\r\n  const res = d3.chordDirected()\r\n    .padAngle(0.05)     // padding between entities (black arc)\r\n    .sortSubgroups(d3.descending)\r\n    (matrix)\r\n\r\n  // add the links between groups\r\n  const links = svg\r\n  .datum(res)\r\n  .append(\"g\")\r\n  .attr(\"id\", \"links\")\r\n  .selectAll(\"path\")\r\n  .data(function(d) { return d; })\r\n  .enter()\r\n  .append(\"path\")\r\n    .attr(\"class\", \"chord\")\r\n    .on('mouseenter', function(_, d) {\r\n      tooltip.select('span#tooltip-chord-region-from-text')\r\n      .text(preproc.REGION_NAME[d.source.index])\r\n      .style('color', colors[d.source.index])\r\n      tooltip.select('span#tooltip-chord-region-to-text')\r\n      .text(preproc.REGION_NAME[d.target.index])\r\n      .style('color', colors[d.target.index])\r\n      tooltip.select('span#tooltip-chord-value')\r\n      .text(d.source.value)\r\n      return tooltip.style(\"visibility\", \"visible\")\r\n    })\r\n    .on('mousemove', function(event, _) {\r\n      tooltip.style('left', event.pageX - 246)\r\n      tooltip.style('top', event.pageY + 5)\r\n    })\r\n    .on('mouseleave', function() { return tooltip.style(\"visibility\", \"hidden\") })\r\n    .attr(\"d\", d3.ribbonArrow().radius(innerRadius))\r\n    .style(\"fill\", function(d){ return(colors[d.source.index]) }) // colors depend on the source group\r\n    .style(\"stroke\", \"black\")\r\n    .attr(\"opacity\", 0.5)\r\n\r\n  // add the groups on the outer part of the circle\r\n  svg.datum(res)\r\n    .append(\"g\")\r\n    .attr(\"id\", \"groups\")\r\n    .selectAll(\"g\")\r\n    .data(function(d) { return d.groups; })\r\n    .enter()\r\n    .append(\"g\")\r\n    .attr(\"class\", \"group\")\r\n    .append(\"path\")\r\n      .style(\"fill\", function(_,i){ return colors[i] })\r\n      .style(\"stroke\", \"black\")\r\n      .attr(\"d\", d3.arc()\r\n        .innerRadius(innerRadius)\r\n        .outerRadius(outerRadius)\r\n      )\r\n      .on(\"mouseover\", function(_, d) {\r\n        highlightGroup(d, links)\r\n      })\r\n      .on(\"mouseleave\", function() {\r\n        unhighlightGroup(links)\r\n      })\r\n\r\n  // add the label of groups\r\n  svg.datum(res)\r\n    .append(\"g\")\r\n    .attr(\"id\", \"labels\")\r\n    .selectAll(\"text\")\r\n    .data(function(d) { return d.groups; })\r\n    .enter()\r\n    .append(\"g\")\r\n    .attr(\"transform\", function(d) { return \"rotate(\" + (d.startAngle * 180 / Math.PI - 90) + \") translate(\" + outerRadius + \",0)\"; })  // TODO : Revoir valeur\r\n    .append(\"text\")\r\n    .attr(\"x\", 8)\r\n    .attr(\"dy\", \".25em\")\r\n    .attr(\"transform\", function(d) { return d.startAngle > Math.PI ? \"rotate(180) translate(-16)\" : null; })\r\n    .style(\"text-anchor\", function(d) { return d.startAngle > Math.PI ? \"end\" : null; })\r\n    .style(\"fill\", function(_, i){ return(colors[i]) })\r\n    .style(\"font-weight\", \"bold\")\r\n    .style(\"font-size\", 12)\r\n    .text(function(d) { return preproc.REGION_NAME[d.index] })\r\n}\r\n\r\nfunction highlightGroup(eventData, links) {\r\n  links\r\n    .filter(function(d) { return d.source.index != eventData.index })\r\n    .attr(\"opacity\", 0.1)\r\n}\r\n\r\nfunction unhighlightGroup(links) {\r\n  links.attr(\"opacity\", 0.5)\r\n}\r\n\r\nexport function rebuild(div, data, startDate, endDate) {\r\n  div.select('#tab-3-chord-diagram')\r\n    .select('svg')\r\n    .remove()\r\n\r\n  build(div, data, startDate, endDate)\r\n}","import * as onglet1 from './scripts/onglet1.js'\r\nimport * as onglet3 from './scripts/onglet3.js'\r\nimport * as chord from './scripts/chord.js'\r\n\r\nlet chordData\r\n\r\n(function (d3) {\r\n    d3.csv('./TRIP_STACK_HALF_MONTH.csv').then (function(stackData) {\r\n        onglet1.build(d3.select('#tab-1-content'), stackData)\r\n    \r\n        d3.csv('./TRIP_CHORD.csv').then(function(data) {\r\n            chordData = data\r\n            chord.build(d3.select('#tab-3-content'), data, \"2010-01-01\", \"2023-01-01\")\r\n    \r\n            time_graph(stackData)\r\n        })\r\n    \r\n        onglet3.buildHeatmap(d3.select('#tab-3-content'), \"2010-01-01\", \"2023-01-01\")\r\n    })\r\n\r\n})(d3)\r\n\r\n$('.tab-button').click(function () {\r\n    if (!$(this).hasClass('tab-button-active')) {\r\n        const tab = $(this).data('tab')\r\n\r\n        d3.select(\".visible-tips\").style(\"display\", \"none\")\r\n        d3.select(\".visible-tips\").classed(\"visible-tips\", false)\r\n        d3.select(`#tab-${tab}-tips`).style(\"display\", \"block\").classed(\"visible-tips\", true)\r\n    \r\n        $('button.tab-button').removeClass('tab-button-active')\r\n        $(this).addClass('tab-button-active')\r\n    \r\n        $('.tab-content').removeClass('visible-tab')\r\n        $(`.tab-content#tab-${tab}-content`).addClass('visible-tab')\r\n    }\r\n})\r\n\r\nfunction time_graph(stackData) {\r\n    const data = stackData.map(d => {\r\n        return { \r\n            date: d3.timeParse(\"%Y-%m-%d\")(d.date),\r\n            traffic: +d.Merchant\r\n            + +d.Barges\r\n            + +d.Other\r\n            + +d.Tugs\r\n            + +d.Tanker\r\n            + +d.Fishing\r\n            + +d.PleasureCrafts\r\n            + +d.Excursion\r\n        }\r\n    })\r\n    const ndx = crossfilter(data)\r\n\r\n    const vesselTraffic = ndx.dimension(d => d3.timeMonth(d.date))\r\n    const vesselTraffics = vesselTraffic.group().reduceSum(d => d.traffic)\r\n    \r\n    const minDate = vesselTraffic.bottom(1)[0].date\r\n    const maxDate = vesselTraffic.top(1)[0].date\r\n\r\n    const timeScale = d3.scaleTime()\r\n    .domain([minDate, maxDate])\r\n    .rangeRound([0, 950])\r\n\r\n    const vesselTrafficChart = new dc.BarChart('#tab-3-content .traffic-chart')\r\n    .width(950)\r\n    .height(125)\r\n    .margins({top: 10, right: 50, bottom: 30, left: 30})\r\n    .dimension(vesselTraffic)\r\n    .group(vesselTraffics)\r\n    .round(d3.timeMonth)\r\n    .x(timeScale)\r\n    .brushOn(true)\r\n    .elasticY(true)\r\n\r\n    vesselTrafficChart.yAxis().ticks(5)\r\n\r\n    vesselTrafficChart.render()\r\n\r\n    vesselTrafficChart.on('preRedraw', () => {\r\n        const selection = d3.select('#tab-3-content .traffic-chart g.brush rect.selection')\r\n        const x = selection.attr('x')\r\n        const width = selection.attr('width')\r\n        let startString\r\n        let endString\r\n        if (x == null || width == null) {\r\n            startString = minDate.toISOString().split('T')[0]\r\n            endString = maxDate.toISOString().split('T')[0]\r\n        } else {\r\n            const start = timeScale.invert(x)\r\n            const end = timeScale.invert(+x + +width)\r\n            startString = start.toISOString().split('T')[0]\r\n            endString = end.toISOString().split('T')[0]\r\n        }\r\n        chord.rebuild(d3.select('#tab-3-content'), chordData, startString, endString)\r\n        onglet3.rebuild(d3.select('#tab-3-content'), startString, endString)\r\n    })\r\n}"]}