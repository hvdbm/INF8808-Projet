{"version":3,"sources":["scripts/vesselTypeClasses.js","scripts/onglet1.js","scripts/preprocess.js","scripts/onglet3.js","scripts/chord.js","index.js"],"names":["vesselTypeClasses","build","div","bounds","d3","select","node","getBoundingClientRect","margin","top","right","bottom","left","width","height","svg","append","attr","csv","d","date","timeParse","Other","Tugs","Fishing","Barges","Tanker","PleasureCrafts","Excursion","Merchant","then","data","keys","columns","slice","color","scaleOrdinal","domain","range","schemeSet2","stackedData","stack","x","scaleTime","extent","call","axisBottom","ticks","text","y","scaleLinear","axisLeft","areaChart","area","y0","y1","selectAll","enter","key","style","highlight","noHighlight","size","sort","_","i","on","GLOBAL_VESSEL_TYPE","REGION_NAME","REGION_COLOR","REGION_NAME_ALT","findGlobalVesselType","vesselType","includes","clean","cleanData","forEach","element","push","substring","chordMatrix","departureDate","arrivalDate","matrix","Array","length","index","departureRegion","arrivalRegion","j","filter","map","value","count","reduce","partialSum","v","Number","rebuild","startDate","endDate","remove","buildHeatmap","window","innerWidth","myGroups","preproc","myVars","scaleBand","padding","myColor","transformData","heatmapMap","line","keyStart","keyStop","has","set","current","get","p","max","from","values","Region","Type","transformedData","rectSelect","rectUnselect","bandwidth","initLegend","drawLegend","Map","region","type","toFixed","colorScale","defs","linearGradient","tick","nodes","offset","join","fill","scale","axis","axisRight","chordWidth","outerRadius","innerRadius","colors","tooltip","res","chord","padAngle","sortSubgroups","descending","links","datum","source","target","subindex","event","pageX","pageY","ribbon","radius","groups","arc","console","log","highlightGroup","unhighlightGroup","startAngle","Math","PI","onglet1","chordData","onglet3","start","property","end","$","click","hasClass","tab","classed","removeClass","addClass"],"mappings":";;AKAA;;AACA;;AACA;AJFA,ADAO,SAASA,iBAAT,GAA6B;AIApC,ADAA,ADAO,AFCH,IEDSmE,KFCF,CACH,QADG,EAEH,EEHuB,GAAG,CAAC,KFCxB,EAGH,CEJ0B,EAAW,MFClC,EAIH,GEL0B,EAAwB,KFC/C,EAKH,EEN0B,EAAmC,GFC1D,EAMH,KEP0B,EAA+C,OAA/C,EAAwD,AFC/E,EAOH,QAPG,EAQH,KET0B,CFCvB,CEDkG,CFUrG,OEV0B,AFCvB,CAAP,CEDmH,MAArF,CAA3B;ADEP,ADUC;ACTM,ACFA,IAAMC,KDEGnE,KAAT,CAAeC,ACFE,GDEjB,ACFoB,CAAC,CDED,OCFA,EAAW,SAAX,EAAsB,qBAAtB,EAA6C,cAA7C,EAA6D,WAA7D,EAA0E,SAA1E,EAAqF,QAArF,EAA+F,qBAA/F,EAAsH,qBAAtH,CAApB;ADGL;AIAF,AJCE,ACHK,CGEN,GHFYmE,EDGLlE,KIDGC,CJCG,CIDb,EAAc,AJCEA,CCHQ,CDGN,CAACC,CCHQ,CAAC,IDGZ,CAAU,ICHC,EAAY,SAAZ,EAAuB,IDGlC,EAAiCC,GCHtB,CDGX,CCH6C,EDGLC,OCH7B,EAA6C,SAA7C,EAAwD,CDGnE,EAAf,MCH0B,EAAmE,SAAnE,EAA8E,SAA9E,EAAyF,SAAzF,CAArB;AGGHyK,AJCF,EIDEA,IJCExK,GIDK,CAACP,EJCA,GIDR,AJCW,CIDGG,EAAE,CAACC,MAAH,CAAU,gBAAV,CAAd;AAEA,ADLJ,AHIgBI,AEJT,ADCA,IDGSA,ACHH6D,EGIL2G,CJDW,EAAE,AEJL/E,EFID,IICX,CFLG,CAAiBhG,EDCI,CCDrB,EAAsBiG,ADCE,CAAC,QCDzB,ADCwB,ECDSC,ADCE,OCDnC,EAA0C,ADClB,EAAsB,qBAAtB,EAA6C,cAA7C,EAA6D,WAA7D,EAA0E,SAA1E,EAAqF,QAArF,EAA+F,oBAA/F,EAAqH,qBAArH,CAAxB;AGKHhG,ADLJ,AHGyBM,AEHvBR,EEKEE,AFLFF,EEKI,AJFmBQ,CIElBQ,AFLF,CAACb,EEKF,CAAO,AJFmB,EAAE,CEH9B,CAAW,CFGE,aIEX,EAA2ByB,AFL7B,EACGzB,EEID,CAAgC,GFLlC,CACU,KADV,CEK2C0B,CFHxCsE,GEG+B,EAAe,CFLjD;AEMM4E,ADLR,AHEqCtK,AECnC2F,EAAAA,EEEM2E,AJH6BtK,MAAM,EAAE,CIG5B,CJHF,AECD,CAACT,CEEK6B,EFFN,EEEN,AFFYoE,SAAN,EAAiBC,OAAjB,CAAZ;AEGMqD,ADLR,AHCiD7I,AEEhD,ADHD,ECKA,EEAQ6I,AJJyC7I,IAAI,CIIxC,AHLJ2D,CGKKtE,AJJyC,KII/C,CAAYG,EAAE,CAACC,MAAH,CAAU,GHL9B,CAA8BmE,UAA9B,EGKoB,AHLsB,CGKlC,EAAyCzC,IAAzC,EAA+C,YAA/C,EAA6D,YAA7D;AACH,ADLE,AHAQ,ACAb,GGEE,AJFF,GCAI,CAAC,EEAS9B,KAAT,CAAeC,GAAf,EAAoB6B,IAApB,CFAD,CEA2BoE,CFAN,QEApB,EAAqCC,MFAtC,CEAC,CFAqC,CEAS,YFA/C,EAAoD,eAApD,EAAoE,eAApE,EAAoF,WAApF,EAAgG,qBAAhG,EAAsH,wBAAtH,EAAgJ,qBAAhJ,EAAuK,oBAAvK,EAA4L,sBAA5L,EAAmN,aAAnN,EAAiO,WAAjO,EAA6O,eAA7O,EAA6P,mBAA7P,EAAkR3B,QAAlR,CAA2RD,UAA3R,CAAJ,EAA4S;AGO1S0G,ADNF,AHDA,ACCE,EGMAA,IDNE/B,AHAJtI,GIMS,CAACyF,CJNL,ACAI,GDADnG,EGAM,GAAGoG,AFAf,CDAY,CAAC1F,CIMb,CAAqBT,EAAE,ADNF,CCMGC,ADNFmG,AHAhB,GAAehG,GIMA,CAAU,EJNJ,CGAZ,AHAaI,GGAO,CAArC,AHAQ,GAA6BJ,MIMd,AJNoB,CIMzC,AJN0CE,EIMQ,GJPpD,SIOE,EAAgE,YAAhE;AAEAN,ADNF,AHHA,AEKK,ADHJ,EGOCA,CHTF,CGSI,CAACC,CDNDG,AHDJM,GEGcwF,ADHP,EGOL,CAAU,ADNF,AHDJ,CCAK,CAAC,CECC,AHDJ,MAAM9F,AEGV,CAAsBN,GAAtB,EFHgB,AEGWiG,CFHV1F,GAAb,GAAmBD,CCAjB,CCGN,CDH8BiE,CCGQ2B,EFHT,CAACzF,IEG9B,ADHM,CAAiC6D,CDF5C,AEKoD,CFR3B,CAOzB,CIKE,EAAkDN,EAAlD,CAAqD,CHP5C,CAAJ,EAAkD,GGOvD,EAA8D,YAAW;AACrE,ADNJzD,ADGF,ADJE,IECAA,EDGIqD,CCHD,CCMOqH,CDNLhC,CDGG,CDJD,EGOQ,AFHJ,GEGO/I,EAAE,CAACC,ADNN,CDGCkG,ECHA,AFDhB,GGOkB,CAAU,AFHN,CCJX,ADIYC,UAAzB,CAFoD,CAGpD,QEEoB,EAAiC4E,QAAjC,CAA0C,OAA1C,CAAd;AACA,ADNJ1K,AHAF,ACDC,GAFM,CEGLA,EHAEK,EIMQsK,CDNL,AHAA,ACDA,EGOQ,ADNNlC,CHACjJ,CCDC,CGOOE,AHPN,CDCC,CIMO,AJNNC,CIMOA,IDNF,CHAT,CIMQ,AJNG,CIMO,ADNR,CFDT,EAAc,CEDZ,eCQK,CJNR,CIMuC+K,CJLhDpK,MADS,CIMQ,AJLV,CIKkD,IJNhD,ACDC,EDGRC,ACHuD,CGOxC,CAAZ,EJNI,CAEF,OAFE,EAEOJ,ACHN,EAA+D,GDGpD,GAAGL,MAAM,CAACI,GCHrB,CDGM,CCH2E,EDGrDJ,MAAM,CAACE,KAFpC,EAGPO,ACJQ,EAAmG,EDCpG,CAGF,QAHE,CCDC,CDIOH,CCJ0G,KDIpG,GAAGN,MAAM,CAACC,GAAhB,GAAsBD,MAAM,CAACG,CCJpC,EAAgJ,GDCjJ,EAITK,MAJS,CAIF,ECLG,CDCD,CCDiK,CDMxKC,IALO,CAKF,KCNG,EAA6K,IDC9K,EAMF,eAAeT,MAAM,CAACI,GCPnB,CDOH,CCPiN,EDOpL,GAA7B,GAAmCJ,ACPhC,EAAwN,IDOlL,CAACC,GAA1C,GAAgD,ECP7C,CDCD,CAAV,ACDkP,SAAvO,EAAkP,SAAlP,EAA6PgE,QAA7P,CAAsQD,UAAtQ,CAAJ,EAAuR;AGSxRiG,ADPJ9J,AHOFP,AEJA,ADJE,EDQFA,EIAMqK,ADPJ9J,AHOA,CAACO,CEJGV,EFIN,CAAO,CGPC,CCOK,AHRJ,CGQKkK,ADPJvB,ADGE,GEIN,AFJS,CEIGgC,IHRhB,CGQI,CDPc,CCOKE,EDPJ,CCOf,GDVO,SHUb,EAAsC,UAASlK,CAAT,EAAW;AIC3CsI,ADPJ7I,AHOE,AELYH,ADHf,GAFM,CGUDgJ,ADPJ7I,ADEcH,GAAG,CCFb,CCOK,AFLU,ADHd,CGQKyF,ADPJiD,CHOG,AELI,EDHJ,CAAC,GGQN,CAAc/I,EAAE,ADPJ,CCOKC,CHRZ,CECQ,CFDG,GGQF,CAAU,YHRnB,EAA6B,EGQpB,CAAd,EAA2C4K,SAA3C,CHRK,CGQiDE,CHRH,IGQnD,EAA6DE,GAA7D,MHRK,EAA+D,iBAA/D,EAAkF,kBAAlF,EAAsG,oBAAtG,EAA4H,gBAA5H,EAA8I,kBAA9I,EAAkK,eAAlK,EAAmL,oBAAnL,EAAyM,cAAzM,EAAyN,oBAAzN,EAA+O,6BAA/O,EAA8Q,iBAA9Q,EAAiS,gBAAjS,EAAmT5G,QAAnT,CAA4TD,UAA5T,CAAJ,EAA6U;AGS9U0G,ADZO,AHYP9J,AENmBV,ADFvB,GEJF,CCYMwK,AFNmBxK,EFMnBU,GENwB,CFMpB,CIAG,AFNmB,ADFvB,CGQK8E,AJAD9F,AENE,EFMA,CAACiB,IIAV,CAAgBjB,CHRpB,CGQsB,CAACC,CJAZ,CAAa,IIAJ,CAAU,KJAnB,EAAyBc,CAAC,CAACC,IAA3B,CADF,EICW,CAAhB,EAA6C+J,KAA7C,EAAoDE,GAApD;AACH,ADbH,AHaM/J,AEP6BX,ADDlC,GGCC,AHHK,CCG4BA,ECFR,AHSrBW,GCRC,CCCkC,CFO9B,CEPgC,CFO7BH,ACRH,CDQI,AEPA,ADDH,CDQIG,KAFL,mBCNA,EAA4B,aAA5B,EAA2C,aAA3C,EAA0DmD,QAA1D,CAAmED,UAAnE,CAAJ,EAAoF;AGU5F,ADVC3D,AHSMU,AERyCX,ADA7C,CGXJ,CDUEC,CCUCT,CFT8CQ,CEXjD,CJmBQW,CGTD,CDC8C,ECD3C4H,AHSE,AER2C,CDA5C,CDQIhI,CAAC,CAACI,IAHJ,EGNO,GAAGf,KFCnB,CEDyB,CAACI,IAApB,GAA2BJ,MAAM,CAACE,KAL1C;AAAA,AHeMc,AETS,ADCd,GCDD,ADDO,GECPV,AHSMU,GCRC,GEDD,CHSO,ACRH,CAAC,CEDF2H,AHSOhI,CAAC,CAACK,OAJP,CGLQ,GAAGhB,KFCZ,CEDkB,CAACC,AFCG,GEDvB,GAA0BD,MAAM,CAACG,MAN1C,AFOU,EAA2C,uCAA3C,EAAmF,gBAAnF,EAAoG,mBAApG,EAAwH,wBAAxH,EAAiJ,mBAAjJ,EAAqK,uBAArK,EAA6L,uBAA7L,EAAqN,eAArN,EAAqO,eAArO,EAAqP,gBAArP,EAAuQ8D,QAAvQ,CAAgRD,UAAhR,CAAH,EAAgS;AGUzS8G,ADTE,AHQM7J,AEVN,ADEE,CGSH,CAAC,IDTM2H,AHQA3H,AETJZ,KAAK,ADCE,CDQG,EAAGM,AETL2C,CEUX,AJDiB,CIClB,AJDmBrC,CICF8J,ADTE,CDDH,CDCZ,CEAkB1K,CDDHL,CEUnB,AJNa,CIMU,EDTI,EDDF,CCCG,ADDFI,GCCxB,CDDU,GEUuB,AFVFJ,MAAM,CAACE,KADtC;AEYE,ADTF,AHQMgB,AEXN,ADGC,GAFM,GGWD,ADTA2H,AHQA3H,AETJZ,CEUKwK,CAAC,CAAC,AHTF,GDQK,AETJ,CEUA,AHTG,CGSJ,AJDQnK,ACRH,CGSGqK,AJDC,AETL1H,CFSMpC,CGRA,EDDF,ADCJ,CEAS0H,CFAD,CDER,AEHO5I,CEUX,CAAiB,IFVA,CAACC,ECCM,AFApB,CCDA,CDCoB,CEAC,CDDDD,CCC/B,CAZmD,CAcnD,GDHqC,CAACG,CEU/B,CAAL,EAA4C,AHTnC,ECHX,ADG8C,CCPM,CAQpD,SDDW,EAAgD,YAAhD,EAA8D,eAA9D,EAA+E8D,QAA/E,CAAwFD,UAAxF,CAAJ,EAAyG;AGU1G,AJDA7C,ACRJ,MDQIA,EICM8J,GAAG,AHTN,GGSSH,CAAC,CAAC,CHTlB,GGSiB,AJDC,CICF,CAAQvJ,AJDJZ,CAAC,CAACQ,EICN,CAAa,KAAb,CAAZ,KJRK;AIULvB,ADTN,AHOMwB,AERN,ADAC,GAFM,CGYDxB,EAAE,ADTFW,AHOAa,AERAb,CEUGV,EDTA,ADDA,ADAF,GECKH,ADDAA,CEUN,CAAU,CDTD,AHOA,AERA,CCCCG,ADDAA,CFQEc,CAAC,CAACS,GGPR,ADDA,CCCW,ADDA,KFAZ,CIUL,EAA2B+B,KAA3B,CAAiC,EFV3B,EACX3C,ICAW,CCSN,CDRLA,ADFW,CEUsC,AFT1C,KCAI,ADDA,CEUN,ADRE,CDALC,ICDS,ADDA,CAEJ,CCCLA,IAFS,CAEJ,CDHI,EAEKJ,ICDL,CDCU,CCCLA,EDDQL,GCCH,GAAGA,ADDM,CAACI,IAAf,CCCc,CAACA,CDDOJ,GCCtB,GAAsBA,ADDM,CAACE,KCCD,ADD5B,CCC6BA,EDDQ,EAF1C,CCCA,CDETO,CCCAA,GDJS,CCCA,ADEJ,CCCA,ODJI,CCCA,CDEMH,CCCAA,KDDM,CCCA,EDDGN,CCCAA,KDDM,CCCA,ADDCC,CCCAA,EDDhB,CCCA,EDDsBD,CCCAA,KDDM,CCCA,ADDCG,CCCAA,KDJnC,CCCA,CDGXK,CCCAA,KDLW,CCCA,ADGJ,CCCA,EDLI,CCCA,CDITC,CCCAA,GDNS,CCCA,ADIJ,CCCA,UDNI,CCCA,EAKS,gBAAgBT,GDDHA,GCCS,CAACI,EDDJ,CAACA,CCCJ,GAAYwI,ADNrC,WCMS,GDD4B5I,CCCe,GAA3C,EDDkC,CAACC,CCCeD,EDN3D,ICMiE,CAACC,EDN9E,CCMuE,ADfnB,CAgBpD,ECDkF2I,WAA7D,IAA4E,GALrF,CAAZ,CAfmD,CAsBnD;ACGMhJ,AJFAyB,ACRJ,IGUIzB,EAAE,AJFFyB,CIEGxB,IHVA,EGUH,CAAU,AJFF,EAAGc,CAAC,CAACU,ACRjB,WGUI,EAA2B6J,OAA3B,CAAmC,cAAnC,EAAmD,KAAnD;AACAtL,ADHN,AHTW,AEQX,ADNC,IGUKA,CJZF,CIYI,ADHF+E,ADDAsB,CEIGpG,KDHG,CCGN,CFJQ,CCCCqG,EDDEA,KCCK,CAAC1B,CDDC,CAACb,IEIDsH,GAAlB,EDHS,CAAoB1J,IAApB,EAA0BoE,EDDzC,CEIoCxC,KAA9B,CAAoC,ADH3B,EAAqCyC,OCG9C,ADHS,CAAf,CCGqD,OAA/C,EAAwDsF,OAAxD,CAAgE,cAAhE,EAAgF,IAAhF;AAEAJ,ADHN,AHAC,AEFD,ADND,GDJC,CIeMA,CAAC,AJHJxJ,CIGK,ADHFwH,ADFA3C,GFVN,CAYS,EGAG,ADFA,GCEGD,ADFAA,KFEG3E,EGAI,ADFA,CCECsC,ADFAD,CFEd,CIGF,CAAD,AJHkB,CIGKuH,OFL7B,CCEA,ADpBoD,CAoBpD,EEGM,CAAmC,mBAAnC;AACAL,ADFN,AHDE,IIGIA,CAAC,CAAC,ADFF/B,EHDEvH,EIGD,CAAD,CAAQ4J,AJHF,CGCC,EHDE7J,CGCC3B,EAAE,CAACC,AHDA,CIGb,AJHc4B,CIGG,IDFP,CAAU,CHDX,CAAaC,KAAb,CAAmB,CAAnB,CAAb,CADsB,CACc,EIGhC,YDFU,CAAhB,CA3BmD,CA6BnD;ACEMoJ,AFLN,ADPK,IGYCA,CAAC,CAAC,AFLF5I,CAAC,EDPOgC,CCOJtE,EAAE,CAACwG,CDPR,CAAe7E,IAAf,CGYE,CAAD,AHZoB,CGYF4J,AFLd,GACPrJ,KADO,CACD,CAAE,CEIL,AFJG,CEI2B,CFJtBzB,KAAL,CADC,EAEPwB,IEGG,EFLI,CAEAoE,QAFA,EAGPI,OAHO,CAGC,IAHD,CAAV;AEMMyE,ADFN,AHFE,AEGFvK,ADXA,ECWAA,EECMuK,CAAC,AFDJ,CCDG9B,ADCFxI,ADXE2D,EDQExC,CGEC,GAAG/B,ADCZ,CFHa,AEGF,CCDG,CAACqJ,AFVA,CDQCrJ,AEGhB,EFHkB,AEIfa,ADZe,CDQCmB,CGEP,AFVZ,ECWA,CCAGsH,ADCK,QCFI,AHFI,CGGJ,CCCgB+B,CJHvBpJ,AEEL,EECO,ADFK,EACU,EHHN,CACJ,SIGN,CAAqCuJ,QAArC,AFA+B9K,CEAe,KFDpD,QECM,AFCH+B,IAFH,CAEQzC,EAAE,CAAC0C,GFLK,EAEXR,KAFW,AEKR,CFHGlC,AEGWsC,CAAd,CFHK,AECb,CFDcH,CEIXiB,SFNa,AEGhB,CFHE,AEMW,MAHb,EAIGvC,IAJH,CAIQ,WAJR,EAIqB,8BAJrB,EA1BoD,CAgCpD;AEJG,ADHS,AHEV,ACXFc,EAAAA,CEWG4H,GFXC,CAAC/E,CDWGpC,MCXR,CAAa,CESD,CAEKpC,EAAE,AHAA,CGACwJ,EHAExJ,EAAE,CAACqC,ACXZoC,KESD,AHEU,EGCnBM,AFZiB,CDYfnD,CCZmB,GDWF,CGFV,AHGFA,CGHV,CA9BmD,CAmCnD,CHHsB,EAEnBD,IAFmB,CAApB,CAPsB,CAWtB;AIFH,AFIC,ADhBE,CGFJ,KFkBQkB,CAAC,CDhBD4B,ECgBIzE,EAAE,CAACwG,EDhBA,CAAC,MCgBJ,EDhBG,CCiBVtE,ADjBG,IAAqB,CCgBjB,ADhBJ,CCiBG,CAAExB,EDhBL+D,ICgBG,EAAU,CAAV,ADhBI,CCeH,ADfI,ECiBXxC,KDjBU,CCeH,ADfJ,CCiBIsE,GDjBgB,CAApB,ECeI,CDdJ9B,CCiBHgC,MDjBU,CCcH,ADdI,CCiBH,IAHD,CAAV,WDda,CAAP,GAA6B,EAF7B,IAGAhC,OAAO,CAAC,gBAAD,CAAP,GAA4B,CAAC,cAAD,CAHhC,EAGkD;AEWpD,AHCE,AEKF9D,ADhBI4D,ECgBJ5D,GAAG,CCNG8I,ADMF7I,ADhBA2D,EDWIjC,CAAC,EGDE,CHCCtC,AEKZ,CAAW,CCNGW,AHCA,CAAC4B,ACXF,CCgBb,ADhBcmC,CEUG,CAChBgF,ADMEjH,EDjBC,CAAe,CCgBnB,CCNc,ADONzC,CCNDoJ,AHAK,CEMF,CAACrG,CCPG,AHEXd,EGAFrB,IHDW,CACFZ,AEKF,CCPM,ADOM6C,CCLZ,AHAI,AEKJ,CFLKL,AEIb,ECNc,AD/BsC,CAwCpD,CCNC3B,EHDS,CAAUc,CGFN,CAGR,EHDI,EGFI,AHEY,EGCd,OAHE,CHEYZ,CGEzBqC,AHF0B,SGFb,CAIH,MAJG,EAKbzB,IALa,CAKR,UAASZ,CAAT,EAAY;AAAE,AHHO,ACXrB,WEcqBA,CAAP,CHHWA,CAAC,CAACC,IAAN,KCXLyD,OAAO,CAAC,cAAD,CAAP,CAAwBE,SAAxB,CAAkC,CAAlC,EAAoC,EAApC,CADH;AEeY,AHHJ,AEQ3B,ADlBM,GEQQ,EAMbtB,AHJS,CADE,AESNqD,EFPHxE,EGHW,GAObtB,AHNW,AESC,CFPJ,CAAE,CAAF,AEOOZ,EFPFS,AEOI,CCVJ,ADUKqC,CCHX,GHJC,CAFG,CAAV,CGDY,CFRW2B,CEgBtB5D,EDEa,ECVF,CAQN,ADGLqB,CDnB6B,CAAC,GCkBjB,CACP,CCXK,ADWJ,ECHO,KDGR,ECXK,ADWK,ECFhB4B,CFjB6B,CEQlB,AFVK,CEmBb,IDEG,CADO,CAAhB,MCVc,EASM,gBAA2BF,CAA3B,EAA8B;AAAA,AHLhDjD,ACXI,IDWJA,GAAG,CGKyBgJ,AHLxB/I,MGK4C,AHLhD,CAAW,GAAX,EACGC,EGIyB8I,EHL5B,CACQ,CCZclF,EEgB0B,KFhBnB,CAAC,EDW9B,EACqB,YCZQ,CAHZ,IDeqB/D,MAAjB,GAA0B,GAD/C,EAEG+B,IAFH,CAEQzC,EAAE,CAAC0C,UAAH,CAAcJ,CAAd,EAAiBK,KAAjB,CAAuB,EAAvB,CAFR,EAfsB,CAmBtB;AGCgD,ADKlD,ADpBM,QEegCiH,GDK7BjD,GCLyC,QAAZiD,EDKtC,CAAuB7I,CAAvB,ECLkD,ADKxB8D,EDpBEJ,OAAO,CAAC,GCoBpC,EAAyCK,WAAzC,EAAsD,EDpBnB,CAJhB;AEoBfqE,AHDFxI,AEMA,ADpBI,IEeFwI,AHDFxI,GAAG,CAACC,AEMA2E,GCLK,ADKF,CCLGtF,EHDV,AEMU2G,CFNC,GGCT,CAAe,EHDjB,EACG/F,CEKiB,EAApB,ADpBsB4D,CDctB,CACQ,KCfqB,CAAC,ODc9B,EACuB,KADvB,EAEG5D,AChB0B,CAAP,CAA0B8D,EDchD,CAEQ,CGDN,EACC/B,AHFH,EAEanC,CChBS,CEepB,AFfwD,CEgBlD6F,AFhBc,EDctB,ACd6D,EDiB1DzF,ACjBmB,CALL,EEqBF,CAACmD,AHFhB,CAGQ,GAHR,EAGatD,KGDL,CAAoBiJ,AHCT,GAAC,EAHpB,CGEkC,CAACzE,AHEhCtC,IAJH,CGEQ,AHEA,CGHN,EAECW,IHHH,CGCE,CAEO,AHvBa,CA0BtB,MGLE,EAEgB2F,MAAM,CAACS,MAAM,CAACzE,KAAR,CAFtB;AAGAiE,ADIF,ADrBI,IEiBFA,IDIIxH,GCJG,CAAC1B,ADIA,GAAGc,CAAC,CAACuE,CCJb,CAAe,IDIJ,CAAS,KDrBGb,KCqBFoC,EDrBS,CAAC,CCqBX,EAAU,cCJ9B,EACCjE,AFlB6B,CANf,GEuBf,CACM0D,OAAO,CAACtC,WAAR,CAAoB2F,MAAM,CAACE,QAA3B,CADN,EAECtG,KAFD,CAEO,OAFP,EAEgB2F,MAAM,CAACS,MAAM,CAACE,QAAR,CAFtB;AAGAV,AHAF,AEEE,ADrBE,IEmBFA,IHAItG,CAAC,EGAE,CAAC5C,AHAAD,CEED6E,CFFG,CAAC/B,GGAX,CAAe,OHAP,AEEY,EDrBE2B,CDoBrBxC,CECuB4E,IAAI,CFFpB,AEEqB,ADrBA,CDoBrB,ACpBsB,CDoBrB,CAAD,EAAI,KGDZ,AHCQ,CADA,CGCPjE,CHCAV,GGFD,ADE4B,CCDtByH,ADCC,CFFC,CAED,ACrBsB,CDqBpBjJ,AC5BM,CC4BmCoE,ECDtC,CAACU,EHCN,EAAU,CGFjB,AHEO,CAFC,CAAV,CEE+D,IAAIqB,IAAI,CAAC,cAAD,CAArE;ACAA,AHCFlG,AEAC,ADrBG,IDqBJA,CEFa,CAAb,CFEG,CAACC,GGDKuI,GHCT,CAAW,GGDK,AHChB,ACrBc1E,CEoBGlB,CHEdd,IGFM,AHCT,CGDuB,AHEfzC,ACtBa,CAAC,CDsBZ,CAAC+C,MCtBU,CARJ,CD8BT,CGFC,AHEWF,CAAZ,CGF6B,CHEdF,KAAf,CAAqB,EGFpB,AHED,CGFN,AHCF,EA9BsB,CAiCtB;AGHC,ADEDhB,ADtBI,GECQ,CDqBZA,CCDCmC,EApBW,CAoBR,ADCA,CAACU,OAAL,CAAa,ECrBD,EAoBK,MDCJqC,ADtBUpC,ICsBN,ECDW,ADCP,CDtBS,CAAC,iBAAD,CATb;AE+Bf0E,AHEFxI,AEDE,ADtBE,IEqBFwI,AHEFxI,GAAG,CAACC,EEDIkG,CCDC,CAACvD,EHEV,CAAW,EGFT,CAAc,ADCA,GFChB,AEDmBsD,EFEhBhG,ACxBgB4D,CEqBjB,CDCqB,CCDCzE,ADCA,CFCxB,CGF0B,AHGlB,CGHmB8J,CFrBD,CAAC,GEqBH,CAASC,KAAT,CHExB,EGFyC,AHGlB,CEFA,ADtBG,CCsBP,ADhCF,CE+Bf,EHEF,AED4ClD,EFGzChG,EEH6C,CAAC,CFCjD,CAEQ,GAFR,EAEa,CAFb,EAGGA,IAHH,CAGQ,GAHR,EAGa,AEJmC,CFIlC,AEJZ,EFCF,EAIG+B,IAJH,CAIQ,mBAJR,EAKG/B,IALH,CAKQ,aALR,EAKuB,OALvB,EAlCsB,CAyCtB;AGREsI,ADCA,ADtBE,IEqBFA,MDCMpC,CCDC,CAACxD,KAAR,ADCa,CCDC,EDCEsD,GCDhB,CDCoB,CCDC7G,ADCA,ECDE,CAAC8J,EFrBA3F,GEqBH,CAAS6F,KAAT,EDCD,CCDkB,ADCtB,CCDhB,EDCuCnD,IAAI,CAAC,ADtBA,CAACpC,OAAO,CAAC,WCsBV,CAA3C,CDtBoD,CAAR,CAX7B;AEiChB,AHQD,AC7BI,GEFQ,EAwBXX,EAxBW,CAwBR,AHOEd,SAAS,AC7BFyB,GEFD,AH+BM9D,EGPA,CHOG,CAACC,AC7BF,CAAC,KD6BH,CAAW,CC7BT,EEsBS,AHOX,CAAlB;AGP+B,AHQ/B,AERE,ADlCe,OAAf,CD0CIqC,EERA,CCAgCkG,ADA/B5D,CFQG,EERA,CFQGvF,AERFgH,EFQI,CGR8B,AHQ7B/D,AERT,CCAuCM,ADA/BuD,GFQF,EGRyB,CAAc,AHSjDxE,CADU,CACR,AETE,CAAL,EAAwB,OCAY,AHSxBvB,CAAT,CGT6D,CHSjD,OGTqB,CAAP;AAA8C,AHS1D,AERfwE,ADrBH,GEJW,EAyBX1E,GDAG0E,CCzBQ,CAyBN,CDAC,CAAC0B,CCzBI,AHiCc3E,CAAC,CGRhBtC,AHQiBe,AERxB,CFQyB,AERjB+F,CCAC,AHQiBnF,CGRhBsI,GHQc,CAAOjJ,EGRxB,ADAP,EFQuB,AERL,CCACkJ,AHQJ,MGRR,CAAmBjB,WAAnB,CAzBC,EA0BX1F,KA1BW,CA0BL,MA1BK,EA0BG,UAASxC,CAAT,EAAW;AAAE,AHOe,AEPrC,ADrBP,GApBD,ED+Ce,EAEVmC,EAFU,CAEP,CGR6BgG,MAAM,CAACnI,CAAC,CAAC4I,AHQ7B5I,AERC8F,CFQV,EAAY,CERE,CAAC,CCAqB,CAAS3B,KAAV,CAAb,UDAR,CAAJ,CAAyBpD,KAAzB,CAA+B,CAA/B,EAAiC,CAAC,CAAlC,CADM;ACCsC,AHQxC,AEPd,ADpBR,GEPc,EA0BkD,IFnBzDyC,ID2BsB1B,CAAC,CAAC9B,CAAC,CAAC,CAAD,AEPhB8F,ADpBhB,CD2B8B,CAAR,EEPF,CAAC,oBAAD,CAFI;ACzBV,AHkCyB,AEN/B,ADpBT,GEmBItD,EHKY,EAGVJ,CGnCS,CA2BL,AHKM,CAGP,OGnCM,EA2BK,ADCF,CFOApC,CAAT,EAAY,GGnCN,EA4BXF,IA5BW,CA4BN,SA5BM,EA4BK,GA5BL,CAAd,CApCmD,CAkEnD;AHKsB,AEVE,SAAlB,IFUuBgC,CAAC,CAAC9B,CAAC,CAAC,CAAD,CAAF,CAAR;AGJtBJ,AHIuC,AELlC,ADpBA,EEqBLA,GAAG,AHCY,CGDX+I,AHCF,CA3CsB,AEmCpB,CFaF,CC3BY9E,EEqBd,CAAUwE,CDDC,ECCX,EACGxI,GFtBE,CAAqBe,EEqB1B,CACU,CFtBL,EEqBL,AFrBgCkD,EEuB7BhE,IAFH,CAEQ,IAFR,EAEc,AFvBT,EAA0CiE,MEqB/C,EAGG1B,GFxBE,EAAuD,IEqB5D,CAGa,GAHb,EAIGzB,IAJH,CAIQ,UAASZ,CAAT,EAAY;AAAE,ADJhB,ADpBN,MAAMgE,KEwBuBhE,CAAC,ADJlBmG,ADpBA,CEwBmBiD,EFxBhB,IEwBO,ADJH,ADpBAnF,GCoBGO,EDpBP,CCoBU,ADpBAvB,CCoBCmD,GAAJ,CAAQL,MDpBM,CAAC7B,CCoBf,CAAhB,IDpBS,CAAf;AEwBwC,AHGtCjC,AENIkE,GCDN,CHOElE,CGFCK,GDJG6D,ECDN,GAMGtG,AHCQ,CACRwC,CEPU,CAACqC,GCDd,CAMU,CDLJ,ECDN,AHOE,CACW,CGDV5E,ADNoB,CAAjB,GCDN,CAOQ,IHAN,EAECc,CGTH,EAOiB,CHAf,CAEMS,KGTR,EAQGxB,IHDD,EGPF,AHUGyC,CGFO,IHDR,EGPF,CHWGzC,CGFE2C,KATL,AHOE,CGES,AHED,MGXV,AHOE,EGEiB,AHGd1C,IALH,CAKQ,KGHkB+C,CAAT,CHFjB,CGE4BC,CAAX,AHGA,EGHa,QHGJ9C,CAAT,EAAY;AGHG,AHGD,AEV3BwE,ADrBN,OAAK,CCqBCA,GCOmC2D,ADPhC,ADrBAhE,CCqBC+B,CFU8B,EEVlC,CAAQH,ADrBA,CE4BiC,CAACjD,CAAD,AF5B9B,CE4BiB,AF5BlC,EAAoBqB,ECqBd,CFU8CnE,CAAC,AEV7BmG,CFU8B5D,AC/B7B,GD+BQ,AC/BLyB,GCqBtB,GDrB4B,CAACE,MAAnC,EAA2CC,KAAK,EAAhD,EAAoD;AE4BA,AHGO,AETtD,ADrBHH,GEkBF,CFlBEA,CE4BGxB,AHHH,EAMGA,GGbL,AFlBQ,CE4BG,AF5BF2B,CDyBP,CAMS,GC/BH,CAAN,EEkBF,AHOE,CCzBgB,CE4BG,AHGF,GC/BGF,IEkBtB,CFlBkB,CE6BbnE,AF7BuBmD,CD+BAjD,CAAT,EGbnB,AHa+B,CGFrB,GAXV,EAWef,CF7BwB,CE6BtB,AF7BuBiF,CE6BtBmF,GAAH,EF7BG,CE8BXnB,AF9BL,WE6Ba,CACIA,WADJ,EAERD,WAFQ,CAEIA,WAFJ,CAXf,EAeKlF,EAfL,CAeQ,WAfR,EAeqB,UAASgG,KAAT,EAAgBlG,CAAhB,EAAmB;AAClCyG,AHH2B,AC9BhC,IEiCKA,OAAO,CAACC,CHH0BvI,EGGlC,GHHuC,CAAChB,CAAC,CAACuC,GAAH,CAAZ,WGGLgD,OAAO,CAACtC,WAAR,CAAoB8F,KAAK,CAAC5E,KAA1B,CAAtB,eAA2D4E,KAAK,CAACtE,KAAjE;AACA+E,AHJiD,AETnD,ICaEA,CHVJ,EAOG1J,GEVG,CFGN,AEHO0E,CFUC,EEVE,CFGV,AEHWyB,EFUE/D,CGGK,ADbX,CCaY6G,ADbJ/C,EFGf,EAjDsB,CG2DJ,AHDlB,EGC0B0C,ADbnB,CAAL,EAAuB,ECaP,CAAd;AACD,ADbClE,ADpBNvB,EAAAA,CEeA,EAmBKF,EAnBL,CAmBQ,ADdFyB,GAAG,CAAC0B,CDpBC,CAACzC,CCoBN,CAAQuC,ICLd,CFfA,CEkCsB,AFlCF,CCoBd,EAAiB,ODpBF5B,EEkCY,aFlCb,EAAkBtB,CAAlB,EAAwB;AEmCtC2G,AHHJ,AEXM,ADpBNxG,IEkCIwG,AFlCJxG,ID+BMR,OC/BK,CAACgB,CD+BG,GGGK,AHHF,AEXFqC,CCcK4C,EFlCrB,CCoBoB,ADpBA,CCoBC,CCcD,CAAhB,EHHEjG,KC/Be4B,ID+BH,CAASrE,CAAT,CEXE,CFWU,AEXd,CAAuBe,IDpBnB,CCoBJ,CAA6B,ADpBTuD,CCoBpB,ADpBI,ECoB2B,ADpBL,CCoBM,CAAhC,CADK;ACgBlB,AHHDrF,AEXI,ADpBJ+E,GEaJ,EAnEmD,CA0FnD,AHLI/E,AC/BA+E,ED+BE,CAAC3B,GC/BG,CAACS,CAAD,CAAN,CAAUwB,CAAV,CD+BA,AEXYwB,CFWC,EC/BElF,CCoBC,CAAC,EDpBE,CAChB2D,ED8BH,EAAwB/B,EC/BT,CACL,ED8BV,CAA8B,OEXd,ADnBLxC,CCiBQ,ADjBT,CD8BV,CC9BiB,CD8BwB,EAAzC,EAD4B,CACkB;AEV1C,ADnBA,eAAOoE,ICmBE,WDnBa,KAAKpE,CAAC,CAAC,kBAAD,CAAD,CAAsBe,KAAtB,CAA4B,CAA5B,EAA8B,CAAC,CAA/B,CAApB,IACFsD,aAAa,KAAKrE,CAAC,CAAC,gBAAD,CAAD,CAAoBe,KAApB,CAA0B,CAA1B,EAA4B,CAAC,CAA7B,CADhB,IAEF+C,aAAa,IAAI9D,CAAC,CAAC,gBAAD,CAFhB,IAGF+D,WAAW,IAAI/D,CAAC,CAAC,cAAD,CAHrB;AEmCRJ,AHLIX,AEdmB,ADZhB,EE+BPW,GAAG,CAAC+I,AHLA1J,CChCe,CDgCb,CAACC,AEdD,ADXCsF,EE8BP,CAAU6D,AFrCS,CAOR,EE8BX,AHLI,CAAU,CGMXxI,KHNeG,CGKlB,AHLI,ACzBQyE,CE+BF,CHNWjC,EGKrB,CF9BW,CEgCR1C,CHPC,CAAuB,EGK3B,CAEQ,IAFR,EAEc,AHPV,EAAkC,CAAlC,EAF4B,CAEU,EGK1C,EAGGuC,SAHH,CAGa,MAHb,EAIGzB,IAJH,CAIQ,UAASZ,CAAT,EAAY;AAAE,AHRnB,AEVE,ADhBM,KDuBT,CA3DsB,CAgEtB,AElBE,ICwByBA,CAAC,CAACoJ,ADlBpB,EDhBW3E,IEkCA,CFlCK,CAACC,KAAjB;AEkC6B,ADjBlC,ADjBK,GE8BX,EAKGpC,EF1CgB,EAQZqC,CE6BP,EDbYwB,CCmBTtG,EF3CgB,CAQL,GE6Bd,CAMU,ADnBS,GCanB,ADbsB2E,ECoBnB1E,CDpBsB,ADhBV8E,CCgBWwB,ECa1B,CAOQ,ADpBc,CAAQJ,KDhBhB,ECgBQ,ADhBKnB,CCgBrB,ADhBQ,EE6Bd,EAOqB,UAAS7E,CAAT,EAAY;AAAE,AFpCrB,WEoC4B,IFpCT8E,MAAM,CAACF,EEoCe5E,CAAC,CAAC0J,MFpClB,CAAN,GEoCsB,AFpCD5E,GEoCgB,GAAf,AFpCK,CAACD,CAAD,CEoCgB8E,AFpC9D,IEoCkE,CAACC,EAA1B,GAA+B,EAA5C,IAAkD,cAAlD,GAAmE3B,WAAnE,GAAiF,KAAxF;AAAgG,AHRjI,AEXI9B,ADjBQ,GE6Bd,EAOsI,EF5CnH,CDoCXzD,AEXFyD,CDjB2D,CAR9C,CAAf,KCyBS,CAACzB,EFWK,GAAG,AEXhB,IAAiB,CAAjB,IFWEhC,WAAc,GAAU;AGChC,AHAIzD,AEXEuF,ADjBH,GEoCA3E,EF9CD,CDsCEZ,EAAE,AEXAuF,CCWN,AHAOnC,CGQG,CDnBD,CAAC6D,GAAJ,CCWN,ADXcF,ECoBXlG,AHTC,CAAa,GGAjB,CASQ,ADpBF,EAAiBqG,CCWvB,EASa,AHTT,CGAJ,CHA4B3D,CGUzB1C,EDrBG,ECWN,AHAI,CGUI,AHV0B,IGAlC,EAUc,GHVV,EAAyC,CAAzC,CGAJ,EAWGA,IAXH,CAWQ,WAXR,EAWqB,UAASE,CAAT,EAAY;AAAE,AHVhC,AEXE,ADjBJ,GAZD,EDsCE,CAjEsB,CAqEtB,IGQwCA,CAAC,CAAC0J,UAAF,GAAeC,IAAI,CAACC,EAApB,GAAyB,4BAAzB,GAAwD,IAA/D;AAAsE,ADpBtG,ADhBH,GEyBA,EAYGpH,AD9CD,IDSKwB,CEyBP,CAYS,IFrCT,SEyBA,EAYwB,UAAShE,CAAT,EAAY;AAAE,ADnBpC,ADjBH,QCiBSqG,CAAC,ECmBoCrG,CAAC,ADnBlC,CCmBmC0J,CDnB7C,SCmB2C,GAAeC,IAAI,CAACC,EAApB,GAAyB,KAAzB,GAAiC,IAAxC;AAA+C,AHRnF,AEVA,GCMF,EAaGpH,GHTKG,AEVF2D,ECMN,CAaS,ADnBA,CFUG,EEVA,CFUG,AEVb,ECMF,AHIE,EGSe,UAASzD,CAAT,EAAYC,CAAZ,EAAc;AAAE,AHR/BlD,AEVAqE,IFUArE,AEVAqE,GFUG,CAAC5B,CEVC,CAACkE,CCkBgC4B,GDlBtC,CAAW3D,ECkBiC,AHR5C,CGQ6C1B,AHR/B,AEVA,CCkB8B,ADlB7B0D,CCkBgB,KDlBpB,CFUX,CEVA,CFU0B,CEVD/C,OAAzB,CAAiC,UAACgB,KAAD,EAAW;ACkBM,AHRlD,AETE4B,GCIJ,EAcG7D,AHRE5B,CEVDyF,CAAC,CAAC1C,CFSJ,CGLF,AHMU9C,CGQD,CDlBL,CAAO,CFUG,CAAC+B,IAAL,EADR,EAEGN,CGPL,EAcwB,EHTtB,GAGGzC,CGRL,EAeG2C,GHVD,CAGU,CGRZ,CAeS,IHVP,EAIK1C,IAJL,CGLF,AHSY,EGMU,CHVpB,CGLF,CHSiBJ,CGOdmC,IAhBH,AHKE,CGWM,CHND/B,IALL,CAKU,GALV,CGWeE,CAAT,AHNS,EGMG,QHNM6C,CAAT,EAAWC,CAAX,EAAa;AGMR,AHNU,AEb1B,WCmBuByC,EHNU,KGMH,AHNQzC,AEb5B2B,CCmBqBxB,AHNQ,IAAEN,AEb1B,CAAC8D,GFa6B,GGMtB,AHNuB,AEdzC,CCoBsCzG,AHNJ,CGMK,AHNlB,CGMmBmE,KAAtB,CAAP;AAAqC,AHNJ,AEZjD,GCEN,EHKE,EAKuD,SEZ3CM,KAAK,CAACiC,IAFT;ACqBZ,AHZG,AENI,KFYC5G,IANL,CAMU,OANV,AENe2E,EFYI9B,GEZC,CFMpB,AENqB+B,EFahB5E,GEbU,CFMf,CAOU,EEboB,IAAEc,EFMhC,EAOoB+B,AEbgB,CAACuB,GFMrC,EAQKpE,CEdU,CAAD,EFMd,CAQU,AEdsC,IFMhD,EAQgB,CARhB,EASKA,IATL,CASU,IATV,EASgB,CAThB,EAUK0C,KAVL,CAUW,MAVX,EAUmB,UAASxC,CAAT,EAAW;AAAE,AEnBvB,OAAP,MFmBqCgB,KAAK,CAAChB,CAAD,CAAZ;AGIpC,AHJoD,KAVhD,EAWK+C,EGGAyG,AHdL,CAWQ,WAXR,EGcJ,AHHyB/G,CGGDsG,KAAxB,EAA+BL,CHd3B,EAYK3F,EGET,AHdI,CAYQ,CGE0B,WHdlC,EAYsBL,WAZtB;AGeFgG,AHDE9I,AElBE,ECmBJ8I,EHDE9I,GGCG,AHDA,CGEF2E,AHFGlC,EElBGoC,ICmBT,CACU,ADpBI,CAACC,CFkBb,CAAc,GElBP,ICoBU1E,ADpBK,CCoBd,EAAY,AHFpB,CElBwBY,CFkBI,GElBA,CAACsD,MAAtB,CAAD,GAAkC,GAAlC,IAAyCoC,GAA7C,EAAkD;ACoB9B,AHFtB,AEjBIA,KFkBD1F,GElBC0F,CFiBJ,CACQzF,CGCqBb,ADnBtB,CCmBuB,CAAC4I,CHDnB,AElBDnE,CFkBE7B,IGCgB,AHDrB,AElBQ,CCmBsBuB,ADnBrBO,CFiBjB,EAEGpC,EGA0B,ADnBlB,GFiBX,CGE+CyG,ADnBrB,EFoBvBlJ,EEpByBe,CCmBwB,CAACuD,EHFrD,AEjBgC,CFoBtB,AEpBuBD,ECmBX,IHFtB,AEjBW,CAAD,CFqBLpE,EErBuC,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","file":"INF8808-Projet.e31bb0bc.js","sourceRoot":"..","sourcesContent":["export function vesselTypeClasses() {\r\n    return [\r\n        \"Barges\",\r\n        \"Excursion\",\r\n        \"Fishing\",\r\n        \"Merchant\",\r\n        \"Other\",\r\n        \"PleasureCrafts\",\r\n        \"Tanker\",\r\n        \"Tugs\",\r\n        \"Other\"\r\n    ]\r\n}","import { vesselTypeClasses } from './vesselTypeClasses.js'\r\n\r\n// Source : https://d3-graph-gallery.com/graph/stackedarea_template.html\r\nexport function build(div) {\r\n  // set the dimensions and margins of the graph\r\n  const bounds = d3.select('#stacked-area-chart').node().getBoundingClientRect()\r\n  var margin = {top: 60, right: 230, bottom: 50, left: 70},\r\n  width = bounds.width - margin.left - margin.right,\r\n  height = 550 - margin.top - margin.bottom;\r\n\r\n  // append the svg object to the body of the page\r\n  var svg = div.select(\"#stacked-area-chart\")\r\n  .append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n  .append(\"g\")\r\n    .attr(\"transform\",\r\n          \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n  d3.csv('./TRIP_STACK_HALF_MONTH.csv', function(d){\r\n      return { \r\n        date : d3.timeParse(\"%Y-%m-%d\")(d.date),\r\n        Other : d.Other,\r\n        Tugs : d.Tugs,\r\n        Fishing : d.Fishing,\r\n        Barges : d.Barges,\r\n        Tanker : d.Tanker,\r\n        PleasureCrafts: d.PleasureCrafts,\r\n        Excursion : d.Excursion,\r\n        Merchant : d.Merchant,\r\n      }\r\n  }).then( function(data) {\r\n    const keys = data.columns.slice(1)  // List of Vessel Types = header of the csv files\r\n\r\n    const color = d3.scaleOrdinal()\r\n      .domain(vesselTypeClasses())\r\n      .range(d3.schemeSet2);\r\n\r\n    const stackedData = d3.stack()\r\n      .keys(keys)\r\n    (data)\r\n\r\n    // Add X axis\r\n    const x = d3.scaleTime()\r\n    .domain(d3.extent(data, d => d.date))\r\n    .range([ 0, width ]);\r\n    svg.append(\"g\")\r\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n      .call(d3.axisBottom(x).ticks(10))\r\n\r\n    // Add X axis label:\r\n    svg.append(\"text\")\r\n      .attr(\"text-anchor\", \"end\")\r\n      .attr(\"x\", width)\r\n      .attr(\"y\", height+40 )\r\n      .text(\"Temps\");\r\n\r\n    // Add Y axis\r\n    const y = d3.scaleLinear()\r\n      .domain([0, 12000])\r\n      .range([ height, 0 ]);\r\n    svg.append(\"g\")\r\n      .call(d3.axisLeft(y).ticks(15))\r\n\r\n    // Add Y axis label:\r\n    svg.append(\"text\")\r\n      .attr(\"text-anchor\", \"end\")\r\n      .attr(\"x\", 0)\r\n      .attr(\"y\", -20 )\r\n      .text(\"Nombre de navires\")\r\n      .attr(\"text-anchor\", \"start\")\r\n\r\n    // Area generator\r\n    const areaChart = svg.append('g')\r\n    const area = d3.area()\r\n      .x(function(d) { return x(d.data.date); })\r\n      .y0(function(d) { return y(d[0]); })\r\n      .y1(function(d) { return y(d[1]); })\r\n\r\n    // Show the areas\r\n    areaChart\r\n    .selectAll(\"mylayers\")\r\n    .data(stackedData)\r\n    .enter()\r\n    .append(\"path\")\r\n      .attr(\"class\", function(d) { return \"myArea \" + d.key })\r\n      .style(\"fill\", function(d) { return color(d.key); })\r\n      .attr(\"d\", area)\r\n\r\n    // What to do when one group is hovered\r\n    const highlight = function(d) {\r\n      d3.selectAll(\".myArea\").style(\"opacity\", .1)  // reduce opacity of all groups\r\n      d3.select(\".\"+d).style(\"opacity\", 1)  // expect the one that is hovered\r\n    }\r\n\r\n    // And when it is not hovered anymore\r\n    const noHighlight = function(){\r\n      d3.selectAll(\".myArea\").style(\"opacity\", 1)\r\n    }\r\n\r\n    // LEGEND //\r\n    const size = 20\r\n    svg.selectAll(\"myrect\")   // Add one dot in the legend for each name.\r\n      .data(keys.sort())\r\n      .enter()\r\n      .append(\"rect\")\r\n        .attr(\"x\", width)\r\n        .attr(\"y\", function(_,i){ return 10 + i*(size+5)}) // 100 is where the first dot appears. 25 is the distance between dots\r\n        .attr(\"width\", size)\r\n        .attr(\"height\", size)\r\n        .attr(\"rx\", 4)\r\n        .attr(\"ry\", 4)\r\n        .style(\"fill\", function(d){ return color(d)})\r\n        .on(\"mouseover\", highlight)\r\n        .on(\"mouseleave\", noHighlight)\r\n\r\n    svg.selectAll(\"mylabels\")   // Add one dot in the legend for each name.\r\n      .data(keys.sort())\r\n      .enter()\r\n      .append(\"text\")\r\n        .attr(\"x\", width + size*1.2)\r\n        .attr(\"y\", function(_,i){ return 10 + i*(size+5) + (size/2)}) // 100 is where the first dot appears. 25 is the distance between dots\r\n        .style(\"fill\", function(d){ return color(d)})\r\n        .text(function(d){ return d})\r\n        .attr(\"text-anchor\", \"left\")\r\n        .style(\"alignment-baseline\", \"middle\")\r\n        .on(\"mouseover\", highlight)\r\n        .on(\"mouseleave\", noHighlight)\r\n    })\r\n}\r\n","export const GLOBAL_VESSEL_TYPE = ['Barges', 'Excursion', 'Fishing', 'Merchant', 'Other', 'Pleasure Crafts', 'Tanker', 'Tugs']\r\nexport const REGION_NAME = ['Arctic', 'Central', 'East Canadian Water', 'Newfoundland', 'Maritimes', 'Pacific', 'Quebec', 'St. Lawrence Seaway', 'West Canadian Water']\r\nexport const REGION_COLOR = ['#CAB2D6', '#6A3D9A', '#33A02C', '#FB9A99', '#FDBF6F', '#E31A1C', '#1F78B4', '#A6CEE3', '#FF7F00']\r\nexport const REGION_NAME_ALT = ['Arctic', 'Central', 'East_Canadian_Water', 'Newfoundland', 'Maritimes', 'Pacific', 'Quebec', 'St_Lawrence_Seaway', 'West_Canadian_Water']\r\n\r\nfunction findGlobalVesselType(vesselType) {\r\n  if (['Barge Bulk Cargo', 'Barge Chemical','Barge Chips','Barge Derrick','Barge General','Barge Log','Barge Miscellaneous','Barge Oil Drilling Rig', 'Barge Oil/Petroleum', 'Barge Rail/Trailer','Barge Self-Propelled','Barge Towed',\"Don't use\",'Landing Craft','Logs Raft Section'].includes(vesselType)) {\r\n    return 'Barges'\r\n  } else if (['Excursion Passenger'].includes(vesselType)) {\r\n    return 'Excursion'\r\n  } else if (['Crab Boat', 'Dragger (Scallop, Clam, etc.)', 'Factory Ship', 'Fishery Patrol', 'Fishing Vessel', 'Gillnetter', 'Groundfish Boat (Open Boat)', 'Lobster Boat', 'Longliner', 'Other Fishing VSL (Open Boat)', 'Seiner', 'Shrimp Boat', 'Trawler', 'Troller'].includes(vesselType)) {\r\n    return 'Fishing'\r\n  } else if (['Cruise', 'Merchant (Dry)', 'Merchant Auto', 'Merchant Bulk', 'Merchant Cement', 'Merchant Coastal', 'Merchant Container', 'Merchant Ferry', 'Merchant General', 'Merchant Lash', 'Merchant Livestock', 'Merchant Ore', 'Merchant Passenger', 'Merchant Rail/Trailer Ferry', 'Merchant Reefer', 'Merchant RO/RO'].includes(vesselType)) {\r\n    return 'Merchant'\r\n  } else if (['Yacht - Pleasure Crafts', 'Yacht Power', 'Yacht Sails'].includes(vesselType)) {\r\n    return 'Pleasure Crafts'\r\n  } else if(['Merchant (Tanker)', 'Merchant Chemical', 'Merchant Chemical/Oil Products Tanker','Merchant Crude','Merchant Gasoline','Merchant Liquified Gas','Merchant Molasses','Merchant Ore/Bulk/Oil','Merchant Super Tanker','Merchant ULCC','Merchant VLCC','Merchant Water'].includes(vesselType)) {\r\n    return 'Tanker'\r\n  } else if (['Tug', 'Tug Fire', 'Tug Harbour', 'Tug Ocean', 'Tug Supply', 'Tugs Workboat'].includes(vesselType)) {\r\n    return 'Tugs'\r\n  } else {\r\n    return 'Other'\r\n  }\r\n}\r\n\r\nexport function clean(data) {\r\n  const cleanData = []\r\n  data.forEach(element => {\r\n    if (element['Lenght'] != 0 && \r\n        element['Width'] != 0 & \r\n        element['Maximum Draugth'] < 30 &&\r\n        element['Departure Date'] < ['Arrival Date']) {\r\n      cleanData.push({\r\n        'Arrival Date': element['Arrival Date'].substring(0,10),\r\n        'Arrival Hardour': element['Arrival Hardour'],\r\n        'Arrival Region': element['Arrival Region'],\r\n        'DeadWeight Tonnage': element['DeadWeight Tonnage'],\r\n        'Departure Date': element['Departure Date'].substring(0, 10),\r\n        'Departure Hardour': element['Departure Hardour'],\r\n        'Departure Region': element['Departure Region'],\r\n        'Lenght': element['Lenght'],\r\n        'Maximum Draugth': element['Maximum Draugth'],\r\n        'Vessel Type': element['Vessel Type'],\r\n        'Global Vessel Type': findGlobalVesselType(element['Vessel Type']),\r\n        'Width': element['Width']\r\n      })\r\n    }\r\n  })\r\n\r\n  return cleanData\r\n}\r\n\r\nexport function chordMatrix(data, departureDate, arrivalDate) {\r\n  const matrix = new Array(REGION_NAME.length)\r\n  for (let index = 0; index < matrix.length; index++) {\r\n    matrix[index] = new Array(REGION_NAME.length)\r\n  }\r\n  \r\n  REGION_NAME.forEach((departureRegion, i) => {\r\n    REGION_NAME.forEach((arrivalRegion, j) => {\r\n      matrix[i][j] = data\r\n        .filter((d) => {\r\n          return departureRegion === d['Departure Region'].slice(0,-7)\r\n            && arrivalRegion === d['Arrival Region'].slice(0,-7)\r\n            && departureDate <= d['Departure Date']\r\n            && arrivalDate >= d['Arrival Date']\r\n        })\r\n        .map((value) => value.count)\r\n        .reduce((partialSum, v) => Number(partialSum) + Number(v), 0)\r\n    })\r\n  })\r\n\r\n  return matrix\r\n}","import * as preproc from './preprocess.js'\r\n\r\nexport function rebuild(div, startDate, endDate) {\r\n  div.select(\"#tab-3-heatmap\")\r\n    .select('svg')\r\n    .remove()\r\n\r\n  buildHeatmap(div, startDate, endDate)\r\n}\r\n\r\n// https://d3-graph-gallery.com/heatmap.html\r\nexport function buildHeatmap(div, startDate, endDate) {\r\n\r\n  const size = 0.28*window.innerWidth\r\n  // set the dimensions and margins of the graph\r\n  const margin = {top: 10, right: 5, bottom: 90, left: 115},\r\n    width = size - margin.left - margin.right,\r\n    height = size - margin.top - margin.bottom;\r\n\r\n  // append the svg object to the body of the page\r\n  const svg = div.select(\"#tab-3-heatmap\")\r\n  .append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right + 50)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n  .append(\"g\")\r\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`)\r\n\r\n  // Labels of row and columns\r\n  const myGroups = preproc.GLOBAL_VESSEL_TYPE\r\n  const myVars = preproc.REGION_NAME\r\n\r\n  // Build X scales and axis:\r\n  const x = d3.scaleBand()\r\n    .range([ 0, width ])\r\n    .domain(myGroups)\r\n    .padding(0.01)\r\n\r\n  svg.append(\"g\")\r\n    .attr(\"transform\", `translate(0, ${height})`)\r\n    .call(d3.axisBottom(x))\r\n    .selectAll('text')\r\n    .attr('transform', 'translate(-20,20)rotate(-45)')\r\n\r\n  // Build Y scales and axis:\r\n  const y = d3.scaleBand()\r\n    .range([ height, 0 ])\r\n    .domain(myVars)\r\n    .padding(0.01)\r\n  svg.append(\"g\")\r\n    .call(d3.axisLeft(y))\r\n\r\n  // Build color scale\r\n  const myColor = d3.scaleLinear()\r\n    .range([\"white\", \"#ff0000\"])\r\n\r\n\r\n  function transformData(d, departureDate, arrivalDate) {\r\n    let map = heatmapMap()\r\n\r\n    const data = d.filter((line) => {\r\n      return departureDate <= line['Departure Date'] && arrivalDate >= line['Arrival Date']\r\n    })\r\n\r\n    data.forEach(line => {\r\n      const keyStart = line['Departure Region']+line['Global Vessel Type'];\r\n      const keyStop = line['Arrival Region']+line['Global Vessel Type'];\r\n      if (!map.has(keyStart)) {\r\n        map.set(keyStart, {\r\n          'Region': line['Departure Region'].slice(0,-7),\r\n          'Type': line['Global Vessel Type'],\r\n          'count': 1\r\n          });\r\n      } else {\r\n        const current = map.get(keyStart);\r\n        current.count += 1;\r\n        map.set(keyStart, current);\r\n      }\r\n      if (!map.has(keyStop)) {\r\n        map.set(keyStop, {\r\n          'Region': line['Arrival Region'].slice(0,-7),\r\n          'Type': line['Global Vessel Type'],\r\n          'count': 1\r\n          });\r\n      } else {\r\n        const current = map.get(keyStop);\r\n        current.count += 1;\r\n        map.set(keyStop, current);\r\n      }\r\n    })\r\n\r\n    const p = [];\r\n    let max = 0\r\n    Array.from(map.values()).forEach((value) => {\r\n      p.push({\r\n        'Region': value.Region,\r\n        'Type': value.Type,\r\n        'count' : (value.count / (2*data.length)) * 100\r\n      })\r\n      if ((value.count / (2*data.length)) * 100 >= max) {\r\n        max = (value.count / (2*data.length)) * 100\r\n      }\r\n    })\r\n    myColor.domain([0,max])\r\n\r\n    return p\r\n  }\r\n\r\n  //Read the data\r\n  d3.csv(\"./TRIP_HEATMAP.csv\").then( function(data) {\r\n    // add the squares and interaction\r\n    const transformedData = transformData(data, startDate, endDate)\r\n    svg.selectAll()\r\n    .data(transformedData, function(d) {\r\n      return d.Type+':'+d.Region;\r\n    })\r\n    .enter()\r\n    .append(\"g\")\r\n    .attr(\"class\", \"square\")\r\n    .on('mouseenter', function() { rectSelect(this, x, y) })\r\n    .on('mouseleave', function() { rectUnselect(this) })\r\n    .append(\"rect\")\r\n      .attr(\"x\", function(d) { return x(d.Type) })\r\n      .attr(\"y\", function(d) { return y(d.Region) })\r\n      .attr(\"width\", x.bandwidth() )\r\n      .attr(\"height\", y.bandwidth() )\r\n      .style(\"fill\", function(d) { return myColor(d.count) })\r\n    \r\n      initLegend(svg,myColor)\r\n      drawLegend(width + margin.right + 10, 0, height, 15, 'url(#gradient)', myColor)\r\n  })\r\n}\r\n\r\nfunction heatmapMap() {\r\n  let map = new Map();\r\n\r\n  preproc.REGION_NAME.forEach((region) => {\r\n    preproc.GLOBAL_VESSEL_TYPE.forEach((type) => {\r\n      const key = region + type\r\n      map.set(key, {\r\n        'Region': region,\r\n        'Type': type,\r\n        'count': 0\r\n      })\r\n    })\r\n  })\r\n  return map\r\n}\r\n\r\nfunction rectSelect(element, x, y) {\r\n  d3.select(element)\r\n    .append(\"text\")\r\n    .attr('x', function(d) { return x(d.Type) + x.bandwidth() / 2; })\r\n    .attr('y', function(d) { return y(d.Region) + y.bandwidth() / 2; })\r\n    .attr('text-anchor', 'middle')\r\n    .attr('dominant-baseline', 'middle')\r\n    .text(function(d) {\r\n      return d.count.toFixed(2) + '%'\r\n    })\r\n}\r\n\r\nfunction rectUnselect(element) {\r\n  d3.select(element)\r\n    .select('text')\r\n    .remove()\r\n}\r\n\r\nfunction initLegend(svg, colorScale) {\r\n  const defs = svg.append('defs')\r\n  svg.append('rect').attr('class', 'legend bar')\r\n  svg.append('g').attr('class', 'legend axis')\r\n\r\n  const linearGradient = defs\r\n  .append('linearGradient')\r\n  .attr('id', 'gradient')\r\n  .attr('x1', 0).attr('y1', 1).attr('x2', 0).attr('y2', 0)\r\n\r\n  linearGradient.selectAll('stop')\r\n  .data(colorScale.ticks().map((tick, i, nodes) => (\r\n    {\r\n      offset: `${ (100*i / nodes.length)}%`,\r\n      color: colorScale(tick)\r\n    })))\r\n  .join('stop')\r\n  .attr('offset', d => d.offset)\r\n  .attr('stop-color', d => d.color)\r\n}\r\n\r\nfunction drawLegend(x, y, height, width, fill, colorScale) {\r\n  d3.select('.legend.bar')\r\n    .attr('fill', fill)\r\n    .attr('x', x)\r\n    .attr('y', y)\r\n    .attr('height', height)\r\n    .attr('width', width)\r\n    \r\n  const scale = d3.scaleLinear()\r\n  .domain(colorScale.domain())\r\n  .range([height, 0])\r\n\r\n  let axis = d3.axisRight()\r\n  .ticks(7)\r\n  .scale(scale);\r\n\r\n  d3.select('.legend.axis')\r\n  .call(axis)\r\n  .attr('transform', 'translate('+ (x+15) + ',' + y + ')')\r\n}\r\n","import * as preproc from './preprocess.js'\r\n\r\n// https://d3-graph-gallery.com/chord.html\r\n// https://observablehq.com/@d3/directed-chord-diagram\r\n// https://jyu-theartofml.github.io/posts/circos_plot\r\n// http://strongriley.github.io/d3/ex/chord.html\r\nexport function build(div, data, startDate, endDate) {\r\n  let chordWidth = window.innerWidth / 2\r\n\r\n  var margin = {\r\n    top: chordWidth*0.175,\r\n    right: chordWidth*0.05, \r\n    bottom: chordWidth*0.07,\r\n    left: chordWidth*0.20 }, // TODO : Revoir valeur\r\n  width = chordWidth - margin.left - margin.right,\r\n  height = chordWidth - margin.top - margin.bottom;\r\n\r\n  const outerRadius = width/3.5;\r\n  const innerRadius = outerRadius-10\r\n\r\n  // create the svg area\r\n  const svg = div.select('#tab-3-chord-diagram')\r\n  .append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n  .append(\"g\")\r\n    .attr(\"transform\", \"translate(\" + (margin.left+outerRadius) + \",\" + (margin.top+outerRadius) + \")\");\r\n\r\n  // create input data: a square matrix that provides flow between entities\r\n  const matrix = preproc.chordMatrix(data, startDate, endDate)\r\n  \r\n  const colors = preproc.REGION_COLOR\r\n  \r\n  const tooltip = d3.select('#tooltip-chord-container')\r\n\r\n  // give this matrix to d3.chord(): it will calculates all the info we need to draw arc and ribbon\r\n  const res = d3.chord()\r\n    .padAngle(0.05)     // padding between entities (black arc)\r\n    .sortSubgroups(d3.descending)\r\n    (matrix)\r\n\r\n  // add the links between groups\r\n  const links = svg\r\n  .datum(res)\r\n  .append(\"g\")\r\n  .attr(\"id\", \"links\")\r\n  .selectAll(\"path\")\r\n  .data(function(d) { return d; })\r\n  .enter()\r\n  .append(\"path\")\r\n    .attr(\"class\", \"chord\")\r\n    .on('mouseenter', function({source, target}, _) {\r\n      tooltip.select('span#tooltip-chord-region-from-text')\r\n      .text(preproc.REGION_NAME[source.index])\r\n      .style('color', colors[source.index])\r\n      tooltip.select('span#tooltip-chord-region-to-text')\r\n      .text(preproc.REGION_NAME[source.subindex])\r\n      .style('color', colors[source.subindex])\r\n      tooltip.select('span#tooltip-chord-value')\r\n      .text(source.value)\r\n      return tooltip.style(\"visibility\", \"visible\")\r\n    })\r\n    .on('mousemove', function() {\r\n      tooltip.style('left', d3.event.pageX - 246)\r\n      tooltip.style('top', d3.event.pageY + 5)\r\n    })\r\n    .on('mouseleave', function() { return tooltip.style(\"visibility\", \"hidden\") })\r\n    .attr(\"d\", d3.ribbon().radius(innerRadius))\r\n    .style(\"fill\", function(d){ return(colors[d.source.index]) }) // colors depend on the source group\r\n    .style(\"stroke\", \"black\")\r\n    .attr(\"opacity\", 0.5)\r\n\r\n  // add the groups on the outer part of the circle\r\n  svg.datum(res)\r\n    .append(\"g\")\r\n    .attr(\"id\", \"groups\")\r\n    .selectAll(\"g\")\r\n    .data(function(d) { return d.groups; })\r\n    .enter()\r\n    .append(\"g\")\r\n    .attr(\"class\", \"group\")\r\n    .append(\"path\")\r\n      .style(\"fill\", function(_,i){ return colors[i] })\r\n      .style(\"stroke\", \"black\")\r\n      .attr(\"d\", d3.arc()\r\n        .innerRadius(innerRadius)\r\n        .outerRadius(outerRadius)\r\n      )\r\n      .on(\"mouseover\", function(event, _) {\r\n        console.log(`Région ${preproc.REGION_NAME[event.index]} (${event.value} navires)`)\r\n        highlightGroup(event, links)\r\n      })\r\n      .on(\"mouseleave\", function() {\r\n        unhighlightGroup(links)\r\n      })\r\n\r\n  // add the label of groups\r\n  svg.datum(res)\r\n    .append(\"g\")\r\n    .attr(\"id\", \"labels\")\r\n    .selectAll(\"text\")\r\n    .data(function(d) { return d.groups; })\r\n    .enter()\r\n    .append(\"g\")\r\n    .attr(\"transform\", function(d) { return \"rotate(\" + (d.startAngle * 180 / Math.PI - 90) + \") translate(\" + outerRadius + \",0)\"; })  // TODO : Revoir valeur\r\n    .append(\"text\")\r\n    .attr(\"x\", 8)\r\n    .attr(\"dy\", \".25em\")\r\n    .attr(\"transform\", function(d) { return d.startAngle > Math.PI ? \"rotate(180) translate(-16)\" : null; })\r\n    .style(\"text-anchor\", function(d) { return d.startAngle > Math.PI ? \"end\" : null; })\r\n    .style(\"fill\", function(_, i){ return(colors[i]) })\r\n    .style(\"font-weight\", \"bold\")\r\n    .style(\"font-size\", 12)\r\n    .text(function(d) { return preproc.REGION_NAME[d.index] })\r\n}\r\n\r\nfunction highlightGroup(event, links) {\r\n  links\r\n    .filter(function(d) { return d.source.index != event.index })\r\n    .attr(\"opacity\", 0.1)\r\n}\r\n\r\nfunction unhighlightGroup(links) {\r\n  links.attr(\"opacity\", 0.5)\r\n}\r\n\r\nexport function rebuild(div, data, startDate, endDate) {\r\n  div.select('#tab-3-chord-diagram')\r\n    .select('svg')\r\n    .remove()\r\n\r\n  build(div, data, startDate, endDate)\r\n}","import * as onglet1 from './scripts/onglet1.js'\r\nimport * as onglet3 from './scripts/onglet3.js'\r\nimport * as chord from './scripts/chord.js'\r\n\r\n(function (d3) {\r\n    onglet1.build(d3.select('#tab-1-content'))\r\n\r\n    let chordData;\r\n    d3.csv('./TRIP_CHORD.csv').then(function(data) {\r\n        chordData = data\r\n        chord.build(d3.select('#tab-3-content'), data, \"2010-01-01\", \"2023-01-01\")\r\n    })\r\n\r\n    onglet3.buildHeatmap(d3.select('#tab-3-content'), \"2010-01-01\", \"2023-01-01\")\r\n\r\n    d3.select('#tab-3-content #date-control-refresh').on('click', function() {\r\n        const start = d3.select('#date-start-control').property('value')\r\n        const end = d3.select('#date-end-control').property('value')\r\n\r\n        console.log(start, end)\r\n        chord.rebuild(d3.select('#tab-3-content'), chordData, start, end)\r\n        onglet3.rebuild(d3.select('#tab-3-content'), start, end)\r\n    })\r\n\r\n})(d3)\r\n\r\n$('.tab-button').click(function () {\r\n    if (!$(this).hasClass('tab-button-active')) {\r\n        const tab = $(this).data('tab')\r\n\r\n        d3.select(\".visible-tips\").style(\"display\", \"none\")\r\n        d3.select(\".visible-tips\").classed(\"visible-tips\", false)\r\n        d3.select(`#tab-${tab}-tips`).style(\"display\", \"block\").classed(\"visible-tips\", true)\r\n    \r\n        $('button.tab-button').removeClass('tab-button-active')\r\n        $(this).addClass('tab-button-active')\r\n    \r\n        $('.tab-content').removeClass('visible-tab')\r\n        $(`.tab-content#tab-${tab}-content`).addClass('visible-tab')\r\n    }\r\n})"]}