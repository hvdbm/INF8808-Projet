{"version":3,"sources":["scripts/onglet1.js","scripts/onglet2.js","scripts/preprocess.js","scripts/onglet3.js","scripts/chord.js","index.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["build","div","bounds","d3","select","node","getBoundingClientRect","margin","top","right","bottom","left","width","height","svg","append","attr","csv","d","date","timeParse","Barges","Other","Tugs","Tanker","Fishing","Excursion","Merchant","then","data","keys","columns","slice","color","scaleOrdinal","domain","range","schemeSet2","stackedData","stack","x","scaleTime","extent","call","axisBottom","ticks","text","y","scaleLinear","axisLeft","areaChart","area","y0","y1","selectAll","enter","key","style","highlight","noHighlight","size","_","i","on","removeDuplicate","name","cleanPortName","words","split","forEach","word","index","length","newWord","toLowerCase","letterIndex","letter","match","substring","toUpperCase","join","isPortExcluded","includes","dataPerMonth","dataPerPort","selectWidth","selectHeight","data1","data2","data3","concat","transformDataPorts","transformDataMonths","setHistograms","setStackedBar","map","Map","line","arrivalPort","departurePort","has","set","get","traffic","Array","from","values","sort","a","b","departureDate","Date","setDate","arrivalDate","setMonth","getMonth","sDate","toDateString","month","nb","buildTable","xScale","scaleBand","padding","yScale","max","tickValues","filter","tickFormat","timeFormat","topTraffic","row","selected","classed","port","undefined","selectPort","reset","nbLines","property","html","title","setHistogram","id","hist","histogram","value","thresholds","bins","x0","x1","total","type","subtype","number","subtypes","colors","darker_colors","currSum","entries","color_list","Math","ceil","GLOBAL_VESSEL_TYPE","REGION_NAME","REGION_COLOR","REGION_NAME_ALT","findGlobalVesselType","vesselType","clean","cleanData","element","push","chordMatrix","matrix","departureRegion","arrivalRegion","j","count","reduce","partialSum","v","Number","buildHeatmap","myGroups","preproc","myVars","myColor","transformData","heatmapMap","keyStart","keyStop","current","p","Region","Type","transformedData","rectSelect","rectUnselect","bandwidth","initLegend","drawLegend","region","toFixed","remove","colorScale","defs","linearGradient","tick","nodes","offset","fill","scale","axis","axisRight","chordWidth","screen","console","log","outerRadius","innerRadius","res","chord","padAngle","sortSubgroups","descending","links","datum","source","target","tooltip","subindex","ribbon","radius","tooltips","groups","arc","event","highlightGroup","unhighlightGroup","startAngle","PI","onglet1","chordData","onglet3","$","click","hasClass","tab","removeClass","addClass","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","overlay","createErrorOverlay","document","body","appendChild","getElementById","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","dep","isArray","Function","deps","cached","cache","some","cb"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACO,SAASA,KAAT,CAAeC,GAAf,EAAoB;AACzB;AACA,MAAMC,MAAM,GAAGC,EAAE,CAACC,MAAH,CAAU,qBAAV,EAAiCC,IAAjC,GAAwCC,qBAAxC,EAAf;AACA,MAAIC,MAAM,GAAG;AAACC,IAAAA,GAAG,EAAE,EAAN;AAAUC,IAAAA,KAAK,EAAE,GAAjB;AAAsBC,IAAAA,MAAM,EAAE,EAA9B;AAAkCC,IAAAA,IAAI,EAAE;AAAxC,GAAb;AAAA,MACAC,KAAK,GAAGV,MAAM,CAACU,KAAP,GAAeL,MAAM,CAACI,IAAtB,GAA6BJ,MAAM,CAACE,KAD5C;AAAA,MAEAI,MAAM,GAAG,MAAMN,MAAM,CAACC,GAAb,GAAmBD,MAAM,CAACG,MAFnC,CAHyB,CAOzB;;AACA,MAAII,GAAG,GAAGb,GAAG,CAACG,MAAJ,CAAW,qBAAX,EACTW,MADS,CACF,KADE,EAEPC,IAFO,CAEF,OAFE,EAEOJ,KAAK,GAAGL,MAAM,CAACI,IAAf,GAAsBJ,MAAM,CAACE,KAFpC,EAGPO,IAHO,CAGF,QAHE,EAGQH,MAAM,GAAGN,MAAM,CAACC,GAAhB,GAAsBD,MAAM,CAACG,MAHrC,EAITK,MAJS,CAIF,GAJE,EAKPC,IALO,CAKF,WALE,EAMF,eAAeT,MAAM,CAACI,IAAtB,GAA6B,GAA7B,GAAmCJ,MAAM,CAACC,GAA1C,GAAgD,GAN9C,CAAV;AAQAL,EAAAA,EAAE,CAACc,GAAH,CAAO,6BAAP,EAAsC,UAASC,CAAT,EAAW;AAC7C,WAAO;AACLC,MAAAA,IAAI,EAAGhB,EAAE,CAACiB,SAAH,CAAa,UAAb,EAAyBF,CAAC,CAACC,IAA3B,CADF;AAELE,MAAAA,MAAM,EAAGH,CAAC,CAACG,MAFN;AAGLC,MAAAA,KAAK,EAAGJ,CAAC,CAACI,KAHL;AAILC,MAAAA,IAAI,EAAGL,CAAC,CAACK,IAJJ;AAKLC,MAAAA,MAAM,EAAGN,CAAC,CAACM,MALN;AAMLC,MAAAA,OAAO,EAAGP,CAAC,CAACO,OANP;AAOL,yBAAmBP,CAAC,CAAC,iBAAD,CAPf;AAQLQ,MAAAA,SAAS,EAAGR,CAAC,CAACQ,SART;AASLC,MAAAA,QAAQ,EAAGT,CAAC,CAACS;AATR,KAAP;AAWH,GAZD,EAYGC,IAZH,CAYS,UAASC,IAAT,EAAe;AACtB,QAAMC,IAAI,GAAGD,IAAI,CAACE,OAAL,CAAaC,KAAb,CAAmB,CAAnB,CAAb,CADsB,CACc;;AAEpC,QAAMC,KAAK,GAAG9B,EAAE,CAAC+B,YAAH,GACXC,MADW,CACJL,IADI,EAEXM,KAFW,CAELjC,EAAE,CAACkC,UAFE,CAAd;AAIA,QAAMC,WAAW,GAAGnC,EAAE,CAACoC,KAAH,GACjBT,IADiB,CACZA,IADY,EAEnBD,IAFmB,CAApB,CAPsB,CAWtB;;AACA,QAAMW,CAAC,GAAGrC,EAAE,CAACsC,SAAH,GACTN,MADS,CACFhC,EAAE,CAACuC,MAAH,CAAUb,IAAV,EAAgB,UAAAX,CAAC;AAAA,aAAIA,CAAC,CAACC,IAAN;AAAA,KAAjB,CADE,EAETiB,KAFS,CAEH,CAAE,CAAF,EAAKxB,KAAL,CAFG,CAAV;AAGAE,IAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EACGC,IADH,CACQ,WADR,EACqB,iBAAiBH,MAAjB,GAA0B,GAD/C,EAEG8B,IAFH,CAEQxC,EAAE,CAACyC,UAAH,CAAcJ,CAAd,EAAiBK,KAAjB,CAAuB,EAAvB,CAFR,EAfsB,CAmBtB;;AACA/B,IAAAA,GAAG,CAACC,MAAJ,CAAW,MAAX,EACGC,IADH,CACQ,aADR,EACuB,KADvB,EAEGA,IAFH,CAEQ,GAFR,EAEaJ,KAFb,EAGGI,IAHH,CAGQ,GAHR,EAGaH,MAAM,GAAC,EAHpB,EAIGiC,IAJH,CAIQ,OAJR,EApBsB,CA0BtB;;AACA,QAAMC,CAAC,GAAG5C,EAAE,CAAC6C,WAAH,GACPb,MADO,CACA,CAAC,CAAD,EAAI,KAAJ,CADA,EACgB;AADhB,KAEPC,KAFO,CAED,CAAEvB,MAAF,EAAU,CAAV,CAFC,CAAV;AAGAC,IAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EACG4B,IADH,CACQxC,EAAE,CAAC8C,QAAH,CAAYF,CAAZ,EAAeF,KAAf,CAAqB,EAArB,CADR,EA9BsB,CAiCtB;;AACA/B,IAAAA,GAAG,CAACC,MAAJ,CAAW,MAAX,EACGC,IADH,CACQ,aADR,EACuB,KADvB,EAEGA,IAFH,CAEQ,GAFR,EAEa,CAFb,EAGGA,IAHH,CAGQ,GAHR,EAGa,CAAC,EAHd,EAIG8B,IAJH,CAIQ,mBAJR,EAKG9B,IALH,CAKQ,aALR,EAKuB,OALvB,EAlCsB,CAyCtB;;AACA,QAAMkC,SAAS,GAAGpC,GAAG,CAACC,MAAJ,CAAW,GAAX,CAAlB;AACA,QAAMoC,IAAI,GAAGhD,EAAE,CAACgD,IAAH,GACVX,CADU,CACR,UAAStB,CAAT,EAAY;AAAE,aAAOsB,CAAC,CAACtB,CAAC,CAACW,IAAF,CAAOV,IAAR,CAAR;AAAwB,KAD9B,EAEViC,EAFU,CAEP,UAASlC,CAAT,EAAY;AAAE,aAAO6B,CAAC,CAAC7B,CAAC,CAAC,CAAD,CAAF,CAAR;AAAiB,KAFxB,EAGVmC,EAHU,CAGP,UAASnC,CAAT,EAAY;AAAE,aAAO6B,CAAC,CAAC7B,CAAC,CAAC,CAAD,CAAF,CAAR;AAAiB,KAHxB,CAAb,CA3CsB,CAgDtB;;AACAgC,IAAAA,SAAS,CACRI,SADD,CACW,UADX,EAECzB,IAFD,CAEMS,WAFN,EAGCiB,KAHD,GAICxC,MAJD,CAIQ,MAJR,EAKGC,IALH,CAKQ,OALR,EAKiB,UAASE,CAAT,EAAY;AAAE,aAAO,YAAYA,CAAC,CAACsC,GAArB;AAA0B,KALzD,EAMGC,KANH,CAMS,MANT,EAMiB,UAASvC,CAAT,EAAY;AAAE,aAAOe,KAAK,CAACf,CAAC,CAACsC,GAAH,CAAZ;AAAsB,KANrD,EAOGxC,IAPH,CAOQ,GAPR,EAOamC,IAPb,EAjDsB,CA0DtB;;AACA,QAAMO,SAAS,GAAG,SAAZA,SAAY,CAASxC,CAAT,EAAW;AAC3Bf,MAAAA,EAAE,CAACmD,SAAH,CAAa,SAAb,EAAwBG,KAAxB,CAA8B,SAA9B,EAAyC,EAAzC,EAD2B,CACmB;;AAC9CtD,MAAAA,EAAE,CAACC,MAAH,CAAU,MAAIc,CAAd,EAAiBuC,KAAjB,CAAuB,SAAvB,EAAkC,CAAlC,EAF2B,CAEW;AACvC,KAHD,CA3DsB,CAgEtB;;;AACA,QAAME,WAAW,GAAG,SAAdA,WAAc,GAAU;AAC5BxD,MAAAA,EAAE,CAACmD,SAAH,CAAa,SAAb,EAAwBG,KAAxB,CAA8B,SAA9B,EAAyC,CAAzC;AACD,KAFD,CAjEsB,CAqEtB;;;AACA,QAAMG,IAAI,GAAG,EAAb;AACA9C,IAAAA,GAAG,CAACwC,SAAJ,CAAc,QAAd,EAA0B;AAA1B,KACGzB,IADH,CACQC,IADR,EAEGyB,KAFH,GAGGxC,MAHH,CAGU,MAHV,EAIKC,IAJL,CAIU,GAJV,EAIeJ,KAJf,EAKKI,IALL,CAKU,GALV,EAKe,UAAS6C,CAAT,EAAWC,CAAX,EAAa;AAAE,aAAO,KAAKA,CAAC,IAAEF,IAAI,GAAC,CAAP,CAAb;AAAuB,KALrD,EAKuD;AALvD,KAMK5C,IANL,CAMU,OANV,EAMmB4C,IANnB,EAOK5C,IAPL,CAOU,QAPV,EAOoB4C,IAPpB,EAQK5C,IARL,CAQU,cARV,EAQ0B,GAR1B,EASKA,IATL,CASU,QATV,EASoB,OATpB,EAUKyC,KAVL,CAUW,MAVX,EAUmB,UAASvC,CAAT,EAAW;AAAE,aAAOe,KAAK,CAACf,CAAD,CAAZ;AAAgB,KAVhD,EAWK6C,EAXL,CAWQ,WAXR,EAWqBL,SAXrB,EAYKK,EAZL,CAYQ,YAZR,EAYsBJ,WAZtB;AAcA7C,IAAAA,GAAG,CAACwC,SAAJ,CAAc,UAAd,EAA4B;AAA5B,KACGzB,IADH,CACQC,IADR,EAEGyB,KAFH,GAGGxC,MAHH,CAGU,MAHV,EAIKC,IAJL,CAIU,GAJV,EAIeJ,KAAK,GAAGgD,IAAI,GAAC,GAJ5B,EAKK5C,IALL,CAKU,GALV,EAKe,UAAS6C,CAAT,EAAWC,CAAX,EAAa;AAAE,aAAO,KAAKA,CAAC,IAAEF,IAAI,GAAC,CAAP,CAAN,GAAmBA,IAAI,GAAC,CAA/B;AAAkC,KALhE,EAKkE;AALlE,KAMKH,KANL,CAMW,MANX,EAMmB,UAASvC,CAAT,EAAW;AAAE,aAAOe,KAAK,CAACf,CAAD,CAAZ;AAAgB,KANhD,EAOK4B,IAPL,CAOU,UAAS5B,CAAT,EAAW;AAAE,aAAOA,CAAP;AAAS,KAPhC,EAQKF,IARL,CAQU,aARV,EAQyB,MARzB,EASKyC,KATL,CASW,oBATX,EASiC,QATjC,EAUKM,EAVL,CAUQ,WAVR,EAUqBL,SAVrB,EAWKK,EAXL,CAWQ,YAXR,EAWsBJ,WAXtB;AAYC,GA7GH;AA8GD;;;;;;;;;;;;;;;;;;;;;;;;;;AC/HD;AAEO,SAASK,eAAT,CAAyBC,IAAzB,EAA+B;AAClC,MAAIA,IAAI,IAAI,eAAZ,EAA6B;AACzB,WAAO,YAAP;AACH;;AACD,SAAOA,IAAP;AACH;;AAEM,SAASC,aAAT,CAAuBD,IAAvB,EAA6B;AAChCA,EAAAA,IAAI,GAAGD,eAAe,CAACC,IAAD,CAAtB;AACA,MAAME,KAAK,GAAGF,IAAI,CAACG,KAAL,CAAW,UAAX,CAAd;AACAD,EAAAA,KAAK,CAACE,OAAN,CAAc,UAACC,IAAD,EAAOC,KAAP,EAAiB;AAC3B,QAAID,IAAI,CAACE,MAAL,GAAc,CAAlB,EAAqB;AACjB,UAAIC,OAAO,GAAGH,IAAI,CAACI,WAAL,EAAd;AAEA,UAAIC,WAAW,GAAG,CAAlB;;AACA,aAAO,IAAP,EAAa;AACT,YAAMC,MAAM,GAAGH,OAAO,CAACE,WAAD,CAAtB;;AACA,YAAIC,MAAM,CAACC,KAAP,CAAa,QAAb,CAAJ,EAA4B;AACxBJ,UAAAA,OAAO,GAAGA,OAAO,CAACK,SAAR,CAAkB,CAAlB,EAAqBH,WAArB,IAAoCC,MAAM,CAACG,WAAP,EAApC,GAA2DN,OAAO,CAACK,SAAR,CAAkBH,WAAW,GAAG,CAAhC,CAArE;AACA;AACH;;AACDA,QAAAA,WAAW,IAAI,CAAf;AACH;;AACDR,MAAAA,KAAK,CAACI,KAAD,CAAL,GAAeE,OAAf;AACH;AACJ,GAfD;AAgBA,SAAON,KAAK,CAACa,IAAN,CAAW,GAAX,CAAP;AACH;;AAEM,SAASC,cAAT,CAAwBhB,IAAxB,EAA8B;AACjC,MAAIA,IAAI,CAACiB,QAAL,CAAc,iBAAd,CAAJ,EAAsC;AAClC,WAAO,IAAP;AACH;;AACD,SAAO,KAAP;AACH;;AAED,IAAIC,YAAJ;AACA,IAAIC,WAAJ;AACA,IAAIvD,IAAJ;AAEA,IAAMwD,WAAW,GAAG,GAApB;AACA,IAAMC,YAAY,GAAG,GAArB,EAEA;;AACAnF,EAAE,CAACc,GAAH,CAAO,kBAAP,EAA2BW,IAA3B,CAAiC,UAAS2D,KAAT,EAAgB;AAC7CpF,EAAAA,EAAE,CAACc,GAAH,CAAO,kBAAP,EAA2BW,IAA3B,CAAiC,UAAS4D,KAAT,EAAgB;AAC7CrF,IAAAA,EAAE,CAACc,GAAH,CAAO,kBAAP,EAA2BW,IAA3B,CAAiC,UAAS6D,KAAT,EAAgB;AAC7C;AACA;AACA;AACA;AAEA5D,MAAAA,IAAI,GAAG0D,KAAK,CAACG,MAAN,CAAaF,KAAb,EAAoBE,MAApB,CAA2BD,KAA3B,CAAP;AAEAL,MAAAA,WAAW,GAAGO,kBAAkB,CAAC9D,IAAD,CAAhC;AACAsD,MAAAA,YAAY,GAAGS,mBAAmB,CAAC/D,IAAD,CAAlC;AAEAgE,MAAAA,aAAa,CAAChE,IAAD,CAAb;AACAiE,MAAAA,aAAa,CAACjE,IAAD,CAAb;AAEA7B,MAAAA,KAAK,CAACG,EAAE,CAACC,MAAH,CAAU,gBAAV,CAAD,EAA8B+E,YAA9B,EAA4CC,WAA5C,CAAL;AACH,KAfD;AAgBH,GAjBD;AAkBH,CAnBD;;AAqBO,SAASO,kBAAT,CAA4B9D,IAA5B,EAAkC;AACrC,MAAMkE,GAAG,GAAG,IAAIC,GAAJ,EAAZ;AACAnE,EAAAA,IAAI,CAACwC,OAAL,CAAa,UAAA4B,IAAI,EAAI;AACjB,QAAMC,WAAW,GAAGhC,aAAa,CAAC+B,IAAI,CAAC,iBAAD,CAAL,CAAjC;AACA,QAAME,aAAa,GAAGjC,aAAa,CAAC+B,IAAI,CAAC,mBAAD,CAAL,CAAnC;;AAEA,QAAI,CAAChB,cAAc,CAACiB,WAAD,CAAnB,EAAkC;AAC9B,UAAI,CAACH,GAAG,CAACK,GAAJ,CAAQF,WAAR,CAAL,EAA2B;AACvBH,QAAAA,GAAG,CAACM,GAAJ,CAAQH,WAAR,EAAqB;AACjB,kBAAQA,WADS;AAEjB,qBAAW;AAFM,SAArB;AAIH,OALD,MAKO;AACHH,QAAAA,GAAG,CAACO,GAAJ,CAAQJ,WAAR,EAAqBK,OAArB,IAAgC,CAAhC;AACH;AACJ;;AAED,QAAI,CAACtB,cAAc,CAACkB,aAAD,CAAnB,EAAoC;AAChC,UAAI,CAACJ,GAAG,CAACK,GAAJ,CAAQD,aAAR,CAAL,EAA6B;AACzBJ,QAAAA,GAAG,CAACM,GAAJ,CAAQF,aAAR,EAAuB;AACnB,kBAAQA,aADW;AAEnB,qBAAW;AAFQ,SAAvB;AAIH,OALD,MAKO;AACHJ,QAAAA,GAAG,CAACO,GAAJ,CAAQH,aAAR,EAAuBI,OAAvB,IAAkC,CAAlC;AACH;AACJ;AACJ,GAzBD;AA2BA,MAAMnB,WAAW,GAAGoB,KAAK,CAACC,IAAN,CAAWV,GAAG,CAACW,MAAJ,EAAX,CAApB;AACAtB,EAAAA,WAAW,CAACuB,IAAZ,CAAiB,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAC7B,WAAOA,CAAC,CAACN,OAAF,GAAYK,CAAC,CAACL,OAArB;AACH,GAFD;AAGA,SAAOnB,WAAP;AACH;;AAEM,SAASQ,mBAAT,CAA6B/D,IAA7B,EAAmC;AACtC,MAAMkE,GAAG,GAAG,IAAIC,GAAJ,EAAZ;AACAnE,EAAAA,IAAI,CAACwC,OAAL,CAAa,UAAA4B,IAAI,EAAI;AACjB,QAAMa,aAAa,GAAG,IAAIC,IAAJ,CAASd,IAAI,CAAC,gBAAD,CAAb,CAAtB;AACAa,IAAAA,aAAa,CAACE,OAAd,CAAsB,CAAtB;AACA,QAAMC,WAAW,GAAG,IAAIF,IAAJ,CAASd,IAAI,CAAC,cAAD,CAAb,CAApB;AACAgB,IAAAA,WAAW,CAACD,OAAZ,CAAoB,CAApB;;AAEA,SAAK,IAAI7F,IAAI,GAAG2F,aAAhB,EAA+B3F,IAAI,IAAI8F,WAAvC,EAAoD9F,IAAI,CAAC+F,QAAL,CAAc/F,IAAI,CAACgG,QAAL,KAAgB,CAA9B,CAApD,EAAsF;AAClF,UAAMC,KAAK,GAAGjG,IAAI,CAACkG,YAAL,EAAd;;AACA,UAAI,CAACtB,GAAG,CAACK,GAAJ,CAAQgB,KAAR,CAAL,EAAqB;AACjBrB,QAAAA,GAAG,CAACM,GAAJ,CAAQe,KAAR,EAAe;AACX,kBAAQA,KADG;AAEX,qBAAW;AAFA,SAAf;AAIH,OALD,MAKO;AACHrB,QAAAA,GAAG,CAACO,GAAJ,CAAQc,KAAR,EAAeb,OAAf,IAA0B,CAA1B;AACH;AACJ;AACJ,GAjBD;AAmBA,MAAMpB,YAAY,GAAGqB,KAAK,CAACC,IAAN,CAAWV,GAAG,CAACW,MAAJ,EAAX,CAArB;AACAvB,EAAAA,YAAY,CAACd,OAAb,CAAqB,UAAAiD,KAAK,EAAI;AAC1BA,IAAAA,KAAK,CAACnG,IAAN,GAAa,IAAI4F,IAAJ,CAASO,KAAK,CAACnG,IAAf,CAAb;AACH,GAFD;AAGA,SAAOgE,YAAP;AACH;;AAEM,SAASnF,KAAT,CAAeC,GAAf,EAAoBkF,YAApB,EAAkCC,WAAlC,EAAwD;AAAA,MAATmC,EAAS,uEAAJ,EAAI;AAC3DC,EAAAA,UAAU,CAACvH,GAAD,EAAMmF,WAAN,EAAmBmC,EAAnB,CAAV;AAEA,MAAME,MAAM,GAAGtH,EAAE,CAACuH,SAAH,GAAeC,OAAf,CAAuB,GAAvB,CAAf;AACAF,EAAAA,MAAM,CAACtF,MAAP,CACIgD,YAAY,CAACY,GAAb,CAAiB,UAACuB,KAAD;AAAA,WAAWA,KAAK,CAACnG,IAAjB;AAAA,GAAjB,CADJ,EAECiB,KAFD,CAEO,CAAC,CAAD,EAAI,GAAJ,CAFP;AAIA,MAAMwF,MAAM,GAAGzH,EAAE,CAAC6C,WAAH,EAAf;AACA,MAAI6E,GAAG,GAAG,CAAV;;AAT2D,6CAUvC1C,YAVuC;AAAA;;AAAA;AAU3D,wDAAkC;AAAA,UAAvBmC,KAAuB;;AAC9B,UAAIA,KAAK,CAACf,OAAN,GAAgBsB,GAApB,EAAyB;AACrBA,QAAAA,GAAG,GAAGP,KAAK,CAACf,OAAZ;AACH;AACJ;AAd0D;AAAA;AAAA;AAAA;AAAA;;AAe3DqB,EAAAA,MAAM,CAACzF,MAAP,CAAc,CAAC,CAAD,EAAI0F,GAAJ,CAAd,EAAwBzF,KAAxB,CAA8B,CAAC,GAAD,EAAM,CAAN,CAA9B;AAEAnC,EAAAA,GAAG,CAACG,MAAJ,CAAW,sCAAX,EACCkD,SADD,CACW,MADX,EAECzB,IAFD,CAEMsD,YAFN,EAGCH,IAHD,CAGM,MAHN,EAIChE,IAJD,CAIM,OAJN,EAIe,MAAMmE,YAAY,CAACX,MAJlC,EAKCxD,IALD,CAKM,QALN,EAKgB,UAAAa,IAAI;AAAA,WAAI,MAAM+F,MAAM,CAAC/F,IAAI,CAAC0E,OAAN,CAAhB;AAAA,GALpB,EAMCvF,IAND,CAMM,GANN,EAMW,UAAAa,IAAI;AAAA,WAAI4F,MAAM,CAAC5F,IAAI,CAACV,IAAN,CAAV;AAAA,GANf,EAOCH,IAPD,CAOM,GAPN,EAOW,UAAAa,IAAI;AAAA,WAAI+F,MAAM,CAAC/F,IAAI,CAAC0E,OAAN,CAAV;AAAA,GAPf;AASAtG,EAAAA,GAAG,CAACG,MAAJ,CAAW,oBAAX,EACCA,MADD,CACQ,SADR,EAECY,IAFD,CAEM,WAFN,EAEmB,kBAAkB,GAAlB,GAAwB,GAF3C,EAGC2B,IAHD,CAGMxC,EAAE,CAACyC,UAAH,CAAc6E,MAAd,EACLK,UADK,CACML,MAAM,CAACtF,MAAP,GAAgB4F,MAAhB,CAAuB,UAAS7G,CAAT,EAAY4C,CAAZ,EAAe;AAC9C,WAAO,EAAEA,CAAC,GAAG,EAAJ,GAAS,CAAX,CAAP;AACH,GAFW,CADN,EAILkE,UAJK,CAIM7H,EAAE,CAAC8H,UAAH,CAAc,IAAd,CAJN,CAHN;AAQH;;AAEM,SAAST,UAAT,CAAoBvH,GAApB,EAAyBmF,WAAzB,EAAsCmC,EAAtC,EAA0C;AAC7C,MAAMW,UAAU,GAAG9C,WAAW,CAAC,CAAD,CAAX,CAAemB,OAAlC;AAEA,MAAM4B,GAAG,GAAGlI,GAAG,CAACG,MAAJ,CAAW,mBAAX,EACXkD,SADW,CACD,aADC,EAEXzB,IAFW,CAENuD,WAFM,EAGX7B,KAHW,GAIXwE,MAJW,CAIJ,UAAClG,IAAD,EAAO0C,KAAP;AAAA,WAAiBgD,EAAE,IAAI,CAAN,IAAWhD,KAAK,GAAGgD,EAApC;AAAA,GAJI,EAKXxG,MALW,CAKJ,IALI,EAMXC,IANW,CAMN,WANM,EAMO,UAACa,IAAD,EAAO0C,KAAP;AAAA,WAAiB1C,IAAI,CAACoC,IAAtB;AAAA,GANP,CAAZ;AAQAkE,EAAAA,GAAG,CAACpH,MAAJ,CAAW,IAAX,EACCC,IADD,CACM,OADN,EACe,uBADf,EAECD,MAFD,CAEQ,KAFR,EAGCC,IAHD,CAGM,OAHN,EAGe,gBAHf,EAICD,MAJD,CAIQ,MAJR,EAKC+B,IALD,CAKM,UAACjB,IAAD,EAAO0C,KAAP;AAAA,WAAiBA,KAAK,GAAG,CAAzB;AAAA,GALN;AAOA4D,EAAAA,GAAG,CAACpH,MAAJ,CAAW,IAAX,EACCC,IADD,CACM,OADN,EACe,uBADf,EAECD,MAFD,CAEQ,KAFR,EAGCC,IAHD,CAGM,OAHN,EAGe,gBAHf,EAICD,MAJD,CAIQ,MAJR,EAKC+B,IALD,CAKM,UAACjB,IAAD,EAAO0C,KAAP;AAAA,WAAiB1C,IAAI,CAACoC,IAAtB;AAAA,GALN;AAOAkE,EAAAA,GAAG,CAACpH,MAAJ,CAAW,IAAX,EACCC,IADD,CACM,OADN,EACe,0BADf,EAECD,MAFD,CAEQ,KAFR,EAGCC,IAHD,CAGM,OAHN,EAGe,mBAHf,EAICD,MAJD,CAIQ,MAJR,EAKC+B,IALD,CAKM,UAACjB,IAAD,EAAO0C,KAAP;AAAA,WAAiB1C,IAAI,CAAC0E,OAAtB;AAAA,GALN;AAOA4B,EAAAA,GAAG,CAACpH,MAAJ,CAAW,IAAX,EACCC,IADD,CACM,OADN,EACe,oCADf,EAECD,MAFD,CAEQ,KAFR,EAGCC,IAHD,CAGM,OAHN,EAGe,uBAHf,EAICyC,KAJD,CAIO,OAJP,EAIgB,UAAC5B,IAAD,EAAO0C,KAAP;AAAA,WAAiB1C,IAAI,CAAC0E,OAAL,GAAe2B,UAAf,GAA4B,GAA5B,GAAkC,GAAnD;AAAA,GAJhB;AAMAjI,EAAAA,GAAG,CAACqD,SAAJ,CAAc,gBAAd,EAAgCS,EAAhC,CAAmC,OAAnC,EAA4C,YAAW;AACnD,QAAMoE,GAAG,GAAGhI,EAAE,CAACC,MAAH,CAAU,IAAV,CAAZ;AACA,QAAMgI,QAAQ,GAAGD,GAAG,CAACE,OAAJ,CAAY,UAAZ,CAAjB;AAEAlI,IAAAA,EAAE,CAACmD,SAAH,CAAa,gBAAb,EAA+B+E,OAA/B,CAAuC,UAAvC,EAAmD,KAAnD;AACAF,IAAAA,GAAG,CAACE,OAAJ,CAAY,UAAZ,EAAwB,CAACD,QAAzB;AAEA,QAAME,IAAI,GAAGF,QAAQ,GAAGG,SAAH,GAAeJ,GAAG,CAACnH,IAAJ,CAAS,WAAT,CAApC;AAEAwH,IAAAA,UAAU,CAACF,IAAD,CAAV;AACH,GAVD;AAWH;;AAEDnI,EAAE,CAACC,MAAH,CAAU,wCAAV,EAAoD2D,EAApD,CAAuD,OAAvD,EAAgE,YAAW;AACvE0E,EAAAA,KAAK,CAACtI,EAAE,CAACC,MAAH,CAAU,gBAAV,CAAD,CAAL;AACA,MAAMsI,OAAO,GAAGvI,EAAE,CAACC,MAAH,CAAU,iBAAV,EAA6BuI,QAA7B,CAAsC,OAAtC,CAAhB;AACA3I,EAAAA,KAAK,CAACG,EAAE,CAACC,MAAH,CAAU,gBAAV,CAAD,EAA8B+E,YAA9B,EAA4CC,WAA5C,EAAyDsD,OAAzD,CAAL;AACH,CAJD;;AAMO,SAASD,KAAT,CAAexI,GAAf,EAAoB;AACvBA,EAAAA,GAAG,CAACG,MAAJ,CAAW,mBAAX,EAAgCwI,IAAhC,CAAqC,EAArC;AACAJ,EAAAA,UAAU,CAACD,SAAD,CAAV;AACH;;AAEM,SAASC,UAAT,CAAoBF,IAApB,EAA0B;AAC7B,MAAMO,KAAK,GAAG1I,EAAE,CAACC,MAAH,CAAU,4BAAV,CAAd;;AACA,MAAIkI,IAAI,IAAIC,SAAZ,EAAuB;AACnBM,IAAAA,KAAK,CAAC/F,IAAN,CAAW,oDAAX;AACH,GAFD,MAEO;AACH+F,IAAAA,KAAK,CAAC/F,IAAN,CAAWwF,IAAX;AACH;AACJ;;AAEM,SAASQ,YAAT,CAAsBjH,IAAtB,EAA4BgG,GAA5B,EAAiCjH,KAAjC,EAAwCC,MAAxC,EAAgDkI,EAAhD,EAAoDF,KAApD,EAA2D;AAC9D,MAAI/H,GAAG,GAAGX,EAAE,CAACC,MAAH,CAAU2I,EAAV,EACLhI,MADK,CACE,KADF,EAEDC,IAFC,CAEI,OAFJ,EAEaJ,KAFb,EAGDI,IAHC,CAGI,QAHJ,EAGcH,MAHd,EAILE,MAJK,CAIE,GAJF,EAKDC,IALC,CAKI,WALJ,EAKiB,kBALjB,CAAV;AAOA,MAAIwB,CAAC,GAAGrC,EAAE,CAAC6C,WAAH,GACHb,MADG,CACI,CAAC,CAAD,EAAI0F,GAAJ,CADJ,EAEHzF,KAFG,CAEG,CAAC,CAAD,EAAIxB,KAAK,GAAG,GAAZ,CAFH,CAAR;AAGAE,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EACKC,IADL,CACU,WADV,EACuB,kBAAkBH,MAAM,GAAG,EAA3B,IAAiC,GADxD,EAEK8B,IAFL,CAEUxC,EAAE,CAACyC,UAAH,CAAcJ,CAAd,CAFV;AAIA,MAAIwG,IAAI,GAAG7I,EAAE,CAAC8I,SAAH,GACNC,KADM,CACA,UAAAhI,CAAC,EAAI;AAAE,WAAOA,CAAC,CAAC2H,KAAD,CAAR;AAAkB,GADzB,EAEN1G,MAFM,CAECK,CAAC,CAACL,MAAF,EAFD,EAGNgH,UAHM,CAGK3G,CAAC,CAACK,KAAF,CAAQ,EAAR,CAHL,CAAX;AAKA,MAAIuG,IAAI,GAAGJ,IAAI,CAACnH,IAAD,CAAf;AAEA,MAAIkB,CAAC,GAAG5C,EAAE,CAAC6C,WAAH,GACHZ,KADG,CACG,CAACvB,MAAM,GAAG,EAAV,EAAc,CAAd,CADH,EAEHsB,MAFG,CAEI,CAAC,CAAD,EAAIhC,EAAE,CAAC0H,GAAH,CAAOuB,IAAP,EAAa,UAAAlI,CAAC,EAAI;AAAE,WAAOA,CAAC,CAACsD,MAAT;AAAkB,GAAtC,CAAJ,CAFJ,CAAR;AAGA1D,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EACK4B,IADL,CACUxC,EAAE,CAAC8C,QAAH,CAAYF,CAAZ,EAAeF,KAAf,CAAqB,CAArB,CADV;AAGA/B,EAAAA,GAAG,CAACwC,SAAJ,CAAc,MAAd,EACKzB,IADL,CACUuH,IADV,EAEK7F,KAFL,GAGKxC,MAHL,CAGY,MAHZ,EAISC,IAJT,CAIc,GAJd,EAImB,CAJnB,EAKSA,IALT,CAKc,WALd,EAK2B,UAAAE,CAAC,EAAI;AAAE,WAAO,eAAesB,CAAC,CAACtB,CAAC,CAACmI,EAAH,CAAhB,GAAyB,GAAzB,GAA+BtG,CAAC,CAAC7B,CAAC,CAACsD,MAAH,CAAhC,GAA6C,GAApD;AAA0D,GAL5F,EAMSxD,IANT,CAMc,OANd,EAMuB,UAAAE,CAAC,EAAI;AAAE,WAAOsB,CAAC,CAACtB,CAAC,CAACoI,EAAH,CAAD,GAAU9G,CAAC,CAACtB,CAAC,CAACmI,EAAH,CAAlB;AAA2B,GANzD,EAOSrI,IAPT,CAOc,QAPd,EAOwB,UAAAE,CAAC,EAAI;AAAE,WAAOL,MAAM,GAAGkC,CAAC,CAAC7B,CAAC,CAACsD,MAAH,CAAV,GAAuB,EAA9B;AAAmC,GAPlE,EAQSf,KART,CAQe,MARf,EAQuB,SARvB;AASH;;AAEM,SAASoC,aAAT,CAAuBhE,IAAvB,EAA6B;AAChCiH,EAAAA,YAAY,CAACjH,IAAD,EAAO,GAAP,EAAY,GAAZ,EAAiB,GAAjB,EAAsB,qBAAtB,EAA6C,QAA7C,CAAZ;AACAiH,EAAAA,YAAY,CAACjH,IAAD,EAAO,GAAP,EAAY,GAAZ,EAAiB,GAAjB,EAAsB,oBAAtB,EAA4C,OAA5C,CAAZ;AACAiH,EAAAA,YAAY,CAACjH,IAAD,EAAO,MAAP,EAAe,GAAf,EAAoB,GAApB,EAAyB,sBAAzB,EAAiD,oBAAjD,CAAZ;AACAiH,EAAAA,YAAY,CAACjH,IAAD,EAAO,EAAP,EAAW,GAAX,EAAgB,GAAhB,EAAqB,sBAArB,EAA6C,iBAA7C,CAAZ;AACH;;AAEM,SAASiE,aAAT,CAAuBjE,IAAvB,EAA6B;AAChC,MAAIf,GAAG,GAAGX,EAAE,CAACC,MAAH,CAAU,oBAAV,EACLW,MADK,CACE,KADF,EAEDC,IAFC,CAEI,QAFJ,EAEc,GAFd,EAGDA,IAHC,CAGI,OAHJ,EAGa,GAHb,EAIDD,MAJC,CAIM,GAJN,EAKGC,IALH,CAKQ,WALR,EAKqB,kBALrB,CAAV;AAOA,MAAIuI,KAAK,GAAG,CAAZ;AACA,MAAMxD,GAAG,GAAG,IAAIC,GAAJ,EAAZ;AACAnE,EAAAA,IAAI,CAACwC,OAAL,CAAa,UAAA4B,IAAI,EAAI;AACjB,QAAMuD,IAAI,GAAGvD,IAAI,CAAC,oBAAD,CAAjB;AACA,QAAMwD,OAAO,GAAGxD,IAAI,CAAC,aAAD,CAApB;AACAsD,IAAAA,KAAK;;AAEL,QAAI,CAACxD,GAAG,CAACK,GAAJ,CAAQoD,IAAR,CAAL,EAAoB;AAChBzD,MAAAA,GAAG,CAACM,GAAJ,CAAQmD,IAAR,EAAc;AACV,gBAAQA,IADE;AAEV,kBAAU,CAFA;AAGV,oBAAY;AAHF,OAAd;AAKH,KAND,MAMO;AACHzD,MAAAA,GAAG,CAACO,GAAJ,CAAQkD,IAAR,EAAcE,MAAd,IAAwB,CAAxB;AACH;;AAED,QAAI,EAAED,OAAO,IAAI1D,GAAG,CAACO,GAAJ,CAAQkD,IAAR,EAAcG,QAA3B,CAAJ,EAA0C;AACtC5D,MAAAA,GAAG,CAACO,GAAJ,CAAQkD,IAAR,EAAcG,QAAd,CAAuBF,OAAvB,IAAkC,CAAlC;AACH,KAFD,MAEO;AACH1D,MAAAA,GAAG,CAACO,GAAJ,CAAQkD,IAAR,EAAcG,QAAd,CAAuBF,OAAvB,KAAmC,CAAnC;AACH;AACJ,GApBD;AAsBA,MAAMG,MAAM,GAAG;AAAC,cAAU,SAAX;AAAsB,iBAAa,SAAnC;AAA8C,eAAW,SAAzD;AAAoE,gBAAY,SAAhF;AAA2F,aAAS,SAApG;AAA+G,uBAAmB,SAAlI;AAA6I,cAAU,SAAvJ;AAAkK,YAAQ;AAA1K,GAAf;AACA,MAAMC,aAAa,GAAG;AAAC,cAAU,SAAX;AAAsB,iBAAa,SAAnC;AAA8C,eAAW,SAAzD;AAAoE,gBAAY,SAAhF;AAA2F,aAAS,SAApG;AAA+G,uBAAmB,SAAlI;AAA6I,cAAU,SAAvJ;AAAkK,YAAQ;AAA1K,GAAtB;AAEA,MAAIC,OAAO,GAAG,EAAd;;AAnCgC,8CAoCf/D,GAAG,CAACgE,OAAJ,EApCe;AAAA;;AAAA;AAoChC,2DAAgC;AAAA,UAAvBP,IAAuB;AAC5B,UAAI1F,CAAC,GAAG,CAAR;;AACA,WAAK,IAAI2F,OAAT,IAAoBD,IAAI,CAAC,CAAD,CAAJ,CAAQG,QAA5B,EAAsC;AAClC,YAAIK,UAAU,GAAGlG,CAAC,GAAG,CAAJ,IAAS,CAAT,GAAa8F,MAAb,GAAsBC,aAAvC;AACA/F,QAAAA,CAAC;AACDhD,QAAAA,GAAG,CAACC,MAAJ,CAAW,MAAX,EACKC,IADL,CACU,OADV,EACmB,GADnB,EAEKA,IAFL,CAEU,QAFV,EAEqBiJ,IAAI,CAACC,IAAL,CAAU,MAAMV,IAAI,CAAC,CAAD,CAAJ,CAAQG,QAAR,CAAiBF,OAAjB,CAAN,GAAgCF,KAA1C,CAFrB,EAGKvI,IAHL,CAGU,WAHV,EAGuB,kBAAkB8I,OAAlB,GAA4B,GAHnD,EAIK9I,IAJL,CAIU,MAJV,EAIkBgJ,UAAU,CAACR,IAAI,CAAC,CAAD,CAAL,CAJ5B;AAKAM,QAAAA,OAAO,IAAIG,IAAI,CAACC,IAAL,CAAU,MAAMV,IAAI,CAAC,CAAD,CAAJ,CAAQG,QAAR,CAAiBF,OAAjB,CAAN,GAAgCF,KAA1C,CAAX;AACH;AACJ;AAhD+B;AAAA;AAAA;AAAA;AAAA;AAiDnC;;;;;;;;;;AC7UM,IAAMY,kBAAkB,GAAG,CAAC,QAAD,EAAW,WAAX,EAAwB,SAAxB,EAAmC,UAAnC,EAA+C,OAA/C,EAAwD,iBAAxD,EAA2E,QAA3E,EAAqF,MAArF,CAA3B;;AACA,IAAMC,WAAW,GAAG,CAAC,QAAD,EAAW,SAAX,EAAsB,qBAAtB,EAA6C,cAA7C,EAA6D,WAA7D,EAA0E,SAA1E,EAAqF,QAArF,EAA+F,qBAA/F,EAAsH,qBAAtH,CAApB;;AACA,IAAMC,YAAY,GAAG,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,EAA6C,SAA7C,EAAwD,SAAxD,EAAmE,SAAnE,EAA8E,SAA9E,EAAyF,SAAzF,CAArB;;AACA,IAAMC,eAAe,GAAG,CAAC,QAAD,EAAW,SAAX,EAAsB,qBAAtB,EAA6C,cAA7C,EAA6D,WAA7D,EAA0E,SAA1E,EAAqF,QAArF,EAA+F,oBAA/F,EAAqH,qBAArH,CAAxB;;;AAEP,SAASC,oBAAT,CAA8BC,UAA9B,EAA0C;AACxC,MAAI,CAAC,kBAAD,EAAqB,gBAArB,EAAsC,aAAtC,EAAoD,eAApD,EAAoE,eAApE,EAAoF,WAApF,EAAgG,qBAAhG,EAAsH,wBAAtH,EAAgJ,qBAAhJ,EAAuK,oBAAvK,EAA4L,sBAA5L,EAAmN,aAAnN,EAAiO,WAAjO,EAA6O,eAA7O,EAA6P,mBAA7P,EAAkRtF,QAAlR,CAA2RsF,UAA3R,CAAJ,EAA4S;AAC1S,WAAO,QAAP;AACD,GAFD,MAEO,IAAI,CAAC,qBAAD,EAAwBtF,QAAxB,CAAiCsF,UAAjC,CAAJ,EAAkD;AACvD,WAAO,WAAP;AACD,GAFM,MAEA,IAAI,CAAC,WAAD,EAAc,+BAAd,EAA+C,cAA/C,EAA+D,gBAA/D,EAAiF,gBAAjF,EAAmG,YAAnG,EAAiH,6BAAjH,EAAgJ,cAAhJ,EAAgK,WAAhK,EAA6K,+BAA7K,EAA8M,QAA9M,EAAwN,aAAxN,EAAuO,SAAvO,EAAkP,SAAlP,EAA6PtF,QAA7P,CAAsQsF,UAAtQ,CAAJ,EAAuR;AAC5R,WAAO,SAAP;AACD,GAFM,MAEA,IAAI,CAAC,QAAD,EAAW,gBAAX,EAA6B,eAA7B,EAA8C,eAA9C,EAA+D,iBAA/D,EAAkF,kBAAlF,EAAsG,oBAAtG,EAA4H,gBAA5H,EAA8I,kBAA9I,EAAkK,eAAlK,EAAmL,oBAAnL,EAAyM,cAAzM,EAAyN,oBAAzN,EAA+O,6BAA/O,EAA8Q,iBAA9Q,EAAiS,gBAAjS,EAAmTtF,QAAnT,CAA4TsF,UAA5T,CAAJ,EAA6U;AAClV,WAAO,UAAP;AACD,GAFM,MAEA,IAAI,CAAC,yBAAD,EAA4B,aAA5B,EAA2C,aAA3C,EAA0DtF,QAA1D,CAAmEsF,UAAnE,CAAJ,EAAoF;AACzF,WAAO,iBAAP;AACD,GAFM,MAEA,IAAG,CAAC,mBAAD,EAAsB,mBAAtB,EAA2C,uCAA3C,EAAmF,gBAAnF,EAAoG,mBAApG,EAAwH,wBAAxH,EAAiJ,mBAAjJ,EAAqK,uBAArK,EAA6L,uBAA7L,EAAqN,eAArN,EAAqO,eAArO,EAAqP,gBAArP,EAAuQtF,QAAvQ,CAAgRsF,UAAhR,CAAH,EAAgS;AACrS,WAAO,QAAP;AACD,GAFM,MAEA,IAAI,CAAC,KAAD,EAAQ,UAAR,EAAoB,aAApB,EAAmC,WAAnC,EAAgD,YAAhD,EAA8D,eAA9D,EAA+EtF,QAA/E,CAAwFsF,UAAxF,CAAJ,EAAyG;AAC9G,WAAO,MAAP;AACD,GAFM,MAEA;AACL,WAAO,OAAP;AACD;AACF;;AAEM,SAASC,KAAT,CAAe5I,IAAf,EAAqB;AAC1B,MAAM6I,SAAS,GAAG,EAAlB;AACA7I,EAAAA,IAAI,CAACwC,OAAL,CAAa,UAAAsG,OAAO,EAAI;AACtB,QAAIA,OAAO,CAAC,QAAD,CAAP,IAAqB,CAArB,IACAA,OAAO,CAAC,OAAD,CAAP,IAAoB,CAApB,GACAA,OAAO,CAAC,iBAAD,CAAP,GAA6B,EAF7B,IAGAA,OAAO,CAAC,gBAAD,CAAP,GAA4B,CAAC,cAAD,CAHhC,EAGkD;AAChDD,MAAAA,SAAS,CAACE,IAAV,CAAe;AACb,wBAAgBD,OAAO,CAAC,cAAD,CAAP,CAAwB7F,SAAxB,CAAkC,CAAlC,EAAoC,EAApC,CADH;AAEb,2BAAmB6F,OAAO,CAAC,iBAAD,CAFb;AAGb,0BAAkBA,OAAO,CAAC,gBAAD,CAHZ;AAIb,8BAAsBA,OAAO,CAAC,oBAAD,CAJhB;AAKb,0BAAkBA,OAAO,CAAC,gBAAD,CAAP,CAA0B7F,SAA1B,CAAoC,CAApC,EAAuC,EAAvC,CALL;AAMb,6BAAqB6F,OAAO,CAAC,mBAAD,CANf;AAOb,4BAAoBA,OAAO,CAAC,kBAAD,CAPd;AAQb,kBAAUA,OAAO,CAAC,QAAD,CARJ;AASb,2BAAmBA,OAAO,CAAC,iBAAD,CATb;AAUb,uBAAeA,OAAO,CAAC,aAAD,CAVT;AAWb,8BAAsBJ,oBAAoB,CAACI,OAAO,CAAC,aAAD,CAAR,CAX7B;AAYb,iBAASA,OAAO,CAAC,OAAD;AAZH,OAAf;AAcD;AACF,GApBD;AAsBA,SAAOD,SAAP;AACD;;AAEM,SAASG,WAAT,CAAqBhJ,IAArB,EAA2BiF,aAA3B,EAA0CG,WAA1C,EAAuD;AAC5D,MAAM6D,MAAM,GAAG,IAAItE,KAAJ,CAAU4D,WAAW,CAAC5F,MAAtB,CAAf;;AACA,OAAK,IAAID,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGuG,MAAM,CAACtG,MAAnC,EAA2CD,KAAK,EAAhD,EAAoD;AAClDuG,IAAAA,MAAM,CAACvG,KAAD,CAAN,GAAgB,IAAIiC,KAAJ,CAAU4D,WAAW,CAAC5F,MAAtB,CAAhB;AACD;;AAED4F,EAAAA,WAAW,CAAC/F,OAAZ,CAAoB,UAAC0G,eAAD,EAAkBjH,CAAlB,EAAwB;AAC1CsG,IAAAA,WAAW,CAAC/F,OAAZ,CAAoB,UAAC2G,aAAD,EAAgBC,CAAhB,EAAsB;AACxCH,MAAAA,MAAM,CAAChH,CAAD,CAAN,CAAUmH,CAAV,IAAepJ,IAAI,CAChBkG,MADY,CACL,UAAC7G,CAAD,EAAO;AACb,eAAO6J,eAAe,KAAK7J,CAAC,CAAC,kBAAD,CAAD,CAAsBc,KAAtB,CAA4B,CAA5B,EAA8B,CAAC,CAA/B,CAApB,IACFgJ,aAAa,KAAK9J,CAAC,CAAC,gBAAD,CAAD,CAAoBc,KAApB,CAA0B,CAA1B,EAA4B,CAAC,CAA7B,CADhB,IAEF8E,aAAa,IAAI5F,CAAC,CAAC,gBAAD,CAFhB,IAGF+F,WAAW,IAAI/F,CAAC,CAAC,cAAD,CAHrB;AAID,OANY,EAOZ6E,GAPY,CAOR,UAACmD,KAAD;AAAA,eAAWA,KAAK,CAACgC,KAAjB;AAAA,OAPQ,EAQZC,MARY,CAQL,UAACC,UAAD,EAAaC,CAAb;AAAA,eAAmBC,MAAM,CAACF,UAAD,CAAN,GAAqBE,MAAM,CAACD,CAAD,CAA9C;AAAA,OARK,EAQ8C,CAR9C,CAAf;AASD,KAVD;AAWD,GAZD;AAcA,SAAOP,MAAP;AACD;;;;;;;;;ACzED;;;;;;AAEO,SAAS9K,KAAT,CAAeC,GAAf,EAAoB;AACzBsL,EAAAA,YAAY,CAACtL,GAAD,CAAZ;AACD,EAED;;;AACA,SAASsL,YAAT,CAAsBtL,GAAtB,EAA2B;AACzB;AAEA;AACA,MAAMM,MAAM,GAAG;AAACC,IAAAA,GAAG,EAAE,EAAN;AAAUC,IAAAA,KAAK,EAAE,CAAjB;AAAoBC,IAAAA,MAAM,EAAE,EAA5B;AAAgCC,IAAAA,IAAI,EAAE;AAAtC,GAAf;AAAA,MACEC,KAAK,GAAG,MAAML,MAAM,CAACI,IAAb,GAAoBJ,MAAM,CAACE,KADrC;AAAA,MAEEI,MAAM,GAAG,MAAMN,MAAM,CAACC,GAAb,GAAmBD,MAAM,CAACG,MAFrC,CAJyB,CAQzB;;AACA,MAAMI,GAAG,GAAGb,GAAG,CAACG,MAAJ,CAAW,gBAAX,EACXW,MADW,CACJ,KADI,EAETC,IAFS,CAEJ,OAFI,EAEKJ,KAAK,GAAGL,MAAM,CAACI,IAAf,GAAsBJ,MAAM,CAACE,KAA7B,GAAqC,EAF1C,EAGTO,IAHS,CAGJ,QAHI,EAGMH,MAAM,GAAGN,MAAM,CAACC,GAAhB,GAAsBD,MAAM,CAACG,MAHnC,EAIXK,MAJW,CAIJ,GAJI,EAKTC,IALS,CAKJ,WALI,sBAKsBT,MAAM,CAACI,IAL7B,cAKqCJ,MAAM,CAACC,GAL5C,OAAZ,CATyB,CAgBzB;;AACA,MAAMgL,QAAQ,GAAGC,OAAO,CAACtB,kBAAzB;AACA,MAAMuB,MAAM,GAAGD,OAAO,CAACrB,WAAvB,CAlByB,CAoBzB;;AACA,MAAM5H,CAAC,GAAGrC,EAAE,CAACuH,SAAH,GACPtF,KADO,CACD,CAAE,CAAF,EAAKxB,KAAL,CADC,EAEPuB,MAFO,CAEAqJ,QAFA,EAGP7D,OAHO,CAGC,IAHD,CAAV;AAKA7G,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EACGC,IADH,CACQ,WADR,yBACqCH,MADrC,QAEG8B,IAFH,CAEQxC,EAAE,CAACyC,UAAH,CAAcJ,CAAd,CAFR,EAGGc,SAHH,CAGa,MAHb,EAIGtC,IAJH,CAIQ,WAJR,EAIqB,8BAJrB,EA1ByB,CAgCzB;;AACA,MAAM+B,CAAC,GAAG5C,EAAE,CAACuH,SAAH,GACPtF,KADO,CACD,CAAEvB,MAAF,EAAU,CAAV,CADC,EAEPsB,MAFO,CAEAuJ,MAFA,EAGP/D,OAHO,CAGC,IAHD,CAAV;AAIA7G,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EACG4B,IADH,CACQxC,EAAE,CAAC8C,QAAH,CAAYF,CAAZ,CADR,EArCyB,CAwCzB;;AACA,MAAM4I,OAAO,GAAGxL,EAAE,CAAC6C,WAAH,GACbZ,KADa,CACP,CAAC,OAAD,EAAU,SAAV,CADO,EAEbD,MAFa,CAEN,CAAC,CAAD,EAAG,EAAH,CAFM,CAAhB,CAzCyB,CA2CP;;AAGlB,WAASyJ,aAAT,CAAuB1K,CAAvB,EAA0B4F,aAA1B,EAAyCG,WAAzC,EAAsD;AACpD,QAAIlB,GAAG,GAAG8F,UAAU,EAApB;AAEA,QAAMhK,IAAI,GAAGX,CAAC,CAAC6G,MAAF,CAAS,UAAC9B,IAAD,EAAU;AAC9B,aAAOa,aAAa,IAAIb,IAAI,CAAC,gBAAD,CAArB,IAA2CgB,WAAW,IAAIhB,IAAI,CAAC,cAAD,CAArE;AACD,KAFY,CAAb;AAIApE,IAAAA,IAAI,CAACwC,OAAL,CAAa,UAAA4B,IAAI,EAAI;AACnB;AAEA,UAAM6F,QAAQ,GAAG7F,IAAI,CAAC,kBAAD,CAAJ,GAAyBA,IAAI,CAAC,oBAAD,CAA9C;AACA,UAAM8F,OAAO,GAAG9F,IAAI,CAAC,gBAAD,CAAJ,GAAuBA,IAAI,CAAC,oBAAD,CAA3C;;AACA,UAAI,CAACF,GAAG,CAACK,GAAJ,CAAQ0F,QAAR,CAAL,EAAwB;AACtB/F,QAAAA,GAAG,CAACM,GAAJ,CAAQyF,QAAR,EAAkB;AAChB,oBAAU7F,IAAI,CAAC,kBAAD,CAAJ,CAAyBjE,KAAzB,CAA+B,CAA/B,EAAiC,CAAC,CAAlC,CADM;AAEhB,kBAAQiE,IAAI,CAAC,oBAAD,CAFI;AAGhB,mBAAS;AAHO,SAAlB;AAKD,OAND,MAMO;AACL,YAAM+F,OAAO,GAAGjG,GAAG,CAACO,GAAJ,CAAQwF,QAAR,CAAhB;AACAE,QAAAA,OAAO,CAACd,KAAR,IAAiB,CAAjB;AACAnF,QAAAA,GAAG,CAACM,GAAJ,CAAQyF,QAAR,EAAkBE,OAAlB;AACD;;AACD,UAAI,CAACjG,GAAG,CAACK,GAAJ,CAAQ2F,OAAR,CAAL,EAAuB;AACrBhG,QAAAA,GAAG,CAACM,GAAJ,CAAQ0F,OAAR,EAAiB;AACf,oBAAU9F,IAAI,CAAC,gBAAD,CAAJ,CAAuBjE,KAAvB,CAA6B,CAA7B,EAA+B,CAAC,CAAhC,CADK;AAEf,kBAAQiE,IAAI,CAAC,oBAAD,CAFG;AAGf,mBAAS;AAHM,SAAjB;AAKD,OAND,MAMO;AACL,YAAM+F,QAAO,GAAGjG,GAAG,CAACO,GAAJ,CAAQyF,OAAR,CAAhB;;AACAC,QAAAA,QAAO,CAACd,KAAR,IAAiB,CAAjB;AACAnF,QAAAA,GAAG,CAACM,GAAJ,CAAQ0F,OAAR,EAAiBC,QAAjB;AACD;AACF,KA3BD;AA6BA,QAAMC,CAAC,GAAG,EAAV;AACA,QAAIpE,GAAG,GAAG,CAAV;AACArB,IAAAA,KAAK,CAACC,IAAN,CAAWV,GAAG,CAACW,MAAJ,EAAX,EAAyBrC,OAAzB,CAAiC,UAAC6E,KAAD,EAAW;AAC1C+C,MAAAA,CAAC,CAACrB,IAAF,CAAO;AACL,kBAAU1B,KAAK,CAACgD,MADX;AAEL,gBAAQhD,KAAK,CAACiD,IAFT;AAGL,iBAAWjD,KAAK,CAACgC,KAAN,IAAe,IAAErJ,IAAI,CAAC2C,MAAtB,CAAD,GAAkC;AAHvC,OAAP;;AAKA,UAAK0E,KAAK,CAACgC,KAAN,IAAe,IAAErJ,IAAI,CAAC2C,MAAtB,CAAD,GAAkC,GAAlC,IAAyCqD,GAA7C,EAAkD;AAChDA,QAAAA,GAAG,GAAIqB,KAAK,CAACgC,KAAN,IAAe,IAAErJ,IAAI,CAAC2C,MAAtB,CAAD,GAAkC,GAAxC;AACD;AACF,KATD;AAUAmH,IAAAA,OAAO,CAACxJ,MAAR,CAAe,CAAC,CAAD,EAAG0F,GAAH,CAAf;AAEA,WAAOoE,CAAP;AACD,GAjGwB,CAmGzB;;;AACA9L,EAAAA,EAAE,CAACc,GAAH,CAAO,oBAAP,EAA6BW,IAA7B,CAAmC,UAASC,IAAT,EAAe;AAChD;AACA,QAAMuK,eAAe,GAAGR,aAAa,CAAC/J,IAAD,EAAO,YAAP,EAAqB,YAArB,CAArC;AACAf,IAAAA,GAAG,CAACwC,SAAJ,GACCzB,IADD,CACMuK,eADN,EACuB,UAASlL,CAAT,EAAY;AACjC,aAAOA,CAAC,CAACiL,IAAF,GAAO,GAAP,GAAWjL,CAAC,CAACgL,MAApB;AACD,KAHD,EAIC3I,KAJD,GAKCxC,MALD,CAKQ,GALR,EAMCC,IAND,CAMM,OANN,EAMe,QANf,EAOC+C,EAPD,CAOI,YAPJ,EAOkB,YAAW;AAAEsI,MAAAA,UAAU,CAAC,IAAD,EAAO7J,CAAP,EAAUO,CAAV,CAAV;AAAwB,KAPvD,EAQCgB,EARD,CAQI,YARJ,EAQkB,YAAW;AAAEuI,MAAAA,YAAY,CAAC,IAAD,CAAZ;AAAoB,KARnD,EASCvL,MATD,CASQ,MATR,EAUGC,IAVH,CAUQ,GAVR,EAUa,UAASE,CAAT,EAAY;AAAE,aAAOsB,CAAC,CAACtB,CAAC,CAACiL,IAAH,CAAR;AAAkB,KAV7C,EAWGnL,IAXH,CAWQ,GAXR,EAWa,UAASE,CAAT,EAAY;AAAE,aAAO6B,CAAC,CAAC7B,CAAC,CAACgL,MAAH,CAAR;AAAoB,KAX/C,EAYGlL,IAZH,CAYQ,OAZR,EAYiBwB,CAAC,CAAC+J,SAAF,EAZjB,EAaGvL,IAbH,CAaQ,QAbR,EAakB+B,CAAC,CAACwJ,SAAF,EAblB,EAcG9I,KAdH,CAcS,MAdT,EAciB,UAASvC,CAAT,EAAY;AAAE,aAAOyK,OAAO,CAACzK,CAAC,CAACgK,KAAH,CAAd;AAAyB,KAdxD;AAgBEsB,IAAAA,UAAU,CAAC1L,GAAD,EAAK6K,OAAL,CAAV;AACAc,IAAAA,UAAU,CAAC7L,KAAK,GAAGL,MAAM,CAACE,KAAf,GAAuB,EAAxB,EAA4B,CAA5B,EAA+BI,MAA/B,EAAuC,EAAvC,EAA2C,gBAA3C,EAA6D8K,OAA7D,CAAV;AACH,GArBD;AAsBD;;AAED,SAASE,UAAT,GAAsB;AACpB,MAAI9F,GAAG,GAAG,IAAIC,GAAJ,EAAV;AAEAyF,EAAAA,OAAO,CAACrB,WAAR,CAAoB/F,OAApB,CAA4B,UAACqI,MAAD,EAAY;AACtCjB,IAAAA,OAAO,CAACtB,kBAAR,CAA2B9F,OAA3B,CAAmC,UAACmF,IAAD,EAAU;AAC3C,UAAMhG,GAAG,GAAGkJ,MAAM,GAAGlD,IAArB;AACAzD,MAAAA,GAAG,CAACM,GAAJ,CAAQ7C,GAAR,EAAa;AACX,kBAAUkJ,MADC;AAEX,gBAAQlD,IAFG;AAGX,iBAAS;AAHE,OAAb;AAKD,KAPD;AAQD,GATD;AAUA,SAAOzD,GAAP;AACD;;AAED,SAASsG,UAAT,CAAoB1B,OAApB,EAA6BnI,CAA7B,EAAgCO,CAAhC,EAAmC;AACjC5C,EAAAA,EAAE,CAACC,MAAH,CAAUuK,OAAV,EACG5J,MADH,CACU,MADV,EAEGC,IAFH,CAEQ,GAFR,EAEa,UAASE,CAAT,EAAY;AAAE,WAAOsB,CAAC,CAACtB,CAAC,CAACiL,IAAH,CAAD,GAAY3J,CAAC,CAAC+J,SAAF,KAAgB,CAAnC;AAAuC,GAFlE,EAGGvL,IAHH,CAGQ,GAHR,EAGa,UAASE,CAAT,EAAY;AAAE,WAAO6B,CAAC,CAAC7B,CAAC,CAACgL,MAAH,CAAD,GAAcnJ,CAAC,CAACwJ,SAAF,KAAgB,CAArC;AAAyC,GAHpE,EAIGvL,IAJH,CAIQ,aAJR,EAIuB,QAJvB,EAKGA,IALH,CAKQ,mBALR,EAK6B,QAL7B,EAMG8B,IANH,CAMQ,UAAS5B,CAAT,EAAY;AAChB,WAAOA,CAAC,CAACgK,KAAF,CAAQyB,OAAR,CAAgB,CAAhB,IAAqB,GAA5B;AACD,GARH;AASD;;AAED,SAASL,YAAT,CAAsB3B,OAAtB,EAA+B;AAC7BxK,EAAAA,EAAE,CAACC,MAAH,CAAUuK,OAAV,EACGvK,MADH,CACU,MADV,EAEGwM,MAFH;AAGD;;AAED,SAASJ,UAAT,CAAoB1L,GAApB,EAAyB+L,UAAzB,EAAqC;AACnC,MAAMC,IAAI,GAAGhM,GAAG,CAACC,MAAJ,CAAW,MAAX,CAAb;AACAD,EAAAA,GAAG,CAACC,MAAJ,CAAW,MAAX,EAAmBC,IAAnB,CAAwB,OAAxB,EAAiC,YAAjC;AACAF,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,OAArB,EAA8B,aAA9B;AAEA,MAAM+L,cAAc,GAAGD,IAAI,CAC1B/L,MADsB,CACf,gBADe,EAEtBC,IAFsB,CAEjB,IAFiB,EAEX,UAFW,EAGtBA,IAHsB,CAGjB,IAHiB,EAGX,CAHW,EAGRA,IAHQ,CAGH,IAHG,EAGG,CAHH,EAGMA,IAHN,CAGW,IAHX,EAGiB,CAHjB,EAGoBA,IAHpB,CAGyB,IAHzB,EAG+B,CAH/B,CAAvB;AAKA+L,EAAAA,cAAc,CAACzJ,SAAf,CAAyB,MAAzB,EACCzB,IADD,CACMgL,UAAU,CAAChK,KAAX,GAAmBkD,GAAnB,CAAuB,UAACiH,IAAD,EAAOlJ,CAAP,EAAUmJ,KAAV;AAAA,WAC3B;AACEC,MAAAA,MAAM,YAAO,MAAIpJ,CAAJ,GAAQmJ,KAAK,CAACzI,MAArB,MADR;AAEEvC,MAAAA,KAAK,EAAE4K,UAAU,CAACG,IAAD;AAFnB,KAD2B;AAAA,GAAvB,CADN,EAMChI,IAND,CAMM,MANN,EAOChE,IAPD,CAOM,QAPN,EAOgB,UAAAE,CAAC;AAAA,WAAIA,CAAC,CAACgM,MAAN;AAAA,GAPjB,EAQClM,IARD,CAQM,YARN,EAQoB,UAAAE,CAAC;AAAA,WAAIA,CAAC,CAACe,KAAN;AAAA,GARrB;AASD;;AAED,SAASwK,UAAT,CAAoBjK,CAApB,EAAuBO,CAAvB,EAA0BlC,MAA1B,EAAkCD,KAAlC,EAAyCuM,IAAzC,EAA+CN,UAA/C,EAA2D;AACzD1M,EAAAA,EAAE,CAACC,MAAH,CAAU,aAAV,EACGY,IADH,CACQ,MADR,EACgBmM,IADhB,EAEGnM,IAFH,CAEQ,GAFR,EAEawB,CAFb,EAGGxB,IAHH,CAGQ,GAHR,EAGa+B,CAHb,EAIG/B,IAJH,CAIQ,QAJR,EAIkBH,MAJlB,EAKGG,IALH,CAKQ,OALR,EAKiBJ,KALjB;AAOA,MAAMwM,KAAK,GAAGjN,EAAE,CAAC6C,WAAH,GACbb,MADa,CACN0K,UAAU,CAAC1K,MAAX,EADM,EAEbC,KAFa,CAEP,CAACvB,MAAD,EAAS,CAAT,CAFO,CAAd;AAIA,MAAIwM,IAAI,GAAGlN,EAAE,CAACmN,SAAH,GACVzK,KADU,CACJ,CADI,EAEVuK,KAFU,CAEJA,KAFI,CAAX;AAIAjN,EAAAA,EAAE,CAACC,MAAH,CAAU,cAAV,EACCuC,IADD,CACM0K,IADN,EAECrM,IAFD,CAEM,WAFN,EAEmB,gBAAewB,CAAC,GAAC,EAAjB,IAAuB,GAAvB,GAA6BO,CAA7B,GAAiC,GAFpD;AAGD;;;;;;;;;AC7MD;;;;;;AAEA;AACA;AACA;AACA;AACO,SAAS/C,KAAT,CAAeC,GAAf,EAAoB4B,IAApB,EAA0B;AAC/B;AACA,MAAM3B,MAAM,GAAGC,EAAE,CAACC,MAAH,CAAU,qBAAV,EAAiCC,IAAjC,GAAwCC,qBAAxC,EAAf;AACA,MAAIiN,UAAU,GAAGC,MAAM,CAAC5M,KAAP,GAAa,CAA9B;AACA6M,EAAAA,OAAO,CAACC,GAAR,CAAYH,UAAZ;AACA,MAAIhN,MAAM,GAAG;AACXC,IAAAA,GAAG,EAAE+M,UAAU,GAAC,IADL;AAEX9M,IAAAA,KAAK,EAAE8M,UAAU,GAAC,IAFP;AAGX7M,IAAAA,MAAM,EAAE6M,UAAU,GAAC,IAHR;AAIX5M,IAAAA,IAAI,EAAE4M,UAAU,GAAC;AAJN,GAAb;AAAA,MAI2B;AAC3B3M,EAAAA,KAAK,GAAG2M,UAAU,GAAGhN,MAAM,CAACI,IAApB,GAA2BJ,MAAM,CAACE,KAL1C;AAAA,MAMAI,MAAM,GAAG0M,UAAU,GAAGhN,MAAM,CAACC,GAApB,GAA0BD,MAAM,CAACG,MAN1C,CAL+B,CAa/B;AACA;;AACA,MAAMiN,WAAW,GAAG/M,KAAK,GAAC,GAA1B;AACA,MAAMgN,WAAW,GAAGD,WAAW,GAAC,EAAhC,CAhB+B,CAiB/B;;AACA,MAAM7M,GAAG,GAAGb,GAAG,CAACG,MAAJ,CAAW,sBAAX,EACXW,MADW,CACJ,KADI,EAETC,IAFS,CAEJ,OAFI,EAEKJ,KAAK,GAAGL,MAAM,CAACI,IAAf,GAAsBJ,MAAM,CAACE,KAFlC,EAGTO,IAHS,CAGJ,QAHI,EAGMH,MAAM,GAAGN,MAAM,CAACC,GAAhB,GAAsBD,MAAM,CAACG,MAHnC,EAIXK,MAJW,CAIJ,GAJI,EAKTC,IALS,CAKJ,WALI,EAKS,gBAAgBT,MAAM,CAACI,IAAP,GAAYgN,WAA5B,IAA2C,GAA3C,IAAkDpN,MAAM,CAACC,GAAP,GAAWmN,WAA7D,IAA4E,GALrF,CAAZ,CAlB+B,CAyB/B;;AACA,MAAM7C,MAAM,GAAGW,OAAO,CAACZ,WAAR,CAAoBhJ,IAApB,EAA0B,YAA1B,EAAwC,YAAxC,CAAf;AAEA,MAAM+H,MAAM,GAAG6B,OAAO,CAACpB,YAAvB,CA5B+B,CA8B/B;;AACA,MAAMwD,GAAG,GAAG1N,EAAE,CAAC2N,KAAH,GACTC,QADS,CACA,IADA,EACU;AADV,GAETC,aAFS,CAEK7N,EAAE,CAAC8N,UAFR,EAGTnD,MAHS,CAAZ;AAIA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE;;AACA,MAAMoD,KAAK,GAAGpN,GAAG,CAChBqN,KADa,CACPN,GADO,EAEb9M,MAFa,CAEN,GAFM,EAGbC,IAHa,CAGR,IAHQ,EAGF,OAHE,EAIbsC,SAJa,CAIH,MAJG,EAKbzB,IALa,CAKR,UAASX,CAAT,EAAY;AAAE,WAAOA,CAAP;AAAW,GALjB,EAMbqC,KANa,GAObxC,MAPa,CAON,MAPM,EAQXC,IARW,CAQN,OARM,EAQG,OARH,EASX+C,EATW,CASR,YATQ,EASM,gBAA2BF,CAA3B,EAA8B;AAAA,QAApBuK,MAAoB,QAApBA,MAAoB;AAAA,QAAZC,MAAY,QAAZA,MAAY;AAC9C,QAAMC,OAAO,GAAGnO,EAAE,CAACC,MAAH,YAAcqL,OAAO,CAACnB,eAAR,CAAwB8D,MAAM,CAAC7J,KAA/B,CAAd,SAAsDkH,OAAO,CAACnB,eAAR,CAAwB8D,MAAM,CAACG,QAA/B,CAAtD,EAAhB;AACA,WAAOD,OAAO,CAAC7K,KAAR,CAAc,YAAd,EAA4B,SAA5B,CAAP;AACD,GAZW,EAaXM,EAbW,CAaR,YAbQ,EAaM,iBAA2BF,CAA3B,EAA8B;AAAA,QAApBuK,MAAoB,SAApBA,MAAoB;AAAA,QAAZC,MAAY,SAAZA,MAAY;AAC9C,QAAMC,OAAO,GAAGnO,EAAE,CAACC,MAAH,YAAcqL,OAAO,CAACnB,eAAR,CAAwB8D,MAAM,CAAC7J,KAA/B,CAAd,SAAsDkH,OAAO,CAACnB,eAAR,CAAwB8D,MAAM,CAACG,QAA/B,CAAtD,EAAhB;AACA,WAAOD,OAAO,CAAC7K,KAAR,CAAc,YAAd,EAA4B,QAA5B,CAAP;AACD,GAhBW,EAiBXzC,IAjBW,CAiBN,GAjBM,EAiBDb,EAAE,CAACqO,MAAH,GACRC,MADQ,CACDb,WADC,CAjBC,EAoBXnK,KApBW,CAoBL,MApBK,EAoBG,UAASvC,CAAT,EAAW;AAAE,WAAO0I,MAAM,CAAC1I,CAAC,CAACkN,MAAF,CAAS7J,KAAV,CAAb;AAAgC,GApBhD,EAoBkD;AApBlD,GAqBXd,KArBW,CAqBL,QArBK,EAqBK,OArBL,EAsBXzC,IAtBW,CAsBN,SAtBM,EAsBK,GAtBL,CAAd;AAwBA,MAAM0N,QAAQ,GAAG5N,GAAG,CACjBqN,KADc,CACRN,GADQ,EAEd9M,MAFc,CAEP,GAFO,EAGdC,IAHc,CAGT,IAHS,EAGJ,SAHI,EAIdsC,SAJc,CAIJ,MAJI,EAKdzB,IALc,CAKT,UAASX,CAAT,EAAY;AAAE,WAAOA,CAAP;AAAW,GALhB,EAMdqC,KANc,GAOdxC,MAPc,CAOP,MAPO,EAQZC,IARY,CAQP,IARO,EAQF,UAASE,CAAT,EAAY;AACrB,qBAAWuK,OAAO,CAACnB,eAAR,CAAwBpJ,CAAC,CAACkN,MAAF,CAAS7J,KAAjC,CAAX,SAAqDkH,OAAO,CAACnB,eAAR,CAAwBpJ,CAAC,CAACkN,MAAF,CAASG,QAAjC,CAArD;AAAoG,GATzF,EAUZvN,IAVY,CAUP,OAVO,EAUE,SAVF,EAWZA,IAXY,CAWP,GAXO,EAWH,CAXG,EAYZA,IAZY,CAYP,GAZO,EAYH2M,WAAW,GAAC,EAZT,EAaZ3M,IAbY,CAaP,aAbO,EAaQ,QAbR,EAcZA,IAdY,CAcP,mBAdO,EAcc,QAdd,EAeZ8B,IAfY,CAeP,UAAS5B,CAAT,EAAY;AAChB,qBAAUuK,OAAO,CAACrB,WAAR,CAAoBlJ,CAAC,CAACkN,MAAF,CAAS7J,KAA7B,CAAV,kBAAqDkH,OAAO,CAACrB,WAAR,CAAoBlJ,CAAC,CAACkN,MAAF,CAASG,QAA7B,CAArD,gBAAiGrN,CAAC,CAACkN,MAAF,CAASlF,KAA1G;AACD,GAjBY,EAkBZzF,KAlBY,CAkBN,YAlBM,EAkBQ,QAlBR,CAAjB,CArE+B,CAyF/B;;AACA3C,EAAAA,GAAG,CAACqN,KAAJ,CAAUN,GAAV,EACG9M,MADH,CACU,GADV,EAEGC,IAFH,CAEQ,IAFR,EAEc,QAFd,EAGGsC,SAHH,CAGa,GAHb,EAIGzB,IAJH,CAIQ,UAASX,CAAT,EAAY;AAAE,WAAOA,CAAC,CAACyN,MAAT;AAAkB,GAJxC,EAKGpL,KALH,GAMGxC,MANH,CAMU,GANV,EAOGC,IAPH,CAOQ,OAPR,EAOiB,OAPjB,EAQGD,MARH,CAQU,MARV,EASK0C,KATL,CASW,MATX,EASmB,UAASI,CAAT,EAAWC,CAAX,EAAa;AAAE,WAAO8F,MAAM,CAAC9F,CAAD,CAAb;AAAkB,GATpD,EAUKL,KAVL,CAUW,QAVX,EAUqB,OAVrB,EAWKzC,IAXL,CAWU,GAXV,EAWeb,EAAE,CAACyO,GAAH,GACRhB,WADQ,CACIA,WADJ,EAERD,WAFQ,CAEIA,WAFJ,CAXf,EAeK5J,EAfL,CAeQ,WAfR,EAeqB,UAAS8K,KAAT,EAAgBhL,CAAhB,EAAmB;AAClC4J,IAAAA,OAAO,CAACC,GAAR,qBAAsBjC,OAAO,CAACrB,WAAR,CAAoByE,KAAK,CAACtK,KAA1B,CAAtB,eAA2DsK,KAAK,CAAC3F,KAAjE;AACA4F,IAAAA,cAAc,CAACD,KAAD,EAAQX,KAAR,CAAd;AACD,GAlBL,EAmBKnK,EAnBL,CAmBQ,YAnBR,EAmBsB,YAAW;AAC3BgL,IAAAA,gBAAgB,CAACb,KAAD,CAAhB;AACD,GArBL,EA1F+B,CAiH/B;;AACApN,EAAAA,GAAG,CAACqN,KAAJ,CAAUN,GAAV,EACG9M,MADH,CACU,GADV,EAEGC,IAFH,CAEQ,IAFR,EAEc,QAFd,EAGGsC,SAHH,CAGa,MAHb,EAIGzB,IAJH,CAIQ,UAASX,CAAT,EAAY;AAAE,WAAOA,CAAC,CAACyN,MAAT;AAAkB,GAJxC,EAKGpL,KALH,GAMGxC,MANH,CAMU,GANV,EAOGC,IAPH,CAOQ,WAPR,EAOqB,UAASE,CAAT,EAAY;AAAE,WAAO,aAAaA,CAAC,CAAC8N,UAAF,GAAe,GAAf,GAAqB/E,IAAI,CAACgF,EAA1B,GAA+B,EAA5C,IAAkD,cAAlD,GAAmEtB,WAAnE,GAAiF,KAAxF;AAAgG,GAPnI,EAOsI;AAPtI,GAQG5M,MARH,CAQU,MARV,EASGC,IATH,CASQ,GATR,EASa,CATb,EAUGA,IAVH,CAUQ,IAVR,EAUc,OAVd,EAWGA,IAXH,CAWQ,WAXR,EAWqB,UAASE,CAAT,EAAY;AAAE,WAAOA,CAAC,CAAC8N,UAAF,GAAe/E,IAAI,CAACgF,EAApB,GAAyB,4BAAzB,GAAwD,IAA/D;AAAsE,GAXzG,EAYGxL,KAZH,CAYS,aAZT,EAYwB,UAASvC,CAAT,EAAY;AAAE,WAAOA,CAAC,CAAC8N,UAAF,GAAe/E,IAAI,CAACgF,EAApB,GAAyB,KAAzB,GAAiC,IAAxC;AAA+C,GAZrF,EAaGxL,KAbH,CAaS,MAbT,EAaiB,UAASI,CAAT,EAAYC,CAAZ,EAAc;AAAE,WAAO8F,MAAM,CAAC9F,CAAD,CAAb;AAAmB,GAbpD,EAcGL,KAdH,CAcS,aAdT,EAcwB,MAdxB,EAeGA,KAfH,CAeS,WAfT,EAeqB,EAfrB,EAgBGX,IAhBH,CAgBQ,UAAS5B,CAAT,EAAY;AAChB,QAAIA,CAAC,CAACqD,KAAF,IAAW,CAAX,IAAgBrD,CAAC,CAACqD,KAAF,IAAW,CAA/B,EAAkC;AAChC,aAAOkH,OAAO,CAACrB,WAAR,CAAoBlJ,CAAC,CAACqD,KAAtB,CAAP;AACD,KAFD,MAEO,IAAIrD,CAAC,CAACqD,KAAF,IAAW,CAAf,EAAkB;AACvBkJ,MAAAA,OAAO,CAACC,GAAR,CAAYjC,OAAO,CAACrB,WAAR,CAAoBlJ,CAAC,CAACqD,KAAtB,CAAZ;AACA,aAAOkH,OAAO,CAACrB,WAAR,CAAoBlJ,CAAC,CAACqD,KAAtB,EAA6BvC,KAA7B,CAAmC,CAAnC,EAAsC,EAAtC,IAA4C,OAA5C,GAAsDyJ,OAAO,CAACrB,WAAR,CAAoBlJ,CAAC,CAACqD,KAAtB,EAA6BvC,KAA7B,CAAmC,EAAnC,CAA7D;AACD,KAHM,MAGA;AACLyL,MAAAA,OAAO,CAACC,GAAR,CAAYjC,OAAO,CAACrB,WAAR,CAAoBlJ,CAAC,CAACqD,KAAtB,CAAZ;AACA,aAAOkH,OAAO,CAACrB,WAAR,CAAoBlJ,CAAC,CAACqD,KAAtB,EAA6BvC,KAA7B,CAAmC,CAAnC,EAAsC,EAAtC,CAAP;AACD;AACF,GA1BH;AA2BD;;AAED,SAAS8M,cAAT,CAAwBD,KAAxB,EAA+BX,KAA/B,EAAsC;AACpCA,EAAAA,KAAK,CACFnG,MADH,CACU,UAAS7G,CAAT,EAAY;AAAE,WAAOA,CAAC,CAACkN,MAAF,CAAS7J,KAAT,IAAkBsK,KAAK,CAACtK,KAA/B;AAAsC,GAD9D,EAEGvD,IAFH,CAEQ,SAFR,EAEmB,GAFnB;AAGD;;AAED,SAAS+N,gBAAT,CAA0Bb,KAA1B,EAAiC;AAC/BA,EAAAA,KAAK,CAAClN,IAAN,CAAW,SAAX,EAAsB,GAAtB;AACD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACxLA;;AACA;;AACA;;AACA;;;;;;AAEA,CAAC,UAAUb,EAAV,EAAc;AACX+O,EAAAA,OAAO,CAAClP,KAAR,CAAcG,EAAE,CAACC,MAAH,CAAU,gBAAV,CAAd;AAEAD,EAAAA,EAAE,CAACc,GAAH,CAAO,kBAAP,EAA2BW,IAA3B,CAAgC,UAASuN,SAAT,EAAoB;AAChDrB,IAAAA,KAAK,CAAC9N,KAAN,CAAYG,EAAE,CAACC,MAAH,CAAU,gBAAV,CAAZ,EAAyC+O,SAAzC;AACH,GAFD;AAIAC,EAAAA,OAAO,CAACpP,KAAR,CAAcG,EAAE,CAACC,MAAH,CAAU,gBAAV,CAAd,EAPW,CASX;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEH,CAnBD,EAmBGD,EAnBH;;AAqBAkP,CAAC,CAAC,aAAD,CAAD,CAAiBC,KAAjB,CAAuB,YAAY;AAC/B,MAAI,CAACD,CAAC,CAAC,IAAD,CAAD,CAAQE,QAAR,CAAiB,mBAAjB,CAAL,EAA4C;AACxC,QAAMC,GAAG,GAAGH,CAAC,CAAC,IAAD,CAAD,CAAQxN,IAAR,CAAa,KAAb,CAAZ;AAEAwN,IAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBI,WAAvB,CAAmC,mBAAnC;AACAJ,IAAAA,CAAC,CAAC,IAAD,CAAD,CAAQK,QAAR,CAAiB,mBAAjB;AAEAL,IAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBI,WAAlB,CAA8B,aAA9B;AACAJ,IAAAA,CAAC,4BAAqBG,GAArB,cAAD,CAAqCE,QAArC,CAA8C,aAA9C;AACH;AACJ,CAVD;;;AC1BA,IAAIC,UAAU,GAAG,4BAAjB;AAEA,IAAIC,SAAS,GAAGC,MAAM,CAACC,MAAP,CAAcC,MAA9B;;AAEA,SAASA,MAAT,CAAgBC,UAAhB,EAA4B;AAC1BJ,EAAAA,SAAS,CAACjN,IAAV,CAAe,IAAf,EAAqBqN,UAArB;AACA,OAAKC,GAAL,GAAW;AACTpO,IAAAA,IAAI,EAAEgO,MAAM,CAACC,MAAP,CAAcI,OADX;AAETC,IAAAA,gBAAgB,EAAE,EAFT;AAGTC,IAAAA,iBAAiB,EAAE,EAHV;AAITC,IAAAA,MAAM,EAAE,UAAUC,EAAV,EAAc;AACpB,WAAKH,gBAAL,CAAsBvF,IAAtB,CAA2B0F,EAAE,IAAI,YAAY,CAAE,CAA/C;AACD,KANQ;AAOTC,IAAAA,OAAO,EAAE,UAAUD,EAAV,EAAc;AACrB,WAAKF,iBAAL,CAAuBxF,IAAvB,CAA4B0F,EAA5B;AACD;AATQ,GAAX;AAYAT,EAAAA,MAAM,CAACC,MAAP,CAAcI,OAAd,GAAwB,IAAxB;AACD;;AAEDL,MAAM,CAACC,MAAP,CAAcC,MAAd,GAAuBA,MAAvB;AACA,IAAIS,aAAJ,EAAmBC,cAAnB;AAEA,IAAIC,MAAM,GAAGb,MAAM,CAACC,MAAP,CAAcY,MAA3B;;AACA,IAAI,CAAC,CAACA,MAAD,IAAW,CAACA,MAAM,CAACC,eAApB,KAAwC,OAAOC,SAAP,KAAqB,WAAjE,EAA8E;AAC5E,MAAIC,QAAQ,GAAG,MAA4BC,QAAQ,CAACD,QAApD;AACA,MAAIE,QAAQ,GAAGD,QAAQ,CAACC,QAAT,KAAsB,QAAtB,GAAiC,KAAjC,GAAyC,IAAxD;AACA,MAAIC,EAAE,GAAG,IAAIJ,SAAJ,CAAcG,QAAQ,GAAG,KAAX,GAAmBF,QAAnB,GAA8B,GAA9B,aAA2D,GAAzE,CAAT;;AACAG,EAAAA,EAAE,CAACC,SAAH,GAAe,UAASpC,KAAT,EAAgB;AAC7B2B,IAAAA,aAAa,GAAG,EAAhB;AACAC,IAAAA,cAAc,GAAG,EAAjB;AAEA,QAAI5O,IAAI,GAAGqP,IAAI,CAACC,KAAL,CAAWtC,KAAK,CAAChN,IAAjB,CAAX;;AAEA,QAAIA,IAAI,CAAC2H,IAAL,KAAc,QAAlB,EAA4B;AAC1B,UAAI4H,OAAO,GAAG,KAAd;AACAvP,MAAAA,IAAI,CAACwP,MAAL,CAAYhN,OAAZ,CAAoB,UAASiN,KAAT,EAAgB;AAClC,YAAI,CAACA,KAAK,CAACC,KAAX,EAAkB;AAChB,cAAIC,SAAS,GAAGC,cAAc,CAACC,MAAM,CAACC,aAAR,EAAuBL,KAAK,CAACvI,EAA7B,CAA9B;;AACA,cAAIyI,SAAJ,EAAe;AACbJ,YAAAA,OAAO,GAAG,IAAV;AACD;AACF;AACF,OAPD,EAF0B,CAW1B;;AACAA,MAAAA,OAAO,GAAGA,OAAO,IAAIvP,IAAI,CAACwP,MAAL,CAAYO,KAAZ,CAAkB,UAASN,KAAT,EAAgB;AACrD,eAAOA,KAAK,CAAC9H,IAAN,KAAe,KAAf,IAAwB8H,KAAK,CAACO,SAAN,CAAgBC,EAA/C;AACD,OAFoB,CAArB;;AAIA,UAAIV,OAAJ,EAAa;AACX3D,QAAAA,OAAO,CAACsE,KAAR;AAEAlQ,QAAAA,IAAI,CAACwP,MAAL,CAAYhN,OAAZ,CAAoB,UAAUiN,KAAV,EAAiB;AACnCU,UAAAA,QAAQ,CAACN,MAAM,CAACC,aAAR,EAAuBL,KAAvB,CAAR;AACD,SAFD;AAIAb,QAAAA,cAAc,CAACpM,OAAf,CAAuB,UAAUgH,CAAV,EAAa;AAClC4G,UAAAA,YAAY,CAAC5G,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,CAAZ;AACD,SAFD;AAGD,OAVD,MAUO,IAAIyF,QAAQ,CAACoB,MAAb,EAAqB;AAAE;AAC5BpB,QAAAA,QAAQ,CAACoB,MAAT;AACD;AACF;;AAED,QAAIrQ,IAAI,CAAC2H,IAAL,KAAc,QAAlB,EAA4B;AAC1BwH,MAAAA,EAAE,CAACmB,KAAH;;AACAnB,MAAAA,EAAE,CAACoB,OAAH,GAAa,YAAY;AACvBtB,QAAAA,QAAQ,CAACoB,MAAT;AACD,OAFD;AAGD;;AAED,QAAIrQ,IAAI,CAAC2H,IAAL,KAAc,gBAAlB,EAAoC;AAClCiE,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AAEA2E,MAAAA,kBAAkB;AACnB;;AAED,QAAIxQ,IAAI,CAAC2H,IAAL,KAAc,OAAlB,EAA2B;AACzBiE,MAAAA,OAAO,CAAC6E,KAAR,CAAc,kBAAkBzQ,IAAI,CAACyQ,KAAL,CAAWC,OAA7B,GAAuC,IAAvC,GAA8C1Q,IAAI,CAACyQ,KAAL,CAAW/P,KAAvE;AAEA8P,MAAAA,kBAAkB;AAElB,UAAIG,OAAO,GAAGC,kBAAkB,CAAC5Q,IAAD,CAAhC;AACA6Q,MAAAA,QAAQ,CAACC,IAAT,CAAcC,WAAd,CAA0BJ,OAA1B;AACD;AACF,GA1DD;AA2DD;;AAED,SAASH,kBAAT,GAA8B;AAC5B,MAAIG,OAAO,GAAGE,QAAQ,CAACG,cAAT,CAAwBlD,UAAxB,CAAd;;AACA,MAAI6C,OAAJ,EAAa;AACXA,IAAAA,OAAO,CAAC5F,MAAR;AACD;AACF;;AAED,SAAS6F,kBAAT,CAA4B5Q,IAA5B,EAAkC;AAChC,MAAI2Q,OAAO,GAAGE,QAAQ,CAACI,aAAT,CAAuB,KAAvB,CAAd;AACAN,EAAAA,OAAO,CAACzJ,EAAR,GAAa4G,UAAb,CAFgC,CAIhC;;AACA,MAAI4C,OAAO,GAAGG,QAAQ,CAACI,aAAT,CAAuB,KAAvB,CAAd;AACA,MAAIC,UAAU,GAAGL,QAAQ,CAACI,aAAT,CAAuB,KAAvB,CAAjB;AACAP,EAAAA,OAAO,CAACS,SAAR,GAAoBnR,IAAI,CAACyQ,KAAL,CAAWC,OAA/B;AACAQ,EAAAA,UAAU,CAACC,SAAX,GAAuBnR,IAAI,CAACyQ,KAAL,CAAW/P,KAAlC;AAEAiQ,EAAAA,OAAO,CAACS,SAAR,GACE,2NACE,mFADF,GAEE,yEAFF,GAGE,qEAHF,GAG0EV,OAAO,CAACU,SAHlF,GAG8F,QAH9F,GAIE,OAJF,GAIYF,UAAU,CAACE,SAJvB,GAImC,QAJnC,GAKA,QANF;AASA,SAAOT,OAAP;AAED;;AAED,SAASU,UAAT,CAAoBpD,MAApB,EAA4B/G,EAA5B,EAAgC;AAC9B,MAAIoK,OAAO,GAAGrD,MAAM,CAACqD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ,WAAO,EAAP;AACD;;AAED,MAAIC,OAAO,GAAG,EAAd;AACA,MAAIC,CAAJ,EAAOnS,CAAP,EAAUoS,GAAV;;AAEA,OAAKD,CAAL,IAAUF,OAAV,EAAmB;AACjB,SAAKjS,CAAL,IAAUiS,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,CAAV,EAAyB;AACvBC,MAAAA,GAAG,GAAGH,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,EAAcnS,CAAd,CAAN;;AACA,UAAIoS,GAAG,KAAKvK,EAAR,IAAevC,KAAK,CAAC+M,OAAN,CAAcD,GAAd,KAAsBA,GAAG,CAACA,GAAG,CAAC9O,MAAJ,GAAa,CAAd,CAAH,KAAwBuE,EAAjE,EAAsE;AACpEqK,QAAAA,OAAO,CAACxI,IAAR,CAAayI,CAAb;AACD;AACF;AACF;;AAED,MAAIvD,MAAM,CAACY,MAAX,EAAmB;AACjB0C,IAAAA,OAAO,GAAGA,OAAO,CAAC1N,MAAR,CAAewN,UAAU,CAACpD,MAAM,CAACY,MAAR,EAAgB3H,EAAhB,CAAzB,CAAV;AACD;;AAED,SAAOqK,OAAP;AACD;;AAED,SAASpB,QAAT,CAAkBlC,MAAlB,EAA0BwB,KAA1B,EAAiC;AAC/B,MAAI6B,OAAO,GAAGrD,MAAM,CAACqD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAIA,OAAO,CAAC7B,KAAK,CAACvI,EAAP,CAAP,IAAqB,CAAC+G,MAAM,CAACY,MAAjC,EAAyC;AACvC,QAAIJ,EAAE,GAAG,IAAIkD,QAAJ,CAAa,SAAb,EAAwB,QAAxB,EAAkC,SAAlC,EAA6ClC,KAAK,CAACO,SAAN,CAAgBC,EAA7D,CAAT;AACAR,IAAAA,KAAK,CAACC,KAAN,GAAc,CAAC4B,OAAO,CAAC7B,KAAK,CAACvI,EAAP,CAAtB;AACAoK,IAAAA,OAAO,CAAC7B,KAAK,CAACvI,EAAP,CAAP,GAAoB,CAACuH,EAAD,EAAKgB,KAAK,CAACmC,IAAX,CAApB;AACD,GAJD,MAIO,IAAI3D,MAAM,CAACY,MAAX,EAAmB;AACxBsB,IAAAA,QAAQ,CAAClC,MAAM,CAACY,MAAR,EAAgBY,KAAhB,CAAR;AACD;AACF;;AAED,SAASG,cAAT,CAAwB3B,MAAxB,EAAgC/G,EAAhC,EAAoC;AAClC,MAAIoK,OAAO,GAAGrD,MAAM,CAACqD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAI,CAACA,OAAO,CAACpK,EAAD,CAAR,IAAgB+G,MAAM,CAACY,MAA3B,EAAmC;AACjC,WAAOe,cAAc,CAAC3B,MAAM,CAACY,MAAR,EAAgB3H,EAAhB,CAArB;AACD;;AAED,MAAIyH,aAAa,CAACzH,EAAD,CAAjB,EAAuB;AACrB;AACD;;AACDyH,EAAAA,aAAa,CAACzH,EAAD,CAAb,GAAoB,IAApB;AAEA,MAAI2K,MAAM,GAAG5D,MAAM,CAAC6D,KAAP,CAAa5K,EAAb,CAAb;AAEA0H,EAAAA,cAAc,CAAC7F,IAAf,CAAoB,CAACkF,MAAD,EAAS/G,EAAT,CAApB;;AAEA,MAAI2K,MAAM,IAAIA,MAAM,CAACzD,GAAjB,IAAwByD,MAAM,CAACzD,GAAP,CAAWE,gBAAX,CAA4B3L,MAAxD,EAAgE;AAC9D,WAAO,IAAP;AACD;;AAED,SAAO0O,UAAU,CAACxB,MAAM,CAACC,aAAR,EAAuB5I,EAAvB,CAAV,CAAqC6K,IAArC,CAA0C,UAAU7K,EAAV,EAAc;AAC7D,WAAO0I,cAAc,CAACC,MAAM,CAACC,aAAR,EAAuB5I,EAAvB,CAArB;AACD,GAFM,CAAP;AAGD;;AAED,SAASkJ,YAAT,CAAsBnC,MAAtB,EAA8B/G,EAA9B,EAAkC;AAChC,MAAI2K,MAAM,GAAG5D,MAAM,CAAC6D,KAAP,CAAa5K,EAAb,CAAb;AACA+G,EAAAA,MAAM,CAACI,OAAP,GAAiB,EAAjB;;AACA,MAAIwD,MAAJ,EAAY;AACVA,IAAAA,MAAM,CAACzD,GAAP,CAAWpO,IAAX,GAAkBiO,MAAM,CAACI,OAAzB;AACD;;AAED,MAAIwD,MAAM,IAAIA,MAAM,CAACzD,GAAjB,IAAwByD,MAAM,CAACzD,GAAP,CAAWG,iBAAX,CAA6B5L,MAAzD,EAAiE;AAC/DkP,IAAAA,MAAM,CAACzD,GAAP,CAAWG,iBAAX,CAA6B/L,OAA7B,CAAqC,UAAUwP,EAAV,EAAc;AACjDA,MAAAA,EAAE,CAAC/D,MAAM,CAACI,OAAR,CAAF;AACD,KAFD;AAGD;;AAED,SAAOJ,MAAM,CAAC6D,KAAP,CAAa5K,EAAb,CAAP;AACA+G,EAAAA,MAAM,CAAC/G,EAAD,CAAN;AAEA2K,EAAAA,MAAM,GAAG5D,MAAM,CAAC6D,KAAP,CAAa5K,EAAb,CAAT;;AACA,MAAI2K,MAAM,IAAIA,MAAM,CAACzD,GAAjB,IAAwByD,MAAM,CAACzD,GAAP,CAAWE,gBAAX,CAA4B3L,MAAxD,EAAgE;AAC9DkP,IAAAA,MAAM,CAACzD,GAAP,CAAWE,gBAAX,CAA4B9L,OAA5B,CAAoC,UAAUwP,EAAV,EAAc;AAChDA,MAAAA,EAAE;AACH,KAFD;;AAGA,WAAO,IAAP;AACD;AACF","file":"INF8808-Projet2.e31bb0bc.js","sourceRoot":"..","sourcesContent":["// Source : https://d3-graph-gallery.com/graph/stackedarea_template.html\r\nexport function build(div) {\r\n  // set the dimensions and margins of the graph\r\n  const bounds = d3.select('#stacked-area-chart').node().getBoundingClientRect()\r\n  var margin = {top: 60, right: 230, bottom: 50, left: 70},\r\n  width = bounds.width - margin.left - margin.right,\r\n  height = 800 - margin.top - margin.bottom;\r\n\r\n  // append the svg object to the body of the page\r\n  var svg = div.select(\"#stacked-area-chart\")\r\n  .append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n  .append(\"g\")\r\n    .attr(\"transform\",\r\n          \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n  d3.csv('./TRIP_STACK_HALF_MONTH.csv', function(d){\r\n      return { \r\n        date : d3.timeParse(\"%Y-%m-%d\")(d.date),\r\n        Barges : d.Barges,\r\n        Other : d.Other,\r\n        Tugs : d.Tugs,\r\n        Tanker : d.Tanker,\r\n        Fishing : d.Fishing,\r\n        'Pleasure Crafts': d['Pleasure Crafts'],\r\n        Excursion : d.Excursion,\r\n        Merchant : d.Merchant,\r\n      }\r\n  }).then( function(data) {\r\n    const keys = data.columns.slice(1)  // List of Vessel Types = header of the csv files\r\n\r\n    const color = d3.scaleOrdinal()\r\n      .domain(keys)\r\n      .range(d3.schemeSet2);\r\n\r\n    const stackedData = d3.stack()\r\n      .keys(keys)\r\n    (data)\r\n\r\n    // Add X axis\r\n    const x = d3.scaleTime()\r\n    .domain(d3.extent(data, d => d.date))\r\n    .range([ 0, width ]);\r\n    svg.append(\"g\")\r\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n      .call(d3.axisBottom(x).ticks(10))\r\n\r\n    // Add X axis label:\r\n    svg.append(\"text\")\r\n      .attr(\"text-anchor\", \"end\")\r\n      .attr(\"x\", width)\r\n      .attr(\"y\", height+40 )\r\n      .text(\"Temps\");\r\n\r\n    // Add Y axis\r\n    const y = d3.scaleLinear()\r\n      .domain([0, 12000])     // TODO : Y Automatique ?\r\n      .range([ height, 0 ]);\r\n    svg.append(\"g\")\r\n      .call(d3.axisLeft(y).ticks(15))\r\n\r\n    // Add Y axis label:\r\n    svg.append(\"text\")\r\n      .attr(\"text-anchor\", \"end\")\r\n      .attr(\"x\", 0)\r\n      .attr(\"y\", -20 )\r\n      .text(\"Nombre de navires\")\r\n      .attr(\"text-anchor\", \"start\")\r\n\r\n    // Area generator\r\n    const areaChart = svg.append('g')\r\n    const area = d3.area()\r\n      .x(function(d) { return x(d.data.date); })\r\n      .y0(function(d) { return y(d[0]); })\r\n      .y1(function(d) { return y(d[1]); })\r\n\r\n    // Show the areas\r\n    areaChart\r\n    .selectAll(\"mylayers\")\r\n    .data(stackedData)\r\n    .enter()\r\n    .append(\"path\")\r\n      .attr(\"class\", function(d) { return \"myArea \" + d.key })\r\n      .style(\"fill\", function(d) { return color(d.key); })\r\n      .attr(\"d\", area)\r\n\r\n    // What to do when one group is hovered\r\n    const highlight = function(d){\r\n      d3.selectAll(\".myArea\").style(\"opacity\", .1)  // reduce opacity of all groups\r\n      d3.select(\".\"+d).style(\"opacity\", 1)  // expect the one that is hovered\r\n    }\r\n\r\n    // And when it is not hovered anymore\r\n    const noHighlight = function(){\r\n      d3.selectAll(\".myArea\").style(\"opacity\", 1)\r\n    }\r\n\r\n    // LEGEND //\r\n    const size = 20\r\n    svg.selectAll(\"myrect\")   // Add one dot in the legend for each name.\r\n      .data(keys)\r\n      .enter()\r\n      .append(\"rect\")\r\n        .attr(\"x\", width)\r\n        .attr(\"y\", function(_,i){ return 10 + i*(size+5)}) // 100 is where the first dot appears. 25 is the distance between dots\r\n        .attr(\"width\", size)\r\n        .attr(\"height\", size)\r\n        .attr(\"stroke-width\", 0.5)\r\n        .attr(\"stroke\", \"black\")\r\n        .style(\"fill\", function(d){ return color(d)})\r\n        .on(\"mouseover\", highlight)\r\n        .on(\"mouseleave\", noHighlight)\r\n\r\n    svg.selectAll(\"mylabels\")   // Add one dot in the legend for each name.\r\n      .data(keys)\r\n      .enter()\r\n      .append(\"text\")\r\n        .attr(\"x\", width + size*1.2)\r\n        .attr(\"y\", function(_,i){ return 10 + i*(size+5) + (size/2)}) // 100 is where the first dot appears. 25 is the distance between dots\r\n        .style(\"fill\", function(d){ return color(d)})\r\n        .text(function(d){ return d})\r\n        .attr(\"text-anchor\", \"left\")\r\n        .style(\"alignment-baseline\", \"middle\")\r\n        .on(\"mouseover\", highlight)\r\n        .on(\"mouseleave\", noHighlight)\r\n    })\r\n}\r\n","// import { crossfilter } from './crossfilter'\r\n\r\nexport function removeDuplicate(name) {\r\n    if (name == 'Saint John NB') {\r\n        return \"St. John's\"\r\n    }\r\n    return name\r\n}\r\n\r\nexport function cleanPortName(name) {\r\n    name = removeDuplicate(name)\r\n    const words = name.split(/,| |\\/|-/)\r\n    words.forEach((word, index) => {\r\n        if (word.length > 2) {\r\n            let newWord = word.toLowerCase()\r\n\r\n            let letterIndex = 0\r\n            while (true) {\r\n                const letter = newWord[letterIndex]\r\n                if (letter.match(/[a-z]/i)) {\r\n                    newWord = newWord.substring(0, letterIndex) + letter.toUpperCase() + newWord.substring(letterIndex + 1)\r\n                    break\r\n                }\r\n                letterIndex += 1\r\n            }\r\n            words[index] = newWord\r\n        }\r\n    })\r\n    return words.join(' ')\r\n}\r\n\r\nexport function isPortExcluded(name) {\r\n    if (name.includes('Virtual Harbour')) {\r\n        return true\r\n    }\r\n    return false\r\n}\r\n\r\nlet dataPerMonth\r\nlet dataPerPort\r\nlet data\r\n\r\nconst selectWidth = 950\r\nconst selectHeight = 125\r\n\r\n// Reading the data\r\nd3.csv(\"./TRIP_Part1.csv\").then( function(data1) {\r\n    d3.csv(\"./TRIP_Part2.csv\").then( function(data2) {\r\n        d3.csv(\"./TRIP_Part3.csv\").then( function(data3) {\r\n            // Id,Departure Date,Departure Hardour,Departure Region,Departure Latitude,Departure Longitude,Arrival Date,Arrival Hardour,Arrival Region,Arrival Latitude,Arrival Longitude,Vessel Type,Lenght,Width,DeadWeight Tonnage,Maximum Draugth\r\n            // 6079000000783579,    2011-01-01 00:00:00.000,Virtual Harbour (Central Region),Central Region,45.71666667,-84.24861111,2011-01-01 15:30:00.000,Goderich,Central Region,43.745,-81.7294441666667,Merchant Bulk,222.509994506836,22.9400005340576,31751,8.72999954223633\r\n            // 23079000000766048,   2011-01-01 00:10:00.000,Whiffen Head,Newfoundland Region,47.7727836111111,-54.0171797222222,2011-01-01 01:00:00.000,Whiffen Head,Newfoundland Region,47.7727836111111,-54.0171797222222,Tug Fire,38.9000015258789,13.8999996185303,314,3.5\r\n            // 23079000000766035,   2011-01-01 00:57:00.000,Whiffen Head,Newfoundland Region,47.7727836111111,-54.0171797222222,2011-01-02 12:45:00.000,Virtual Harbour (Newfoundland Region),Newfoundland Region,47.75,-53,Merchant Crude,271.799987792969,46.0499992370606,126646,15.3459997177124\r\n\r\n            data = data1.concat(data2).concat(data3)\r\n\r\n            dataPerPort = transformDataPorts(data)\r\n            dataPerMonth = transformDataMonths(data)\r\n\r\n            setHistograms(data)\r\n            setStackedBar(data)\r\n\r\n            build(d3.select('#tab-2-content'), dataPerMonth, dataPerPort)\r\n        });\r\n    });\r\n});\r\n\r\nexport function transformDataPorts(data) {\r\n    const map = new Map()\r\n    data.forEach(line => {\r\n        const arrivalPort = cleanPortName(line['Arrival Hardour'])\r\n        const departurePort = cleanPortName(line['Departure Hardour'])\r\n\r\n        if (!isPortExcluded(arrivalPort)) {\r\n            if (!map.has(arrivalPort)) {\r\n                map.set(arrivalPort, {\r\n                    'name': arrivalPort,\r\n                    'traffic': 1\r\n                })\r\n            } else {\r\n                map.get(arrivalPort).traffic += 1\r\n            }\r\n        }\r\n\r\n        if (!isPortExcluded(departurePort)) {\r\n            if (!map.has(departurePort)) {\r\n                map.set(departurePort, {\r\n                    'name': departurePort,\r\n                    'traffic': 1\r\n                })\r\n            } else {\r\n                map.get(departurePort).traffic += 1\r\n            }\r\n        }\r\n    })\r\n\r\n    const dataPerPort = Array.from(map.values())\r\n    dataPerPort.sort(function (a, b) {\r\n        return b.traffic - a.traffic\r\n    })\r\n    return dataPerPort\r\n}\r\n\r\nexport function transformDataMonths(data) {\r\n    const map = new Map()\r\n    data.forEach(line => {\r\n        const departureDate = new Date(line['Departure Date'])\r\n        departureDate.setDate(1)\r\n        const arrivalDate = new Date(line['Arrival Date'])\r\n        arrivalDate.setDate(1)\r\n\r\n        for (let date = departureDate; date <= arrivalDate; date.setMonth(date.getMonth()+1)) {\r\n            const sDate = date.toDateString()\r\n            if (!map.has(sDate)) {\r\n                map.set(sDate, {\r\n                    'date': sDate,\r\n                    'traffic': 1\r\n                })\r\n            } else {\r\n                map.get(sDate).traffic += 1\r\n            }\r\n        }\r\n    })\r\n\r\n    const dataPerMonth = Array.from(map.values())\r\n    dataPerMonth.forEach(month => {\r\n        month.date = new Date(month.date)\r\n    })\r\n    return dataPerMonth\r\n}\r\n\r\nexport function build(div, dataPerMonth, dataPerPort, nb = 20) {\r\n    buildTable(div, dataPerPort, nb)\r\n\r\n    const xScale = d3.scaleBand().padding(0.7)\r\n    xScale.domain(\r\n        dataPerMonth.map((month) => month.date))\r\n    .range([0, 950])\r\n\r\n    const yScale = d3.scaleLinear()\r\n    let max = 0\r\n    for (const month of dataPerMonth) {\r\n        if (month.traffic > max) {\r\n            max = month.traffic\r\n        }\r\n    }\r\n    yScale.domain([0, max]).range([125, 0])\r\n\r\n    div.select('#time-select-graph  #graph-clip-path')\r\n    .selectAll('rect')\r\n    .data(dataPerMonth)\r\n    .join('rect')\r\n    .attr('width', 950 / dataPerMonth.length)\r\n    .attr('height', data => 125 - yScale(data.traffic))\r\n    .attr('x', data => xScale(data.date))\r\n    .attr('y', data => yScale(data.traffic))\r\n\r\n    div.select('#time-select-graph')\r\n    .select('.x.axis')\r\n    .attr('transform', 'translate(0, ' + 125 + ')')\r\n    .call(d3.axisBottom(xScale)\r\n    .tickValues(xScale.domain().filter(function(d, i) {\r\n        return !(i % 12 - 1)\r\n    }))\r\n    .tickFormat(d3.timeFormat(\"%Y\")))\r\n}\r\n\r\nexport function buildTable(div, dataPerPort, nb) {\r\n    const topTraffic = dataPerPort[0].traffic\r\n\r\n    const row = div.select('#port-table tbody')\r\n    .selectAll('tr.port-row')\r\n    .data(dataPerPort)\r\n    .enter()\r\n    .filter((data, index) => nb <= 0 || index < nb)\r\n    .append('tr')\r\n    .attr('data-port', (data, index) => data.name)\r\n\r\n    row.append('td')\r\n    .attr('class', 'port-cell column-rank')\r\n    .append('div')\r\n    .attr('class', 'rank-container')\r\n    .append('span')\r\n    .text((data, index) => index + 1)\r\n\r\n    row.append('td')\r\n    .attr('class', 'port-cell column-port')\r\n    .append('div')\r\n    .attr('class', 'port-container')\r\n    .append('span')\r\n    .text((data, index) => data.name)\r\n\r\n    row.append('td')\r\n    .attr('class', 'port-cell column-traffic')\r\n    .append('div')\r\n    .attr('class', 'traffic-container')\r\n    .append('span')\r\n    .text((data, index) => data.traffic)\r\n\r\n    row.append('td')\r\n    .attr('class', 'port-cell-graph column-proportions')\r\n    .append('div')\r\n    .attr('class', 'proportions-container')\r\n    .style('width', (data, index) => data.traffic / topTraffic * 100 + '%')\r\n    \r\n    div.selectAll('#port-table tr').on('click', function() {\r\n        const row = d3.select(this)\r\n        const selected = row.classed('selected')\r\n\r\n        d3.selectAll('#port-table tr').classed('selected', false)\r\n        row.classed('selected', !selected)\r\n\r\n        const port = selected ? undefined : row.attr('data-port')\r\n\r\n        selectPort(port)\r\n    })\r\n}\r\n\r\nd3.select('#tab-2-content #row-nb-control-refresh').on('click', function() {\r\n    reset(d3.select('#tab-2-content'))\r\n    const nbLines = d3.select('#row-nb-control').property('value')\r\n    build(d3.select('#tab-2-content'), dataPerMonth, dataPerPort, nbLines)\r\n})\r\n\r\nexport function reset(div) {\r\n    div.select('#port-table tbody').html('')\r\n    selectPort(undefined)\r\n}\r\n\r\nexport function selectPort(port) {\r\n    const title = d3.select('#caracteristics-title-port')\r\n    if (port == undefined) {\r\n        title.text('AUCUN PORT SLECTIONN - CARACTRISTIQUES GLOBALES')\r\n    } else {\r\n        title.text(port)\r\n    }\r\n}\r\n\r\nexport function setHistogram(data, max, width, height, id, title) {\r\n    var svg = d3.select(id)\r\n        .append(\"svg\")\r\n            .attr(\"width\", width)\r\n            .attr(\"height\", height)\r\n        .append(\"g\")\r\n            .attr(\"transform\", \"translate(50,10)\");\r\n\r\n    var x = d3.scaleLinear()\r\n        .domain([0, max])\r\n        .range([0, width - 100]);\r\n    svg.append(\"g\")\r\n        .attr(\"transform\", \"translate(0,\" + (height - 30) + \")\")\r\n        .call(d3.axisBottom(x))\r\n\r\n    var hist = d3.histogram()\r\n        .value(d => { return d[title]; })\r\n        .domain(x.domain())\r\n        .thresholds(x.ticks(40));\r\n\r\n    var bins = hist(data);\r\n\r\n    var y = d3.scaleLinear()\r\n        .range([height - 30, 0])\r\n        .domain([0, d3.max(bins, d => { return d.length; })]);\r\n    svg.append(\"g\")\r\n        .call(d3.axisLeft(y).ticks(5));\r\n\r\n    svg.selectAll(\"rect\")\r\n        .data(bins)\r\n        .enter()\r\n        .append(\"rect\")\r\n            .attr(\"x\", 1)\r\n            .attr(\"transform\", d => { return \"translate(\" + x(d.x0) + \",\" + y(d.length) + \")\"; })\r\n            .attr(\"width\", d => { return x(d.x1) - x(d.x0); })\r\n            .attr(\"height\", d => { return height - y(d.length) - 30; })\r\n            .style(\"fill\", \"#4479AB\")\r\n}\r\n\r\nexport function setHistograms(data) {\r\n    setHistogram(data, 400, 776, 160, \"#repartition-length\", \"Lenght\");\r\n    setHistogram(data, 180, 776, 160, \"#repartition-width\", \"Width\")\r\n    setHistogram(data, 650000, 776, 160, \"#repartition-tonnage\", \"DeadWeight Tonnage\");\r\n    setHistogram(data, 30, 776, 160, \"#repartition-draught\", \"Maximum Draugth\");\r\n}\r\n\r\nexport function setStackedBar(data) {\r\n    var svg = d3.select(\"#repartition-types\")\r\n        .append(\"svg\")\r\n            .attr(\"height\", 556)\r\n            .attr(\"width\", 130)\r\n            .append(\"g\")\r\n                .attr(\"transform\", \"translate(10,10)\");\r\n    \r\n    var total = 0\r\n    const map = new Map()\r\n    data.forEach(line => {\r\n        const type = line['Global Vessel Type']\r\n        const subtype = line['Vessel Type']\r\n        total++;\r\n\r\n        if (!map.has(type)) {\r\n            map.set(type, {\r\n                'type': type,\r\n                'number': 1,\r\n                'subtypes': {}\r\n            })\r\n        } else {\r\n            map.get(type).number += 1;\r\n        }\r\n            \r\n        if (!(subtype in map.get(type).subtypes)) {\r\n            map.get(type).subtypes[subtype] = 1;\r\n        } else {\r\n            map.get(type).subtypes[subtype] += 1;\r\n        }\r\n    })\r\n\r\n    const colors = {\"Barges\": \"#66c2a5\", \"Excursion\": \"#fc8d62\", \"Fishing\": \"#8da0cb\", \"Merchant\": \"#e78ac3\", \"Other\": \"#a6d854\", \"Pleasure Crafts\": \"#ffd92f\", \"Tanker\": \"#e5c494\", \"Tugs\": \"#b3b3b3\"}\r\n    const darker_colors = {\"Barges\": \"#46b08f\", \"Excursion\": \"#d66236\", \"Fishing\": \"#748cc2\", \"Merchant\": \"#d96aae\", \"Other\": \"#8fbd44\", \"Pleasure Crafts\": \"#d6b313\", \"Tanker\": \"#cfa569\", \"Tugs\": \"#919191\"}\r\n\r\n    var currSum = 10\r\n    for (var type of map.entries()) {\r\n        var i = 0\r\n        for (var subtype in type[1].subtypes) {\r\n            var color_list = i % 2 == 0 ? colors : darker_colors\r\n            i++\r\n            svg.append(\"rect\")\r\n                .attr(\"width\", 130)\r\n                .attr(\"height\", (Math.ceil(490 * type[1].subtypes[subtype]/total)))\r\n                .attr(\"transform\", \"translate(10,\" + currSum + \")\")\r\n                .attr(\"fill\", color_list[type[0]]);\r\n            currSum += Math.ceil(490 * type[1].subtypes[subtype]/total);\r\n        }\r\n    }\r\n}","export const GLOBAL_VESSEL_TYPE = ['Barges', 'Excursion', 'Fishing', 'Merchant', 'Other', 'Pleasure Crafts', 'Tanker', 'Tugs']\r\nexport const REGION_NAME = ['Arctic', 'Central', 'East Canadian Water', 'Newfoundland', 'Maritimes', 'Pacific', 'Quebec', 'St. Lawrence Seaway', 'West Canadian Water']\r\nexport const REGION_COLOR = ['#CAB2D6', '#6A3D9A', '#33A02C', '#FB9A99', '#FDBF6F', '#E31A1C', '#1F78B4', '#A6CEE3', '#FF7F00']\r\nexport const REGION_NAME_ALT = ['Arctic', 'Central', 'East_Canadian_Water', 'Newfoundland', 'Maritimes', 'Pacific', 'Quebec', 'St_Lawrence_Seaway', 'West_Canadian_Water']\r\n\r\nfunction findGlobalVesselType(vesselType) {\r\n  if (['Barge Bulk Cargo', 'Barge Chemical','Barge Chips','Barge Derrick','Barge General','Barge Log','Barge Miscellaneous','Barge Oil Drilling Rig', 'Barge Oil/Petroleum', 'Barge Rail/Trailer','Barge Self-Propelled','Barge Towed',\"Don't use\",'Landing Craft','Logs Raft Section'].includes(vesselType)) {\r\n    return 'Barges'\r\n  } else if (['Excursion Passenger'].includes(vesselType)) {\r\n    return 'Excursion'\r\n  } else if (['Crab Boat', 'Dragger (Scallop, Clam, etc.)', 'Factory Ship', 'Fishery Patrol', 'Fishing Vessel', 'Gillnetter', 'Groundfish Boat (Open Boat)', 'Lobster Boat', 'Longliner', 'Other Fishing VSL (Open Boat)', 'Seiner', 'Shrimp Boat', 'Trawler', 'Troller'].includes(vesselType)) {\r\n    return 'Fishing'\r\n  } else if (['Cruise', 'Merchant (Dry)', 'Merchant Auto', 'Merchant Bulk', 'Merchant Cement', 'Merchant Coastal', 'Merchant Container', 'Merchant Ferry', 'Merchant General', 'Merchant Lash', 'Merchant Livestock', 'Merchant Ore', 'Merchant Passenger', 'Merchant Rail/Trailer Ferry', 'Merchant Reefer', 'Merchant RO/RO'].includes(vesselType)) {\r\n    return 'Merchant'\r\n  } else if (['Yacht - Pleasure Crafts', 'Yacht Power', 'Yacht Sails'].includes(vesselType)) {\r\n    return 'Pleasure Crafts'\r\n  } else if(['Merchant (Tanker)', 'Merchant Chemical', 'Merchant Chemical/Oil Products Tanker','Merchant Crude','Merchant Gasoline','Merchant Liquified Gas','Merchant Molasses','Merchant Ore/Bulk/Oil','Merchant Super Tanker','Merchant ULCC','Merchant VLCC','Merchant Water'].includes(vesselType)) {\r\n    return 'Tanker'\r\n  } else if (['Tug', 'Tug Fire', 'Tug Harbour', 'Tug Ocean', 'Tug Supply', 'Tugs Workboat'].includes(vesselType)) {\r\n    return 'Tugs'\r\n  } else {\r\n    return 'Other'\r\n  }\r\n}\r\n\r\nexport function clean(data) {\r\n  const cleanData = []\r\n  data.forEach(element => {\r\n    if (element['Lenght'] != 0 && \r\n        element['Width'] != 0 & \r\n        element['Maximum Draugth'] < 30 &&\r\n        element['Departure Date'] < ['Arrival Date']) {\r\n      cleanData.push({\r\n        'Arrival Date': element['Arrival Date'].substring(0,10),\r\n        'Arrival Hardour': element['Arrival Hardour'],\r\n        'Arrival Region': element['Arrival Region'],\r\n        'DeadWeight Tonnage': element['DeadWeight Tonnage'],\r\n        'Departure Date': element['Departure Date'].substring(0, 10),\r\n        'Departure Hardour': element['Departure Hardour'],\r\n        'Departure Region': element['Departure Region'],\r\n        'Lenght': element['Lenght'],\r\n        'Maximum Draugth': element['Maximum Draugth'],\r\n        'Vessel Type': element['Vessel Type'],\r\n        'Global Vessel Type': findGlobalVesselType(element['Vessel Type']),\r\n        'Width': element['Width']\r\n      })\r\n    }\r\n  })\r\n\r\n  return cleanData\r\n}\r\n\r\nexport function chordMatrix(data, departureDate, arrivalDate) {\r\n  const matrix = new Array(REGION_NAME.length)\r\n  for (let index = 0; index < matrix.length; index++) {\r\n    matrix[index] = new Array(REGION_NAME.length)\r\n  }\r\n  \r\n  REGION_NAME.forEach((departureRegion, i) => {\r\n    REGION_NAME.forEach((arrivalRegion, j) => {\r\n      matrix[i][j] = data\r\n        .filter((d) => {\r\n          return departureRegion === d['Departure Region'].slice(0,-7)\r\n            && arrivalRegion === d['Arrival Region'].slice(0,-7)\r\n            && departureDate <= d['Departure Date']\r\n            && arrivalDate >= d['Arrival Date']\r\n        })\r\n        .map((value) => value.count)\r\n        .reduce((partialSum, v) => Number(partialSum) + Number(v), 0)\r\n    })\r\n  })\r\n\r\n  return matrix\r\n}","import * as preproc from './preprocess.js'\r\n\r\nexport function build(div) {\r\n  buildHeatmap(div)\r\n}\r\n\r\n// https://d3-graph-gallery.com/heatmap.html\r\nfunction buildHeatmap(div) {\r\n  // TODO : adapt to div size\r\n\r\n  // set the dimensions and margins of the graph\r\n  const margin = {top: 30, right: 0, bottom: 70, left: 120},\r\n    width = 500 - margin.left - margin.right,\r\n    height = 500 - margin.top - margin.bottom;\r\n\r\n  // append the svg object to the body of the page\r\n  const svg = div.select(\"#tab-3-heatmap\")\r\n  .append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right + 50)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n  .append(\"g\")\r\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`)\r\n\r\n  // Labels of row and columns\r\n  const myGroups = preproc.GLOBAL_VESSEL_TYPE\r\n  const myVars = preproc.REGION_NAME\r\n\r\n  // Build X scales and axis:\r\n  const x = d3.scaleBand()\r\n    .range([ 0, width ])\r\n    .domain(myGroups)\r\n    .padding(0.01)\r\n\r\n  svg.append(\"g\")\r\n    .attr(\"transform\", `translate(0, ${height})`)\r\n    .call(d3.axisBottom(x))\r\n    .selectAll('text')\r\n    .attr('transform', 'translate(-20,20)rotate(-45)')\r\n\r\n  // Build Y scales and axis:\r\n  const y = d3.scaleBand()\r\n    .range([ height, 0 ])\r\n    .domain(myVars)\r\n    .padding(0.01)\r\n  svg.append(\"g\")\r\n    .call(d3.axisLeft(y))\r\n\r\n  // Build color scale\r\n  const myColor = d3.scaleLinear()\r\n    .range([\"white\", \"#ff0000\"])\r\n    .domain([0,15]) //maximum hardocod sur la valeur max\r\n\r\n\r\n  function transformData(d, departureDate, arrivalDate) {\r\n    let map = heatmapMap()\r\n\r\n    const data = d.filter((line) => {\r\n      return departureDate <= line['Departure Date'] && arrivalDate >= line['Arrival Date']\r\n    })\r\n\r\n    data.forEach(line => {\r\n      // if (departureDate <= d['Departure Date'] && arrivalDate >= d['Arrival Date']) return;\r\n\r\n      const keyStart = line['Departure Region']+line['Global Vessel Type'];\r\n      const keyStop = line['Arrival Region']+line['Global Vessel Type'];\r\n      if (!map.has(keyStart)) {\r\n        map.set(keyStart, {\r\n          'Region': line['Departure Region'].slice(0,-7),\r\n          'Type': line['Global Vessel Type'],\r\n          'count': 1\r\n          });\r\n      } else {\r\n        const current = map.get(keyStart);\r\n        current.count += 1;\r\n        map.set(keyStart, current);\r\n      }\r\n      if (!map.has(keyStop)) {\r\n        map.set(keyStop, {\r\n          'Region': line['Arrival Region'].slice(0,-7),\r\n          'Type': line['Global Vessel Type'],\r\n          'count': 1\r\n          });\r\n      } else {\r\n        const current = map.get(keyStop);\r\n        current.count += 1;\r\n        map.set(keyStop, current);\r\n      }\r\n    })\r\n\r\n    const p = [];\r\n    let max = 0\r\n    Array.from(map.values()).forEach((value) => {\r\n      p.push({\r\n        'Region': value.Region,\r\n        'Type': value.Type,\r\n        'count' : (value.count / (2*data.length)) * 100\r\n      })\r\n      if ((value.count / (2*data.length)) * 100 >= max) {\r\n        max = (value.count / (2*data.length)) * 100\r\n      }\r\n    })\r\n    myColor.domain([0,max])\r\n\r\n    return p\r\n  }\r\n\r\n  //Read the data\r\n  d3.csv(\"./TRIP_HEATMAP.csv\").then( function(data) {\r\n    // add the squares and interaction\r\n    const transformedData = transformData(data, \"2010-01-01\", \"2023-01-01\")\r\n    svg.selectAll()\r\n    .data(transformedData, function(d) {\r\n      return d.Type+':'+d.Region;\r\n    })\r\n    .enter()\r\n    .append(\"g\")\r\n    .attr(\"class\", \"square\")\r\n    .on('mouseenter', function() { rectSelect(this, x, y) })\r\n    .on('mouseleave', function() { rectUnselect(this) })\r\n    .append(\"rect\")\r\n      .attr(\"x\", function(d) { return x(d.Type) })\r\n      .attr(\"y\", function(d) { return y(d.Region) })\r\n      .attr(\"width\", x.bandwidth() )\r\n      .attr(\"height\", y.bandwidth() )\r\n      .style(\"fill\", function(d) { return myColor(d.count) })\r\n    \r\n      initLegend(svg,myColor)\r\n      drawLegend(width + margin.right + 10, 0, height, 15, 'url(#gradient)', myColor)\r\n  })\r\n}\r\n\r\nfunction heatmapMap() {\r\n  let map = new Map();\r\n\r\n  preproc.REGION_NAME.forEach((region) => {\r\n    preproc.GLOBAL_VESSEL_TYPE.forEach((type) => {\r\n      const key = region + type\r\n      map.set(key, {\r\n        'Region': region,\r\n        'Type': type,\r\n        'count': 0\r\n      })\r\n    })\r\n  })\r\n  return map\r\n}\r\n\r\nfunction rectSelect(element, x, y) {\r\n  d3.select(element)\r\n    .append(\"text\")\r\n    .attr('x', function(d) { return x(d.Type) + x.bandwidth() / 2; })\r\n    .attr('y', function(d) { return y(d.Region) + y.bandwidth() / 2; })\r\n    .attr('text-anchor', 'middle')\r\n    .attr('dominant-baseline', 'middle')\r\n    .text(function(d) {\r\n      return d.count.toFixed(2) + '%'\r\n    })\r\n}\r\n\r\nfunction rectUnselect(element) {\r\n  d3.select(element)\r\n    .select('text')\r\n    .remove()\r\n}\r\n\r\nfunction initLegend(svg, colorScale) {\r\n  const defs = svg.append('defs')\r\n  svg.append('rect').attr('class', 'legend bar')\r\n  svg.append('g').attr('class', 'legend axis')\r\n\r\n  const linearGradient = defs\r\n  .append('linearGradient')\r\n  .attr('id', 'gradient')\r\n  .attr('x1', 0).attr('y1', 1).attr('x2', 0).attr('y2', 0)\r\n\r\n  linearGradient.selectAll('stop')\r\n  .data(colorScale.ticks().map((tick, i, nodes) => (\r\n    {\r\n      offset: `${ (100*i / nodes.length)}%`,\r\n      color: colorScale(tick)\r\n    })))\r\n  .join('stop')\r\n  .attr('offset', d => d.offset)\r\n  .attr('stop-color', d => d.color)\r\n}\r\n\r\nfunction drawLegend(x, y, height, width, fill, colorScale) {\r\n  d3.select('.legend.bar')\r\n    .attr('fill', fill)\r\n    .attr('x', x)\r\n    .attr('y', y)\r\n    .attr('height', height)\r\n    .attr('width', width)\r\n    \r\n  const scale = d3.scaleLinear()\r\n  .domain(colorScale.domain())\r\n  .range([height, 0])\r\n\r\n  let axis = d3.axisRight()\r\n  .ticks(7)\r\n  .scale(scale);\r\n\r\n  d3.select('.legend.axis')\r\n  .call(axis)\r\n  .attr('transform', 'translate('+ (x+15) + ',' + y + ')')\r\n}\r\n","import * as preproc from './preprocess.js'\r\n\r\n// https://d3-graph-gallery.com/chord.html\r\n// https://observablehq.com/@d3/directed-chord-diagram\r\n// https://jyu-theartofml.github.io/posts/circos_plot\r\n// http://strongriley.github.io/d3/ex/chord.html\r\nexport function build(div, data) {\r\n  // TODO : Comment trouver la taille d'une div encore non charge ?\r\n  const bounds = d3.select('#stacked-area-chart').node().getBoundingClientRect()\r\n  let chordWidth = screen.width/2;\r\n  console.log(chordWidth);\r\n  var margin = {\r\n    top: chordWidth*0.17,\r\n    right: chordWidth*0.05, \r\n    bottom: chordWidth*0.07,\r\n    left: chordWidth*0.20 }, // TODO : Revoir valeur\r\n  width = chordWidth - margin.left - margin.right,\r\n  height = chordWidth - margin.top - margin.bottom;\r\n\r\n  //const innerRadius = chordWidth / 4 // TODO : Revoir valeur\r\n  //const outerRadius = innerRadius + 10\r\n  const outerRadius = width/3.5;\r\n  const innerRadius = outerRadius-10\r\n  // create the svg area\r\n  const svg = div.select('#tab-3-chord-diagram')\r\n  .append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n  .append(\"g\")\r\n    .attr(\"transform\", \"translate(\" + (margin.left+outerRadius) + \",\" + (margin.top+outerRadius) + \")\");\r\n\r\n  // create input data: a square matrix that provides flow between entities\r\n  const matrix = preproc.chordMatrix(data, \"2010-01-01\", \"2023-01-01\")\r\n  \r\n  const colors = preproc.REGION_COLOR\r\n\r\n  // give this matrix to d3.chord(): it will calculates all the info we need to draw arc and ribbon\r\n  const res = d3.chord()\r\n    .padAngle(0.05)     // padding between entities (black arc)\r\n    .sortSubgroups(d3.descending)\r\n    (matrix)\r\n  /*// create a tooltip\r\n  const tooltip = d3.select(\"#tab-3-chord-diagram\")\r\n    .append(\"div\")\r\n    .attr(\"id\",\"tooltip\")\r\n    .attr(\"x\", 8)\r\n    .style(\"position\", \"absolute\")\r\n    .style(\"visibility\", \"hidden\")\r\n    .text(\"I'm a circle!\");\r\n*/\r\n  // add the links between groups\r\n  const links = svg\r\n  .datum(res)\r\n  .append(\"g\")\r\n  .attr(\"id\", \"links\")\r\n  .selectAll(\"path\")\r\n  .data(function(d) { return d; })\r\n  .enter()\r\n  .append(\"path\")\r\n    .attr(\"class\", \"chord\")\r\n    .on('mouseenter', function({source, target}, _) {\r\n      const tooltip = d3.select(`#${preproc.REGION_NAME_ALT[source.index]}${preproc.REGION_NAME_ALT[source.subindex]}`)\r\n      return tooltip.style(\"visibility\", \"visible\");\r\n    })\r\n    .on('mouseleave', function({source, target}, _) {\r\n      const tooltip = d3.select(`#${preproc.REGION_NAME_ALT[source.index]}${preproc.REGION_NAME_ALT[source.subindex]}`)\r\n      return tooltip.style(\"visibility\", \"hidden\");\r\n    })\r\n    .attr(\"d\", d3.ribbon()\r\n      .radius(innerRadius)\r\n    )\r\n    .style(\"fill\", function(d){ return(colors[d.source.index]) }) // colors depend on the source group. Change to target otherwise.\r\n    .style(\"stroke\", \"black\")\r\n    .attr(\"opacity\", 0.5)\r\n\r\n  const tooltips = svg\r\n    .datum(res)\r\n    .append(\"g\")\r\n    .attr(\"id\",\"tooltip\")\r\n    .selectAll(\"path\")\r\n    .data(function(d) { return d; })\r\n    .enter()\r\n    .append(\"text\")\r\n      .attr(\"id\",function(d) {\r\n        return (`${preproc.REGION_NAME_ALT[d.source.index]}${preproc.REGION_NAME_ALT[d.source.subindex]}`);})\r\n      .attr(\"class\", \"tooltip\")\r\n      .attr(\"x\",0)\r\n      .attr(\"y\",outerRadius+25)\r\n      .attr('text-anchor', 'middle')\r\n      .attr('dominant-baseline', 'middle')\r\n      .text(function(d) {\r\n        return `${preproc.REGION_NAME[d.source.index]} --> ${preproc.REGION_NAME[d.source.subindex]} : ${d.source.value} navires`\r\n      })\r\n      .style(\"visibility\", \"hidden\")\r\n\r\n  // add the groups on the outer part of the circle\r\n  svg.datum(res)\r\n    .append(\"g\")\r\n    .attr(\"id\", \"groups\")\r\n    .selectAll(\"g\")\r\n    .data(function(d) { return d.groups; })\r\n    .enter()\r\n    .append(\"g\")\r\n    .attr(\"class\", \"group\")\r\n    .append(\"path\")\r\n      .style(\"fill\", function(_,i){ return colors[i] })\r\n      .style(\"stroke\", \"black\")\r\n      .attr(\"d\", d3.arc()\r\n        .innerRadius(innerRadius)\r\n        .outerRadius(outerRadius)\r\n      )\r\n      .on(\"mouseover\", function(event, _) {\r\n        console.log(`Rgion ${preproc.REGION_NAME[event.index]} (${event.value} navires)`)\r\n        highlightGroup(event, links)\r\n      })\r\n      .on(\"mouseleave\", function() {\r\n        unhighlightGroup(links)\r\n      })\r\n\r\n  // add the label of groups\r\n  svg.datum(res)\r\n    .append(\"g\")\r\n    .attr(\"id\", \"labels\")\r\n    .selectAll(\"text\")\r\n    .data(function(d) { return d.groups; })\r\n    .enter()\r\n    .append(\"g\")\r\n    .attr(\"transform\", function(d) { return \"rotate(\" + (d.startAngle * 180 / Math.PI - 90) + \") translate(\" + outerRadius + \",0)\"; })  // TODO : Revoir valeur\r\n    .append(\"text\")\r\n    .attr(\"x\", 8)\r\n    .attr(\"dy\", \".25em\")\r\n    .attr(\"transform\", function(d) { return d.startAngle > Math.PI ? \"rotate(180) translate(-16)\" : null; })\r\n    .style(\"text-anchor\", function(d) { return d.startAngle > Math.PI ? \"end\" : null; })\r\n    .style(\"fill\", function(_, i){ return(colors[i]) })\r\n    .style(\"font-weight\", \"bold\")\r\n    .style(\"font-size\",12)\r\n    .text(function(d) {\r\n      if (d.index != 7 && d.index != 8) {\r\n        return preproc.REGION_NAME[d.index]\r\n      } else if (d.index == 7) {\r\n        console.log(preproc.REGION_NAME[d.index])\r\n        return preproc.REGION_NAME[d.index].slice(0, 12) + \"tspan\" + preproc.REGION_NAME[d.index].slice(12,)\r\n      } else {\r\n        console.log(preproc.REGION_NAME[d.index])\r\n        return preproc.REGION_NAME[d.index].slice(0, 13) \r\n      }\r\n    })\r\n}\r\n\r\nfunction highlightGroup(event, links) {\r\n  links\r\n    .filter(function(d) { return d.source.index != event.index })\r\n    .attr(\"opacity\", 0.1)\r\n}\r\n\r\nfunction unhighlightGroup(links) {\r\n  links.attr(\"opacity\", 0.5)\r\n}\r\n/*\r\nfunction getContents (source) {\r\n  // TODO : Generate tooltip contents\r\n  return `\r\n  <div>\r\n    <div>\r\n      <label style=\"font-weight: bold;\">Region de dpart : </label>\r\n      <label class=\"tooltip-value\">${preproc.REGION_NAME[source.index]}</label>\r\n    </div>\r\n    <div>\r\n      <label style=\"font-weight: bold;\">Rgion d'arrive : </label>\r\n      <label class=\"tooltip-value\">${preproc.REGION_NAME[source.subindex]}</label>\r\n    </div>\r\n    <div>\r\n      <label style=\"font-weight: bold;\">Nombre de navires : </label>\r\n      <label class=\"tooltip-value\">${source.value} $ (navires)</label>\r\n    </div>\r\n  </div>\r\n  `\r\n}\r\n\r\nfunction showTooltip(event, links) {\r\n  \r\n}\r\n\r\nfunction unshowTooltip() {}\r\n*/","import * as onglet1 from './scripts/onglet1.js'\r\nimport * as onglet2 from './scripts/onglet2.js'\r\nimport * as onglet3 from './scripts/onglet3.js'\r\nimport * as chord from './scripts/chord.js'\r\n\r\n(function (d3) {\r\n    onglet1.build(d3.select('#tab-1-content'))\r\n\r\n    d3.csv('./TRIP_CHORD.csv').then(function(chordData) {\r\n        chord.build(d3.select('#tab-3-content'), chordData)\r\n    })\r\n\r\n    onglet3.build(d3.select('#tab-3-content'))\r\n\r\n    // d3.select('#tab-3-content #date-control-refresh').on('click', function() {\r\n    //     console.log('cc')\r\n    //     const start = d3.select('#date-start-control').property('value')\r\n    //     const end = d3.select('#date-end-control').property('value')\r\n\r\n    //     console.log(start, end)\r\n    // })\r\n\r\n    // TODO : Resize automatique ?\r\n\r\n})(d3)\r\n\r\n$('.tab-button').click(function () {\r\n    if (!$(this).hasClass('tab-button-active')) {\r\n        const tab = $(this).data('tab')\r\n    \r\n        $('button.tab-button').removeClass('tab-button-active')\r\n        $(this).addClass('tab-button-active')\r\n    \r\n        $('.tab-content').removeClass('visible-tab')\r\n        $(`.tab-content#tab-${tab}-content`).addClass('visible-tab')\r\n    }\r\n})","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}