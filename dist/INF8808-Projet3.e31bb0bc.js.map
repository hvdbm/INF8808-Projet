{"version":3,"sources":["scripts/vesselTypeClasses.js","scripts/onglet1.js","scripts/preprocess.js","scripts/onglet3.js","scripts/chord.js","index.js"],"names":["vesselTypeClasses","build","div","bounds","d3","select","node","getBoundingClientRect","margin","top","right","bottom","left","width","height","svg","append","attr","csv","d","date","timeParse","Other","Tugs","Fishing","Barges","Tanker","PleasureCrafts","Excursion","Merchant","then","data","keys","columns","slice","color","scaleOrdinal","domain","range","schemeSet2","stackedData","stack","x","scaleTime","extent","call","axisBottom","ticks","text","y","scaleLinear","axisLeft","areaChart","area","y0","y1","selectAll","enter","key","style","highlight","noHighlight","size","_","i","on","GLOBAL_VESSEL_TYPE","REGION_NAME","REGION_COLOR","REGION_NAME_ALT","findGlobalVesselType","vesselType","includes","clean","cleanData","forEach","element","push","substring","chordMatrix","departureDate","arrivalDate","matrix","Array","length","index","departureRegion","arrivalRegion","j","filter","map","value","count","reduce","partialSum","v","Number","rebuild","startDate","endDate","remove","buildHeatmap","myGroups","preproc","myVars","scaleBand","padding","myColor","transformData","heatmapMap","line","keyStart","keyStop","has","set","current","get","p","max","from","values","Region","Type","transformedData","rectSelect","rectUnselect","bandwidth","initLegend","drawLegend","Map","region","type","toFixed","colorScale","defs","linearGradient","tick","nodes","offset","join","fill","scale","axis","axisRight","chordWidth","window","innerWidth","outerRadius","innerRadius","colors","res","chord","padAngle","sortSubgroups","descending","links","datum","source","target","tooltip","subindex","ribbon","radius","tooltips","groups","arc","event","console","log","highlightGroup","unhighlightGroup","startAngle","Math","PI","onglet1","chordData","onglet3","start","property","end","$","click","hasClass","tab","removeClass","addClass"],"mappings":";;AKAA;;AACA;;AACA;AJFA,ADAO,SAASA,iBAAT,GAA6B;AIApC,ADAA,ADAO,AFCH,IEDSkE,KFCF,CACH,QADG,EAEH,EEHuB,GAAG,CAAC,KFCxB,EAGH,CEJ0B,EAAW,MFClC,EAIH,GEL0B,EAAwB,KFC/C,EAKH,EEN0B,EAAmC,GFC1D,EAMH,KEP0B,EAA+C,OAA/C,EAAwD,AFC/E,EAOH,QAPG,EAQH,KET0B,CFCvB,CEDkG,CFUrG,OEV0B,AFCvB,CAAP,CEDmH,MAArF,CAA3B;ADEP,ADUC;ACTM,ACFA,IAAMC,KDEGlE,KAAT,CAAeC,ACFE,GDEjB,ACFoB,CAAC,CDED,OCFA,EAAW,SAAX,EAAsB,qBAAtB,EAA6C,cAA7C,EAA6D,WAA7D,EAA0E,SAA1E,EAAqF,QAArF,EAA+F,qBAA/F,EAAsH,qBAAtH,CAApB;ADGL;AIAF,AJCE,ACHK,CGEN,GHFYkE,EDGLjE,KIDGC,CJCG,CIDb,EAAc,AJCEA,CCHQ,CDGN,CAACC,CCHQ,CAAC,IDGZ,CAAU,ICHC,EAAY,SAAZ,EAAuB,IDGlC,EAAiCC,GCHtB,CDGX,CCH6C,EDGLC,OCH7B,EAA6C,SAA7C,EAAwD,CDGnE,EAAf,MCH0B,EAAmE,SAAnE,EAA8E,SAA9E,EAAyF,SAAzF,CAArB;AGGHuK,AJCF,EIDEA,IJCEtK,GIDK,CAACP,EJCA,GIDR,AJCW,CIDGG,EAAE,CAACC,MAAH,CAAU,gBAAV,CAAd;AAEA,ADLJ,AHIgBI,AEJT,ADCA,IDGSA,ACHH4D,EGIL0G,CJDW,EAAE,AEJL9E,EFID,IICX,CFLG,CAAiB/F,EDCI,CCDrB,EAAsBgG,ADCE,CAAC,QCDzB,ADCwB,ECDSC,ADCE,OCDnC,EAA0C,ADClB,EAAsB,qBAAtB,EAA6C,cAA7C,EAA6D,WAA7D,EAA0E,SAA1E,EAAqF,QAArF,EAA+F,oBAA/F,EAAqH,qBAArH,CAAxB;AGKH/F,ADLJ,AHGyBM,AEHvBR,EEKEE,AFLFF,EEKI,AJFmBQ,CIElBQ,AFLF,CAACb,EEKF,CAAO,AJFmB,EAAE,CEH9B,CAAW,CFGE,aIEX,EAA2ByB,AFL7B,EACGzB,EEID,CAAgC,GFLlC,CACU,KADV,CEK2C0B,CFHxCqE,GEG+B,EAAe,CFLjD;AEMM2E,ADLR,AHEqCpK,AECnC0F,EAAAA,EEEM0E,AJH6BpK,MAAM,EAAE,CIG5B,CJHF,AECD,CAACT,CEEK6B,EFFN,EEEN,AFFYmE,SAAN,EAAiBC,OAAjB,CAAZ;AEGMoD,ADLR,AHCiD3I,AEEhD,ADHD,ECKA,EEAQ2I,AJJyC3I,IAAI,CIIxC,AHLJ0D,CGKKrE,AJJyC,KII/C,CAAYG,EAAE,CAACC,MAAH,CAAU,GHL9B,CAA8BkE,UAA9B,EGKoB,AHLsB,CGKlC,EAAyCxC,IAAzC,EAA+C,YAA/C,EAA6D,YAA7D;AACH,ADLE,AHAQ,ACAb,GGEE,AJFF,GCAI,CAAC,EEAS9B,KAAT,CAAeC,GAAf,EAAoB6B,IAApB,CFAD,CEA2BmE,CFAN,QEApB,EAAqCC,MFAtC,CEAC,CFAqC,CEAS,YFA/C,EAAoD,eAApD,EAAoE,eAApE,EAAoF,WAApF,EAAgG,qBAAhG,EAAsH,wBAAtH,EAAgJ,qBAAhJ,EAAuK,oBAAvK,EAA4L,sBAA5L,EAAmN,aAAnN,EAAiO,WAAjO,EAA6O,eAA7O,EAA6P,mBAA7P,EAAkR3B,QAAlR,CAA2RD,UAA3R,CAAJ,EAA4S;AGO1SyG,ADNF,AHDA,ACCE,EGMAA,IJNFnK,GIMS,CAACwF,CJNL,ACAI,GDADlG,KCAN,CDAY,CAACU,CIMb,CAAqBT,EAAE,CAACC,AJNlB,GAAeG,GIMA,CAAU,EJNJ,CAACI,IAAtB,GAA6BJ,MIMd,AJNoB,CIMzC,AJN0CE,EIMQ,GJPpD,SIOE,EAAgE,YAAhE;AAEAN,ADNF,AHHA,AEKK,ADHJ,EGOCA,CHTF,CGSI,CAACC,CDND2I,AHDJlI,GEGcuF,ADHP,EGOL,CAAU,AJPN,CCAK,CAAC,CDAH,CGCK,GAAG4C,EHDFzI,AEGV,CAAsBN,GCFJ,ADElB,CCFmBgJ,CHDH,AEGWhD,CFHVzF,GAAb,GAAmBD,CCAjB,CECM,ADEZ,CDH8BgE,CCGQ2B,CCFN,CAArC,AHDkC,CGFiB,AHEhBxF,CGCI,GDElC,ADHM,CAAiC4D,CDF5C,AEKoD,CFR3B,CAOzB,CIKE,EAAkDN,EAAlD,CAAqD,CHP5C,CAAJ,EAAkD,GGOvD,EAA8D,YAAW;AACrE,AFJN,ADHE,QGOUgH,GHPH,EGOQ,GAAG7K,EAAE,CAACC,GHPrB,GGOkB,CAAU,qBAAV,EAAiC6K,QAAjC,CAA0C,OAA1C,CAAd;AACA,ADNN,AHAA,AEGA,ADJC,GAFM,GEGH1K,AHAAO,EIMQoK,CJNL,ACDA,EGOQ,CDNL,AHAAjL,CCDC,CGOOE,AHPN,CECC,AHAA,CIMO,AJNNC,CIMOA,KJNX,CIMQ,AJNG,CIMO,CHPjB,EAAc,gBGOP,CJNR,CIMuC6K,CJLhDlK,MADS,CIMQ,AJLV,CIKkD,IJNhD,ACDC,EDGRC,ACHuD,CGOxC,CAAZ,EJNI,CAEF,OAFE,EAEOJ,ACHN,EAA+D,GDGpD,GAAGL,MAAM,CAACI,GCHrB,CDGM,CCH2E,EDGrDJ,MAAM,CAACE,KAFpC,EAGPO,ACJQ,EAAmG,EDCpG,CAGF,QAHE,CCDC,CDIOH,CCJ0G,KDIpG,GAAGN,MAAM,CAACC,GAAhB,GAAsBD,MAAM,CAACG,CCJpC,EAAgJ,GDCjJ,EAITK,MAJS,CAIF,ECLG,CDCD,CCDiK,CDMxKC,IALO,CAKF,KCNG,EAA6K,IDC9K,EAMF,eAAeT,MAAM,CAACI,GCPnB,CDOH,CCPiN,EDOpL,GAA7B,GAAmCJ,ACPhC,EAAwN,IDOlL,CAACC,GAA1C,GAAgD,ECP7C,CDCD,CAAV,ACDkP,SAAvO,EAAkP,SAAlP,EAA6P+D,QAA7P,CAAsQD,UAAtQ,CAAJ,EAAuR;AGSxRgG,ADPJ9J,AHOFL,AEJA,ADJE,EDQFA,EIAMmK,ADPJ9J,AHOA,CAACS,CEJGV,CCHD,CHOL,CGPOwI,AHOA,EIAM,AHRJ,CGQKwB,AFJF,GEIN,AFJS,CEIGS,GDPD,CFDf,CGQI,CDPY,CCOOE,GAAnB,ADRO,YHQb,EAAsC,UAAShK,CAAT,EAAW;AIC3CoI,ADPJ7I,AHOE,AELYD,ADHf,GAFM,CGUD8I,ADPJ7I,ADEcD,GAAG,EEKR,ADPJ,ADEc,ADHd,CGQKwF,CDPH+C,AHOE,AELI,EDHJ,CAAC,GGQN,CAAc5I,EAAE,CAACC,ADPJ,CFDR,EECS,AFDE,GGQF,CAAU,ADTjB,YFCF,EAA6B,EGQpB,CAAd,EAA2C0K,SAA3C,CHRK,CGQiDE,CHRH,IGQnD,EAA6DE,GAA7D,MHRK,EAA+D,iBAA/D,EAAkF,kBAAlF,EAAsG,oBAAtG,EAA4H,gBAA5H,EAA8I,kBAA9I,EAAkK,eAAlK,EAAmL,oBAAnL,EAAyM,cAAzM,EAAyN,oBAAzN,EAA+O,6BAA/O,EAA8Q,iBAA9Q,EAAiS,gBAAjS,EAAmT3G,QAAnT,CAA4TD,UAA5T,CAAJ,EAA6U;AGS9UyG,ADPJrK,AHOIS,AENmBV,ADFvB,IGQIsK,ADPJrK,ADCuBD,EFMnBU,GENwB,CCDtB,AHOE,CIAG,AFNmB,ADFvB,CGQK6E,ADPJ+C,AHOG5I,AENE,EFMA,CAACiB,IIAV,CAAgBjB,CHRpB,CGQsB,ADPJ,CCOKC,CJAZ,CGPQ,AHOK,IIAJ,ADVT,CCUmB,KJAnB,EAAyBc,CAAC,CAACC,IAA3B,CADF,EICW,CAAhB,EAA6C6J,KAA7C,EAAoDE,GAApD;AACH,ADPDvK,AHOIU,AEP6BX,ADDlC,GGCC,AHHK,CEGLC,ADAiCD,EFO7BW,EGPA,CFDC,CECC0H,ADAiC,CFO9B,CEPgC,CFO7B7H,ACRH,CDQI,AEPA,ADDH,CDQIG,KGPE,AHKP,GGLQ,gBFDR,EAA4B,aAA5B,EAA2C,aAA3C,EAA0DkD,QAA1D,CAAmED,UAAnE,CAAJ,EAAoF;AGU5F,ADbc,AHYPhD,AERyCX,ADA7C,CGXJ,EAoBGR,ADbD,CDI+CQ,CEXjD,CJmBQW,EER6C,EFQzC,AER2C,CDA5C,CDQIJ,CAAC,CAACI,IAHJ,UCLT;AEJF,AHaMC,AETS,ADCd,GCDD,ADDO,GECoB,AHSrBA,GCRC,IDQM,ACRH,CAAC,CDQKL,CAAC,CAACK,OAJP,SCJD,EAAsB,mBAAtB,EAA2C,uCAA3C,EAAmF,gBAAnF,EAAoG,mBAApG,EAAwH,wBAAxH,EAAiJ,mBAAjJ,EAAqK,uBAArK,EAA6L,uBAA7L,EAAqN,eAArN,EAAqO,eAArO,EAAqP,gBAArP,EAAuQgD,QAAvQ,CAAgRD,UAAhR,CAAH,EAAgS;AGUzS6G,ADVEvK,AHSMY,AEVN,ADEE,CGSH,CAAC,ADVAZ,IHSMY,AETJZ,CCAG,GAAGmI,CDAD,ADCE,CDQG,EAAG7H,AETL,CEUX,AJDiB,CIClB,AJDmBM,CICF4J,EHTb,CEDgB,ADAF7K,EEUlB,AJNa,CIMU,ADVAA,GDAC,CAACI,ECAI,CAACA,CDAlB,GCAF,ADAsBJ,CEUG,EDVEA,GDAC,CAACE,ECAI,CAACA,EDD1C,GCJA;ACgBE,ADhBF,AHeMgB,AEXN,ADGC,GAFM,GGWD,ADVNZ,AHSMY,AETJZ,CEUKsK,CAAC,CAAC,AHTF,GEDD,AHSM,AETJ,CEUA,AHTG,CGSJ,AJDQjK,ACRH,CGSGmK,ADVNtC,AHSO,AETL,CFSMtH,GCRN,ECDMlB,ADCE,CDER,CIOJ,CAAiB,CDVL,EDAI,CCADA,ADAEC,GAAb,ADCA,EAAoB,CEDH,ADAED,CCADC,GAApB,EDA2B,CCADD,ADAEG,EEU9B,CAAL,EAA4C,AHTnC,CED8B,ADFzC,CCE0CA,ADNU,ADON,CCC9C,KCRA,CALmD,CAanD,GFDW,EAAgD,YAAhD,EAA8D,eAA9D,EAA+E6D,QAA/E,CAAwFD,UAAxF,CAAJ,EAAyG;AGU1G,ADRN,AHOM5C,ACRJ,MDQIA,EICM4J,GAAG,AHTN,GGSSH,CAAC,CAAC,CHTlB,GGSiB,AJDC,CICF,CAAQrJ,AJDJZ,CAAC,CAACQ,EICN,CAAa,KAAb,CAAZ,KJRK;AIULyJ,AJFAxJ,AERN,ADAC,GAFM,CGYDwJ,CAAC,CAAC,AJFFxJ,AERAb,GAAG,ADAF,GCAKb,GFQG,AERA,CAACG,CFQEc,CAAC,CAACS,GERR,CAAW,EEUhB,CAAD,CAAuB4J,CJVlB,UIUL,CAAmC,AFV7B,EACXxK,MADW,CACJ,KADI,EAETC,GEQG,CFVM,CAEJ,OAFI,EAEKJ,KAAK,GAAGL,MAAM,CAACI,IAAf,GAAsBJ,MAAM,CAACE,KAA7B,GAAqC,EAF1C,EAGTO,IAHS,CAGJ,QAHI,EAGMH,MAAM,GAAGN,MAAM,CAACC,GAAhB,GAAsBD,MAAM,CAACG,MAHnC,EAIXK,MAJW,CAIJ,GAJI,EAKTC,IALS,CAKJ,WALI,sBAKsBT,MAAM,CAACI,IAL7B,cAKqCJ,MAAM,CAACC,GAL5C,OAAZ,CAToD,CAgBpD;AEIM2K,ADVN,AHQMvJ,ACRJ,IGUIuJ,CAAC,CAAC,ADVFjC,AHQAtH,IIEC,CAAD,AHVG,CGUK4J,EJFA,EAAGtK,CGRA,AHQC,CAACU,ACRjB,EGUI,ADVchB,CCUG,IDVE,GAAC,GAA1B,SCUM;AAEAuK,ADXN,AHFW,AEQX,ADNC,IGWKA,CAAC,AJbH,CIaI,ADXFhC,ADMA9C,QAAQ,GCNG,ADMAC,GEKV,ADXa4C,CCWd,CAAkBqC,EFLA,CAACtH,MCNM,ECWzB,CAA8B,ADXJ,EAAhC,CAhBmD,CAiBnD,KDKA,IEKM;AACAkH,AJHL,AEFD,ADND,GDJC,CIeMA,CAAC,AJHJtJ,CEFG0E,GFVN,CAYS,EEFG,GAAGD,KFEGxE,EEFI,CAACoC,CFEd,EAAe,OIGIoH,CFL5B,CAlBoD,CEuB7C,AFHP,cEGM,CAAqCE,QAArC,CAA8C,aAA9C;AACH,ADXH,AHQE,MGRI1K,EHQEiB,CGRC,GAAG9B,AHQA,GGRG,AHQA6B,CGRC1B,GHQG,CAAC4B,EGRR,CAAW,IHQR,CAAaC,KAAb,CAAmB,CAAnB,CAAb,CADsB,CACc,OGR1B,EACXlB,MADW,CACJ,KADI,EAETC,IAFS,CAEJ,OAFI,EAEKJ,KAAK,GAAGL,MAAM,CAACI,IAAf,GAAsBJ,MAAM,CAACE,KAFlC,EAGTO,IAHS,CAGJ,QAHI,EAGMH,MAAM,GAAGN,MAAM,CAACC,GAAhB,GAAsBD,MAAM,CAACG,MAHnC,EAIXK,MAJW,CAIJ,GAJI,EAKTC,IALS,CAKJ,WALI,EAKS,gBAAgBT,MAAM,CAACI,IAAP,GAAYuI,WAA5B,IAA2C,GAA3C,IAAkD3I,MAAM,CAACC,GAAP,GAAW0I,WAA7D,IAA4E,GALrF,CAAZ,CAlBmD,CAyBnD;ACKD,AFJC,ADPK,CGCP,KFMQzG,CAAC,EDPO+B,CCOJrE,EAAE,CAACqG,CDPR,CAAe1E,IAAf,EAAqB,CCOhB,GACPO,KADO,CACD,CAAE,CAAF,EAAKzB,KAAL,CADC,EAEPwB,MAFO,CAEAiE,QAFA,EAGPI,OAHO,CAGC,IAHD,CAAV;ACAA,AHEE,AEGF3F,ADXA,ECWAA,GAAG,CCLGmE,ADKFlE,ADXE0D,EDQEvC,IGFI,ADKZ,CFHa,AEGF,ECLIoE,AFNA,CDQCnG,AEGhB,EFHkB,AEIfa,ADZe,CDQCmB,CCRnB,EEMsB,ADKtB,CCLuB2C,ADMf,QFJQ,GGFD,AHGV1C,AEEL,CCLmCN,IAApB,CHEC,CGFyBmE,AHG7B,SGHG,EAAqCC,OAArC,ADMsBrF,CCNrC,KDKA,QAEG+B,IAFH,CAEQzC,EAAE,CAAC0C,GFLK,EAEXR,KAFW,AEKR,CFHGlC,AEGWsC,CAAd,CFHK,AECb,CFDcH,CEIXiB,SFNa,AEGhB,CFHE,AEMW,MAHb,EAIGvC,IAJH,CAIQ,WAJR,EAIqB,8BAJrB,EA1BoD,CAgCpD;ACTA,AHIE,ACXFc,EAAAA,IEOMsH,AFPF,CAAC1E,CDWGnC,IGJI,EFPZ,CEOe+D,AFPF,IDWM,GGJG,AHIAnG,CGJCgE,CHIC,CAAC3B,ACXZmC,KDWS,ECXF,CDYf5C,CCZmB,CEOxB,CA5BmD,CA8BnD,AHEsB,CACZA,IADY,EAEnBD,IAFmB,CAApB,CAPsB,CAWtB;AEEF,ADhBE,MCgBIkB,CAAC,CDhBD2B,ECgBIxE,EAAE,CAACqG,EDhBA,CAAC,MCgBJ,EDhBG,CCiBVnE,ADjBG,IAAqB,CCgBjB,ADhBJ,CCiBG,CAAExB,EDhBL8D,ICgBG,EAAU,CAAV,ADhBI,CCeH,ADfI,ECiBXvC,KDjBU,CCeH,ADfJ,CCiBImE,GDjBgB,CAApB,ECeI,CDdJ5B,CCiBH8B,MDjBU,CCcH,ADdI,CCiBH,IAHD,CAAV,WDda,CAAP,GAA6B,EAF7B,IAGA9B,OAAO,CAAC,gBAAD,CAAP,GAA4B,CAAC,cAAD,CAHhC,EAGkD;AEMpD,AHME,AEKF7D,ADhBI2D,ECgBJ3D,GAAG,CCXGuI,ADWFtI,ADhBA0D,EDWIhC,CGNC,AHMA,GGNGtC,AHMAA,AEKZ,CAAW,CCXG,AHMA,CGNCmJ,AHMA5G,ACXF,CCgBb,ADhBckC,ECiBXhC,ECZS,AFLR,CAAe,CCgBnB,CCVG2G,ADWKpJ,CFNI,CEMF,CAAC+C,CFLRd,IGPS,CACA,CHKA,CACFjC,AEKF,CAAY6C,CCZR,AHOA,AEKJ,CFLKL,AEIb,CCVsB,CD3B8B,CAwCpD,GFPU,CAAUb,IAAV,EAAgB,UAAAZ,CAAC;AGPf,AHOe,ACXrB,GEMHsI,UHK4BtI,CAAC,CAACC,CGPrB,CAEKhB,EAAE,AHKQ,CGLPsJ,IFNE9E,MEIV,CFJiB,CEO1BM,AFP2B,MEIlB,CAAZ,CA/BmD,CAoCnD,KFT6B,CAAP,CAAwBJ,SAAxB,CAAkC,CAAlC,EAAoC,EAApC,CADH;ADYQ,AEQ3B,ADlBM,KDUI,CADE,AESN6B,EFPHrE,KAFS,AESC,CFPJ,CAAE,CAAF,AEOOlC,EFPFS,AEOI,CAACqC,IFPV,CAFG,CAAV,ECTuB0B,GCkBT,GACbtC,CDnB6B,CAAC,GCkBjB,CACP,CAAC,OAAD,EAAU,GDnBa,CAFb,KCqBV,CADO,CAAhB;ACTA,AHGEvB,ACXI,IDWJA,EGHI4I,CHGD,CAAC3I,GGHK,GAAGD,AHGZ,CAAW,EGHI,CAChB6I,AHEC,EACG3I,GGJS,CACPqI,AHEL,CACQ,CCZc1E,CEQV,EAEb5D,IFV8B,CAAC,CEQlB,CAEN,AHCN,EACqB,CGJT,EAGbC,IAHa,CAGR,IAHQ,AFRiB,CAHZ,CEcP,GHC4BH,IGJ1B,EAIb0C,AHAsB,GAA0B,GAD/C,EAEGX,CGLS,CAIH,EHDT,CAEQzC,EAAE,CGLE,AHKD0C,EGAZf,IALa,CAKR,GHAI,CAAcW,CAAd,EAAiBK,GGAZ5B,CAAT,CHAI,CGAQ,AHAe,EAAvB,CAFR,EAfsB,CAmBtB;AGFkB,ADQpB,ADpBM,WEYqBA,ADQlByF,CCRW,YDQpB,CAAuBzF,CAAvB,EAA0B6D,EDpBEJ,OAAO,CAAC,GCoBpC,EAAyCK,WAAzC,EAAsD,EDpBnB,CAJhB;AEgBY,AHG7BlE,AEMA,ADpBI,GEMQ,CHQZA,CGFD0C,EHEI,CAACzC,AEMA0E,ECdQ,CDcL,ECPR1E,CHCC,AEMU6F,CFNC,IGRC,CAON,CHCN,EACG5F,CEKiB,ECdR,ADcZ,ADpBsB2D,CDctB,CGAC3D,AHCO,IGTI,CAQN,AFduB,CAAC,MEMlB,CHQZ,CGAe,CHCQ,KADvB,CGRY,CHUTA,AChB0B,CEe5BgD,AFfqB,CAA0Ba,CEMpC,CASR,AHDJ,CAEQ,GAFR,EAEajE,CChBS,CAAoC,CAApC,EDctB,ACd6D,CEMjD,CHWTI,ACjBmB,CEeJ,AFpBD,GDmBjB,CAGQ,GAHR,EAGaH,MAAM,CGF0BiD,CAA3B,CHEE,CGF4B,CHDhD,EAIGf,IAJH,CAIQ,OAJR,EApBsB,CA0BtB;AGLgD,ADOhD,ADrBI,QEcwB6G,ADOtB9H,IAAI,ECPsC,CDOnCZ,CAAC,CAACsE,KCPaoE,CDOf,CAAS,ICP0B,CFdvBjF,KCqBFkC,EDrBS,CAAC,CCqBX,EAAU,gBDrBA,CANf;AEoB+B,AHMhD,AEEE,ADrBE,QEagCgD,AHM9B7G,CAAC,GAAG7C,CEED4E,CCRuC,AHMpC,CAAC9B,OGNuB4G,IHM1B,AEEY,ECR0B,AFbxBlF,CDoBrBvC,CECuByE,IAAI,CFFpB,AEEqB,ADrBA,CDoBrB,ACpBsB,CDoBrB,CAAD,EAAI,KAAJ,CADA,EACgB,GECI,CAArB,EDrBsB,CAPd,CC4BmC7B,WAAW,IAAI6B,IAAI,CAAC,cAAD,CAArE;ACPA,AHKQ,AEGT,ADrBG,KDoBDxE,AEDU,CAAb,ECNQyH,EHKE,CAED,CAAEjJ,GGPI,GAAGV,AHOT,ACpBKwE,EEaM,AHOD,CGPEvE,AHOZ,CAFC,CAAV,EClBqB,CAAC,CEaJ,OFbG,CARJ,IEqBekG,OAAO,CAAClC,eAAR,CAAwBwF,MAAM,CAACxE,KAA/B,CAAd,SAAsDkB,OAAO,CAAClC,eAAR,CAAwBwF,MAAM,CAACG,QAA/B,CAAtD,EAAhB;AACA,AHOFjJ,AEEAgB,ADtBI,IDoBJhB,AEEAgB,GFFG,CAACf,AEEA,CAAC2D,ECTIoF,GHOT,CAAW,CEEX,CAAa,CCTG,AHOhB,CGPiBpG,CHQdd,IGRM,AHOT,CGPuB,AHQfzC,EAAE,AECG0G,ADtBUlC,CDqBZzB,GECM,EAAI,CDtBS,CAAC,CDqBvB,CGRC,AHQWF,CAAZ,CGR6B,CHQdF,KAAf,CAAqB,EGRpB,AHQD,CGRN,AHOF,EA9BsB,CAiCtB,ACvB8B,CATb;AEuBhB,ADSC,ADtBE,GECQ,EAaXkB,EAbW,CAaR,EDQI8C,QAAQ,ECrBJ,CDqBOD,CCRD,CFdClC,ECsBI,CAAC,IDtBE,CAAC,QEckBb,CAA3B,EAA8B,EDQzB,ADtBG,CCsBP,ADhCF,GCgC2B+C,IAAI,CAAC,oBAAD,CAA9C;ACR8C,AHShD/F,AEAE,ADtBE,IDsBJA,GAAG,CGTyB8I,AHSxB7I,EEAIgG,ICTwC,AHShD,CAAW,EEAI,GAAGF,CFAlB,EGT4B+C,AHUzB5I,CEDmB,CAAC,EFAvB,CACQ,CGVwC,CFbtBqD,WDsB1B,AEAsB,CAAJ,CFCK,EEDkBwC,GFAzC,CEA6C,CFE1C7F,AEF2C,ADtBA,CAAC2D,GDsB/C,CAEQ,GAFR,ACtBsD,CAAC,CDwB1C,CAFb,EAGG3D,IAHH,CAGQ,EEHqC,CFA7C,AEAE,CDtBoD,CDyBzC,ACzBiC,CDyBhC,ACpCG,EDiCjB,EAIG+B,IAJH,CAIQ,mBAJR,EAKG/B,IALH,CAKQ,aALR,EAKuB,OALvB,EAlCsB,CAyCtB;AGhBgD,AFZ5C,QEYgC6I,MAAY,GFZnClF,MEYuBkF,CFZhB,CAAC,IEY2B,GFZ5B;AEalB,AHgBF,AEPE,ADlCe,OAAf,CEyBMC,AHgBF3G,EEPA,CAACsC,GAAG,CCTK,ADSJuB,EFOI,CGhBG7G,ADSX,CAAQ2G,CCTK,AHgBFhG,CGhBGV,EHgBA,CAACW,GGhBJ,ADSX,CAAL,EFOgB,AEPQ,CFOG,GAAX,CAAlB,IGhBgCuF,OAAO,CAAClC,eAAR,CAAwBwF,MAAM,CAACxE,KAA/B,CAAd,SAAsDkB,OAAO,CAAClC,eAAR,CAAwBwF,MAAM,CAACG,QAA/B,CAAtD,EAAhB;AACA,AHgBF,AEPItE,ADrBH,QD4BKrC,AEPFqC,GCTKqE,ADSF,CFOG,AEPF7C,GFOK9G,AEPT,CAAQ2G,CFOG,CGhBC,AHgBA1D,CGhBCM,GHgBJ,EGhBJ,ADSL,CCTmB,AHiBpBjB,CADU,AEPS,CFQjB,UGjBI,AHiBKvB,CAAT,CGjBgC,CHiBpB,OGjBR,CAAP;AACD,AHgBkB,AEPb,ADrBP,GEJa,AFhBd,EEiCGF,IAjBW,CAiBN,GAjBM,AHgCcyB,CAAC,CGfhBtC,AHeiBe,CAAC,CGfhB,AHeiBY,CGfhBkI,EDQEnD,CFOY,CAAO1F,EGfxB,ADQS,CAAC,CFOM,CGdxB8I,AHcgB,MGfR,CACDd,SDOU,CAAJ,CCRL,ADQ8BlH,CCzB7B,EAoBXyB,EDKe,CAA+B,CAA/B,CCzBJ,CAoBL,ADK0C,CAAC,CAAlC,CADM,GCxBV,EAoBG,UAASxC,CAAT,EAAW;AAAE,AHYe,AENrC,ADpBR,KDyBe,EAEVmC,EAFU,ACzBRoB,CD2BC,CGb6B2E,MAAM,CAAClI,ADM5B2F,ADpBhB,CEc6C,CAAC+C,AHa7B1I,CAAT,CEPY,CFOA,AEPC,GCNuB,CAASkE,KAAV,CAAb,UDMV,CAFI;ACJsC,AHaxC,AENd,ADpBT,GEPe,EAoBkD,QHanCpC,CAAC,CAAC9B,CAAC,CAAC,CAAD,CAAF,AENb,CFMK;AGjCR,AHiCyB,AETf,GCHrBwC,EHUY,EAGVJ,CGlCS,CAqBL,AHUM,AEPT,CFUE,OGlCM,EAqBK,CHaFpC,CAAT,EAAY,GGlCN,EAsBXF,IAtBW,CAsBN,SAtBM,EAsBK,GAtBL,CAAd;AAwBA,AHUsB,AELjB,ADpBA,MEeCkJ,CDDF,EDdUpF,IDyBe9B,AELlB,CCLG,AHUgB,CAAC9B,CAAC,CGVfJ,AHUgB,CAAD,CAAF,CGVV,AHUE,ACzBjB,CEgBF6I,AFhBuB7H,IAArB,CEeY,CACRuH,AFhBuBtE,GEef,EAEdhE,MAFc,CAEP,CFjBL,EEeY,AFf8BiE,EEkB5ChE,IAHc,CAGT,IAHS,AFfZ,EEkBQ,AFlB+C,SEe3C,EAIduC,SAJc,CAIJ,MAJI,EAKdzB,IALc,CAKT,UAASZ,CAAT,EAAY;AAAE,AHKiB,AEJjC,ADpBN,KDqBe,CAAb,ACrBI+D,CDtBkB,CAgDtB,GGP2B/D,CAAP,ADCVgG,ADpBA,GAAG,ICoBI,ADpBAhC,GCoBGO,EDpBP,CCoBU,ADpBAvB,CCoBCiD,GAAJ,CAAQL,MDpBM,CAAC3B,CCoBf,CAAhB,IDpBS,CAAf;AEmBiC,ADE3B+B,GCPW,EAMd1D,GDCG0D,ECPW,GAOdnG,EDAU,CAAC4E,GCPG,CAOP,CDAJ,IAAiB,CCPN,ADOX,ECCD3E,IARY,CAQP,IARO,EAQF,UAASE,CAAT,EAAY;AACrB,AHIJiC,AELIsC,ADrBN,ID0BEtC,GC1BG,CCqBCsC,GAAG,ADrBAL,CCqBC6B,CFKC,CACR1D,CENG,CAAQuD,ADrBA,GAAG,CAAjB,CEsBiBR,CFtBGlB,CD0BlB,CACW,AENP,EAAkB8B,CDrBC,CEsBD,CAAC9C,CFtBGa,GCqBtB,CFKJ,EAECnD,AC5B+B,CAACqD,GD0BjC,CAEM5C,EC5BR,CEsBiB,CAAwBrB,AFtBEkE,CEsBD,CAACwE,GFtBK,ED0B9C,AC1BF,CEsByC,CAASxE,AHO/C5B,AC7BiD,KEsBnC,AHIf,CGJI,EHQHzC,MAJD,CGJyDuF,AHQjD,MAJR,CGJgE,CAAClC,AHS9DpD,IALH,CAKQ,OALR,EAKiB,CGTwC,CAAwBE,CAAC,CAAC0I,MAAF,AHSvD1I,CGTgE6I,AHSzE,EAAY,MGT4B,CAArD;AAAoG,AHSzE,AET5B,ADrBH9E,GEYe,CFZfA,CEsBGjE,IAVY,CAUP,AFtBF,CAACoE,ED8B+B,GC9BhC,CEYS,AFZf,EEsBiB,CFtBD,IAAIF,CD8B8BhE,CAAC,CAACuC,CGlBrC,CFZC,CEuBbzC,AHO4B,AC9BLkD,IEYX,CAWP,GAXO,EAWH,CAXG,AFZsB,CAACiB,CEwBnCnE,IAZY,CAYP,AFxBQ,CAAhB,EEYe,EAYHkI,WAAW,GAAC,EAZT,EAaZlI,IAbY,CAaP,aAbO,EAaQ,QAbR,EAcZA,IAdY,CAcP,mBAdO,EAcc,QAdd,EAeZ+B,IAfY,CAeP,UAAS7B,CAAT,EAAY;AAChB,AHEqD,AC7B1D,KDwBC,EAMGwC,KANH,CAMS,MANT,EGGc4C,AHGG,OGHI,CAACpC,EHGIhD,CAAT,EAAY,MGHf,CAAoBA,CAAC,CAAC0I,MAAF,CAASxE,KAA7B,CAAV,kBAAqDkB,OAAO,CAACpC,WAAR,CAAoBhD,CAAC,CAAC0I,MAAF,CAASG,QAA7B,CAArD,gBAAiG7I,CAAC,CAAC0I,MAAF,CAASlE,KAA1G;AACD,AHE4B,AET7B,GCVa,EAkBZhC,KAlBY,ADUT,CCQG,ADRF+B,EFS+BvD,CET5B,CAAC8E,GFSgC,AETpC,CFSqC9F,AET7B6F,CFS8B,CAACtD,EGnB/B,CHmB4B,CGDpB,AHCQ,CETxB,CAAL,EAAuB,ICVV,CAAjB,CA7DmD,CAiFnD;AHDuD,AERjDgC,ADpBNvB,EAAAA,GDsBE,EAOGlD,CETCyE,GFEJ,AEFO,CFSC,AETAwB,CDpBC,CAACvC,CDsBV,AEFI,CAAQqC,CFSC3D,IAPb,ACtBF,CAAoB,CD3BI,AE+ClB,CFWJ,CEXqB,ODpBFiC,eAAD,EAAkBtB,CAAlB,EAAwB;AE8B5CjD,ADTQ,ADpBNoD,EE6BFpD,EF7BEoD,CE6BC,CAACyF,KAAJ,CAAUN,GAAV,AF7Ba,CAAC3E,CE8BX3D,GDVe8F,GCSlB,AF7BE,CE8BQ,ADVY,ADpBA,CCoBC,ECSvB,EAEG7F,IAFH,CAEQ,AF/BesE,IE6BvB,EAEc,CDXQ,CAAJ,CAAuBrD,IDpBnB,CE6BtB,ADTkB,CAA6B,ADpBTsD,CEgCnChC,ADZe,ADpBI,ECoB2B,ADpBL,CCoBM,CAAhC,CADK,ICUvB,CAGa,GAHb,EAIGzB,IAJH,CAIQ,UAASZ,CAAT,EAAY;AAAE,AHFpB,AEVM,ADpBJ+D,MAAAA,ED8BItB,GGEqBzC,CAAC,AFhCpB,CEgCqBiJ,AFhCpBpG,CAAD,CAAN,CAAUwB,CD8BG,AC9Bb,CCoBYsB,CCYM,CHFF,CC9BD/E,CCoBC,CAAC,EDpBE,CAChB0D,GD6BC7B,GC9BW,CACL,KD6BM,CAASzC,CAAT,EAAY,CEVZ,ADnBLA,CCiBQ,ADjBT,EAAO;AE+BmB,AHDpCf,AEVI,ADnBA,GE0BR,EAKGqD,CHFCrD,EAAE,CAACoD,CGHP,GAMGxC,EFhCYsE,GD6BX,CGHJ,AHGiB,AEVA,CCaP,GANV,EAOGrE,GHJC,CGHJ,CAOQ,AHJoB0C,AC7BE,KD6B1B,AC7B+BxC,CD6BD,AC7BE,CE0BpC,AF1BqC,EEiCpB,MHJb,CGHJ,CHG6C,CGK1CH,CHLC,EAD4B,CACkB,EGHlD,CAQU,AFlC0B,CAAD,CAAsBkB,IE0BzD,CF1BmC,CEmC9ByB,AFnC0D,CAA5B,EAA8B,CAAC,CE0BlE,AF1BmC,CEmCxB,AFnCI,IACF4B,EEyBb,EASmB,SFlCO,CEkCExB,CAAT,EAAWC,CAAX,AFlCY7C,CAAC,CEkCA,AFlCC,gBAAD,CAAD,CAAoBe,KAApB,CAA0B,CAA1B,EAA4B,CAAC,CAA7B,CADhB,IAEF8C,aAAa,IAAI7D,CAAC,CAAC,gBAAD,CAFhB,IAGF8D,WAAW,IAAI9D,CAAC,CAAC,cAAD,CAHrB;AEmC0B,ADnBX,ADZhB,OANY,ECkBb,ADXCuE,EE8BkC2D,CFrCtB,CAOR,IE8BoC,CAACrF,CAAD,CAAb,GF9BtB2B,KAAD;AE8ByC,AHLhDvF,AETC,ADhBM,GEqBX,EAUKuD,CHNDvD,CEfA,CFeE,CAACC,CGJP,CAUW,EDfA,EFSP,ACzBkBsF,CDyBR,GGJd,CFrB2B,CE+BN,AF/BOC,CDyBVzE,CAAd,EAAiBwC,CCzBV,EEqBX,EAWK1C,AHPD,CAAuB,GGJ3B,CAWU,GAXV,EAWeb,AHPX,EGOa,AHPqB,CGOpBiK,AHPd,EAF4B,CGSjB,AHP2B,GGQnCjB,WADQ,CACIA,WADJ,EAERD,WAFQ,CAEIA,WAFJ,CAXf,EAeKlF,EAfL,CAeQ,WAfR,EAeqB,UAASqG,KAAT,EAAgBvG,CAAhB,EAAmB;AAClCwG,AHXH,AETG,ADjBK,IEqCLA,CHdJ,CA3DsB,CAgEtB,ACnCiB,EAQZ1E,EEoCM,CAAC2E,ADpBFrD,GCoBN,AF5Ca,CAQL,ICgBK,GAAGzB,GAAG,ADhBVI,CCgBWsB,GAAJ,CAAQJ,KCoBFT,AFpCd,ECgBQ,ADhBKR,CCgBrB,ADhBQ,IEoCqB,CAAC5B,WAAR,CAAoBmG,KAAK,CAACjF,KAA1B,CAAtB,eAA2DiF,KAAK,CAAC3E,KAAjE;AACA8E,AFrCQ,IEqCRA,WFrC2BzE,GEqCb,CAACsE,EFrCkB,CAACxE,EEqCpB,EAAQ6D,KAAR,CAAd,AFrCiC,CAAN,GAAqB3D,MAAM,CAACD,CAAD,CAA9C;AEsCT,ADrBCoB,ADjBQ,GEoBd,EAmBKlD,EAnBL,AF5BmB,CE+CX,ADtBFkD,CDjB2D,CAR9C,CAAf,KCyBS,CAACvB,GCGd,EAmBsB,ADtBhB,IAAiB,CAAjB,OCsB2B;AAC3B8E,AHZJ,AEVIhF,ADjBH,IEuCGgF,CFjDJ,GDqCM7G,AEVF6B,GAAG,CAACwB,GAAJ,CAAQF,GFUK,CGYG,CAAC2C,CHZD,CEVhB,EAAiBxC,CCsBD,CAAhB,IHZEtD,EEVF,SFUgB,GAAU;AGa3B,AHZDzD,AEVC,ADjBJ,GEkBD,AF9BA,EEpDmD,CAyGnD,AHdIA,EAAE,CAACoD,SAAH,CAAa,SAAb,EAAwBG,KAAxB,CAA8B,SAA9B,EAAyC,CAAzC;AACD,AEVA,ADhBH,KDwBE,AEjCA,CFhCsB,CAqEtB,EC5BKuB,MAAP;AEwCAnE,ADtBE,ADjBH,EEuCCA,GAAG,CAAC6I,EDtBIvC,CAAC,ECsBT,CAAUiC,ADtBE,EAAV,CCsBF,EACGtI,MADH,CACU,GADV,EAEGC,IAFH,CAEQ,IAFR,EAEc,QAFd,EAGGuC,SAHH,CAGa,MAHb,EAIGzB,IAJH,CAIQ,UAASZ,CAAT,EAAY;AAAE,ADzBpB,QAAImG,GCyBuBnG,ADzBpB,CCyBqB,CAACiJ,CDzBnB,CAAV,ICyBoB;AAAkB,AHftC,AETAjF,GCoBF,CDpBEA,CCyBC1B,GHhBKK,CETD,CCoBP,ADpBQyD,EFSI,CGiBTvG,CD1BD,CFSa,AETF0E,EFSX,CETc,CCoBhB,ADpBiB8B,CC0BP,GANV,EAOGvG,AD3BU,EAAX,ECoBF,ADpB2B0D,CC2BnB,MD3BN,CAAiC,ICoBnC,EAOqB,ID3BegB,KAAD,CC2BLxE,CAAT,AD3ByB,EC2Bb;AAAE,AHjBjCJ,AETEsG,IFSFtG,EETEsG,CFSC,AETA,CFSC7D,AETAqB,GC0BoC,CD1BtC,CAAO,IFST,CAAc,MGiBuC1D,CAAC,CAACwJ,AHjBvD,EAA0B,QGiB2B,GAAe,GAAf,GAAqBC,IAAI,CAACC,EAA1B,GAA+B,EAA5C,IAAkD,cAAlD,GAAmE1B,WAAnE,GAAiF,KAAxF;AAAgG,AHjBjI,AERI,GCkBN,EAOsI,AHhBjIpH,IADH,CACQC,IADR,EAEGyB,EEVWkC,GFQd,EERmB,CFWhB3E,AEXiByG,MFQpB,AETS,CFYC,MAHV,EAIKxG,IAJL,CAIU,GAJV,EAIeJ,KAJf,EAKKI,IALL,CAKU,GALV,EAKe,UAAS8C,CAAT,EAAWC,CAAX,EAAa;AGK9B,AHLgC,AEZ1B,GCyBHhD,MARH,CAQU,GHb6B,GGKvC,ADjBc2E,EC0BX1E,AHdyC+C,CAAC,EEZ1B,CCiBnB,ADjBoB0D,CC0BZ,AHduC5D,GGK/C,ADnBW,CFcwC,CGctC,CATb,CHLoD,CGejD7C,AHf0C,CAAb,GGKhC,CAUQ,IAVR,EAUc,OAVd,EAWGA,IAXH,CAWQ,WAXR,EAWqB,UAASE,CAAT,EAAY;AAAE,AHhBoB,AEXjD,KFMJ,EAKuD,IGgBfA,CAAC,CAACwJ,ID3B3BhF,KAAK,CC2BoB,AD3BnBC,GC2BkCgF,ED3BxC,EC2B4C,CAACC,CD3B9B,CC2BU,GAAyB,AD3BjC9I,IAAI,CAACqD,MAAtB,CAAD,GAAkC,aC2BR,GAAwD,IAA/D;AAAsE,AHrBvG,AETS,GCmBX,EAYGzB,AHhBI1C,EEfH,EFSF,CGUF,AHJY,CGgBH,MHtBP,EAMmB6C,IANnB,CGUF,CHHO7C,CGeiB,GHtBtB,CAOU,MGeqBE,CAAT,CHtBtB,CGsBkC,CHfd2C,IAPpB,EAQK7C,IARL,CAQU,cARV,EAQ0B,GAR1B,EASKA,IATL,CASU,QATV,EASoB,OATpB,EAUK0C,KAVL,CAUW,MAVX,EAUmB,UAASxC,CAAT,EAAW;AGYM,AHZJ,WGYWA,CAAC,CAACwJ,AHZNxI,KAAK,CAAChB,CAAD,CAAZ,EGYW,GAAeyJ,IAAI,CAACC,EAApB,GAAyB,KAAzB,GAAiC,IAAxC;AAA+C,AHZnC,AEd9C,GCcJ,EAaGlH,AHvBD,EAWKM,EAXL,CGUF,AHCU,AEfD0B,CC2BA,ID3BK,CAACC,CCcf,EAaiB,EHvBf,AEJO,EFechC,EEfC,IC2BEG,AD3BAhC,CC2BT,EAAYiC,AHvB3B,CGuBe,AD3Ba,CFgBvBC,AEhBwBmB,CC2BA,CHvB7B,CAYQ,GEhBD,CAAD,GAAkC,GAAlC,EFIN,EAYsBvB,AEhByByD,GAA7C,EAAkD,MFIpD;AGuB+B,AHT/BvG,AEjBIuG,IFiBJvG,GAAG,CAACyC,AEjBA8D,GC0BkC+B,AD1B/B,GAAI1D,GC0BiC,AHT5C,CGS6C3B,AHT/B,CGS8B,AD1B5B,CC0Be,AD1Bd4B,KAAN,GFiBX,CEjB0B,CFiBE,GEjBA7D,IAAI,CAACqD,MAAtB,CAAD,GAAkC,GAAxC;AC0B8C,AHTlD,AEhBG,GCYL,EAcGzB,AHTE5B,IADH,CGJF,AHKUC,CGSD,GHVP,EAEGyB,KAFH,GGJF,AHOKzC,EGOmB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","file":"INF8808-Projet3.e31bb0bc.js","sourceRoot":"..","sourcesContent":["export function vesselTypeClasses() {\r\n    return [\r\n        \"Barges\",\r\n        \"Excursion\",\r\n        \"Fishing\",\r\n        \"Merchant\",\r\n        \"Other\",\r\n        \"PleasureCrafts\",\r\n        \"Tanker\",\r\n        \"Tugs\",\r\n        \"Other\"\r\n    ]\r\n}","import { vesselTypeClasses } from './vesselTypeClasses.js'\r\n\r\n// Source : https://d3-graph-gallery.com/graph/stackedarea_template.html\r\nexport function build(div) {\r\n  // set the dimensions and margins of the graph\r\n  const bounds = d3.select('#stacked-area-chart').node().getBoundingClientRect()\r\n  var margin = {top: 60, right: 230, bottom: 50, left: 70},\r\n  width = bounds.width - margin.left - margin.right,\r\n  height = 550 - margin.top - margin.bottom;\r\n\r\n  // append the svg object to the body of the page\r\n  var svg = div.select(\"#stacked-area-chart\")\r\n  .append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n  .append(\"g\")\r\n    .attr(\"transform\",\r\n          \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n  d3.csv('./TRIP_STACK_HALF_MONTH.csv', function(d){\r\n      return { \r\n        date : d3.timeParse(\"%Y-%m-%d\")(d.date),\r\n        Other : d.Other,\r\n        Tugs : d.Tugs,\r\n        Fishing : d.Fishing,\r\n        Barges : d.Barges,\r\n        Tanker : d.Tanker,\r\n        PleasureCrafts: d.PleasureCrafts,\r\n        Excursion : d.Excursion,\r\n        Merchant : d.Merchant,\r\n      }\r\n  }).then( function(data) {\r\n    const keys = data.columns.slice(1)  // List of Vessel Types = header of the csv files\r\n\r\n    const color = d3.scaleOrdinal()\r\n      .domain(vesselTypeClasses())\r\n      .range(d3.schemeSet2);\r\n\r\n    const stackedData = d3.stack()\r\n      .keys(keys)\r\n    (data)\r\n\r\n    // Add X axis\r\n    const x = d3.scaleTime()\r\n    .domain(d3.extent(data, d => d.date))\r\n    .range([ 0, width ]);\r\n    svg.append(\"g\")\r\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n      .call(d3.axisBottom(x).ticks(10))\r\n\r\n    // Add X axis label:\r\n    svg.append(\"text\")\r\n      .attr(\"text-anchor\", \"end\")\r\n      .attr(\"x\", width)\r\n      .attr(\"y\", height+40 )\r\n      .text(\"Temps\");\r\n\r\n    // Add Y axis\r\n    const y = d3.scaleLinear()\r\n      .domain([0, 12000])     // TODO : Y Automatique ?\r\n      .range([ height, 0 ]);\r\n    svg.append(\"g\")\r\n      .call(d3.axisLeft(y).ticks(15))\r\n\r\n    // Add Y axis label:\r\n    svg.append(\"text\")\r\n      .attr(\"text-anchor\", \"end\")\r\n      .attr(\"x\", 0)\r\n      .attr(\"y\", -20 )\r\n      .text(\"Nombre de navires\")\r\n      .attr(\"text-anchor\", \"start\")\r\n\r\n    // Area generator\r\n    const areaChart = svg.append('g')\r\n    const area = d3.area()\r\n      .x(function(d) { return x(d.data.date); })\r\n      .y0(function(d) { return y(d[0]); })\r\n      .y1(function(d) { return y(d[1]); })\r\n\r\n    // Show the areas\r\n    areaChart\r\n    .selectAll(\"mylayers\")\r\n    .data(stackedData)\r\n    .enter()\r\n    .append(\"path\")\r\n      .attr(\"class\", function(d) { return \"myArea \" + d.key })\r\n      .style(\"fill\", function(d) { return color(d.key); })\r\n      .attr(\"d\", area)\r\n\r\n    // What to do when one group is hovered\r\n    const highlight = function(d) {\r\n      d3.selectAll(\".myArea\").style(\"opacity\", .1)  // reduce opacity of all groups\r\n      d3.select(\".\"+d).style(\"opacity\", 1)  // expect the one that is hovered\r\n    }\r\n\r\n    // And when it is not hovered anymore\r\n    const noHighlight = function(){\r\n      d3.selectAll(\".myArea\").style(\"opacity\", 1)\r\n    }\r\n\r\n    // LEGEND //\r\n    const size = 20\r\n    svg.selectAll(\"myrect\")   // Add one dot in the legend for each name.\r\n      .data(keys)\r\n      .enter()\r\n      .append(\"rect\")\r\n        .attr(\"x\", width)\r\n        .attr(\"y\", function(_,i){ return 10 + i*(size+5)}) // 100 is where the first dot appears. 25 is the distance between dots\r\n        .attr(\"width\", size)\r\n        .attr(\"height\", size)\r\n        .attr(\"stroke-width\", 0.5)\r\n        .attr(\"stroke\", \"black\")\r\n        .style(\"fill\", function(d){ return color(d)})\r\n        .on(\"mouseover\", highlight)\r\n        .on(\"mouseleave\", noHighlight)\r\n\r\n    svg.selectAll(\"mylabels\")   // Add one dot in the legend for each name.\r\n      .data(keys)\r\n      .enter()\r\n      .append(\"text\")\r\n        .attr(\"x\", width + size*1.2)\r\n        .attr(\"y\", function(_,i){ return 10 + i*(size+5) + (size/2)}) // 100 is where the first dot appears. 25 is the distance between dots\r\n        .style(\"fill\", function(d){ return color(d)})\r\n        .text(function(d){ return d})\r\n        .attr(\"text-anchor\", \"left\")\r\n        .style(\"alignment-baseline\", \"middle\")\r\n        // .attr(\"stroke-width\", 0.2)\r\n        // .attr(\"stroke\", \"black\")\r\n        .on(\"mouseover\", highlight)\r\n        .on(\"mouseleave\", noHighlight)\r\n    })\r\n}\r\n","export const GLOBAL_VESSEL_TYPE = ['Barges', 'Excursion', 'Fishing', 'Merchant', 'Other', 'Pleasure Crafts', 'Tanker', 'Tugs']\r\nexport const REGION_NAME = ['Arctic', 'Central', 'East Canadian Water', 'Newfoundland', 'Maritimes', 'Pacific', 'Quebec', 'St. Lawrence Seaway', 'West Canadian Water']\r\nexport const REGION_COLOR = ['#CAB2D6', '#6A3D9A', '#33A02C', '#FB9A99', '#FDBF6F', '#E31A1C', '#1F78B4', '#A6CEE3', '#FF7F00']\r\nexport const REGION_NAME_ALT = ['Arctic', 'Central', 'East_Canadian_Water', 'Newfoundland', 'Maritimes', 'Pacific', 'Quebec', 'St_Lawrence_Seaway', 'West_Canadian_Water']\r\n\r\nfunction findGlobalVesselType(vesselType) {\r\n  if (['Barge Bulk Cargo', 'Barge Chemical','Barge Chips','Barge Derrick','Barge General','Barge Log','Barge Miscellaneous','Barge Oil Drilling Rig', 'Barge Oil/Petroleum', 'Barge Rail/Trailer','Barge Self-Propelled','Barge Towed',\"Don't use\",'Landing Craft','Logs Raft Section'].includes(vesselType)) {\r\n    return 'Barges'\r\n  } else if (['Excursion Passenger'].includes(vesselType)) {\r\n    return 'Excursion'\r\n  } else if (['Crab Boat', 'Dragger (Scallop, Clam, etc.)', 'Factory Ship', 'Fishery Patrol', 'Fishing Vessel', 'Gillnetter', 'Groundfish Boat (Open Boat)', 'Lobster Boat', 'Longliner', 'Other Fishing VSL (Open Boat)', 'Seiner', 'Shrimp Boat', 'Trawler', 'Troller'].includes(vesselType)) {\r\n    return 'Fishing'\r\n  } else if (['Cruise', 'Merchant (Dry)', 'Merchant Auto', 'Merchant Bulk', 'Merchant Cement', 'Merchant Coastal', 'Merchant Container', 'Merchant Ferry', 'Merchant General', 'Merchant Lash', 'Merchant Livestock', 'Merchant Ore', 'Merchant Passenger', 'Merchant Rail/Trailer Ferry', 'Merchant Reefer', 'Merchant RO/RO'].includes(vesselType)) {\r\n    return 'Merchant'\r\n  } else if (['Yacht - Pleasure Crafts', 'Yacht Power', 'Yacht Sails'].includes(vesselType)) {\r\n    return 'Pleasure Crafts'\r\n  } else if(['Merchant (Tanker)', 'Merchant Chemical', 'Merchant Chemical/Oil Products Tanker','Merchant Crude','Merchant Gasoline','Merchant Liquified Gas','Merchant Molasses','Merchant Ore/Bulk/Oil','Merchant Super Tanker','Merchant ULCC','Merchant VLCC','Merchant Water'].includes(vesselType)) {\r\n    return 'Tanker'\r\n  } else if (['Tug', 'Tug Fire', 'Tug Harbour', 'Tug Ocean', 'Tug Supply', 'Tugs Workboat'].includes(vesselType)) {\r\n    return 'Tugs'\r\n  } else {\r\n    return 'Other'\r\n  }\r\n}\r\n\r\nexport function clean(data) {\r\n  const cleanData = []\r\n  data.forEach(element => {\r\n    if (element['Lenght'] != 0 && \r\n        element['Width'] != 0 & \r\n        element['Maximum Draugth'] < 30 &&\r\n        element['Departure Date'] < ['Arrival Date']) {\r\n      cleanData.push({\r\n        'Arrival Date': element['Arrival Date'].substring(0,10),\r\n        'Arrival Hardour': element['Arrival Hardour'],\r\n        'Arrival Region': element['Arrival Region'],\r\n        'DeadWeight Tonnage': element['DeadWeight Tonnage'],\r\n        'Departure Date': element['Departure Date'].substring(0, 10),\r\n        'Departure Hardour': element['Departure Hardour'],\r\n        'Departure Region': element['Departure Region'],\r\n        'Lenght': element['Lenght'],\r\n        'Maximum Draugth': element['Maximum Draugth'],\r\n        'Vessel Type': element['Vessel Type'],\r\n        'Global Vessel Type': findGlobalVesselType(element['Vessel Type']),\r\n        'Width': element['Width']\r\n      })\r\n    }\r\n  })\r\n\r\n  return cleanData\r\n}\r\n\r\nexport function chordMatrix(data, departureDate, arrivalDate) {\r\n  const matrix = new Array(REGION_NAME.length)\r\n  for (let index = 0; index < matrix.length; index++) {\r\n    matrix[index] = new Array(REGION_NAME.length)\r\n  }\r\n  \r\n  REGION_NAME.forEach((departureRegion, i) => {\r\n    REGION_NAME.forEach((arrivalRegion, j) => {\r\n      matrix[i][j] = data\r\n        .filter((d) => {\r\n          return departureRegion === d['Departure Region'].slice(0,-7)\r\n            && arrivalRegion === d['Arrival Region'].slice(0,-7)\r\n            && departureDate <= d['Departure Date']\r\n            && arrivalDate >= d['Arrival Date']\r\n        })\r\n        .map((value) => value.count)\r\n        .reduce((partialSum, v) => Number(partialSum) + Number(v), 0)\r\n    })\r\n  })\r\n\r\n  return matrix\r\n}","import * as preproc from './preprocess.js'\r\n\r\nexport function rebuild(div, startDate, endDate) {\r\n  div.select(\"#tab-3-heatmap\")\r\n    .select('svg')\r\n    .remove()\r\n\r\n  buildHeatmap(div, startDate, endDate)\r\n}\r\n\r\n// https://d3-graph-gallery.com/heatmap.html\r\nexport function buildHeatmap(div, startDate, endDate) {\r\n  // TODO : adapt to div size\r\n\r\n  // set the dimensions and margins of the graph\r\n  const margin = {top: 10, right: 5, bottom: 90, left: 115},\r\n    width = 450 - margin.left - margin.right,\r\n    height = 450 - margin.top - margin.bottom;\r\n\r\n  // append the svg object to the body of the page\r\n  const svg = div.select(\"#tab-3-heatmap\")\r\n  .append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right + 50)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n  .append(\"g\")\r\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`)\r\n\r\n  // Labels of row and columns\r\n  const myGroups = preproc.GLOBAL_VESSEL_TYPE\r\n  const myVars = preproc.REGION_NAME\r\n\r\n  // Build X scales and axis:\r\n  const x = d3.scaleBand()\r\n    .range([ 0, width ])\r\n    .domain(myGroups)\r\n    .padding(0.01)\r\n\r\n  svg.append(\"g\")\r\n    .attr(\"transform\", `translate(0, ${height})`)\r\n    .call(d3.axisBottom(x))\r\n    .selectAll('text')\r\n    .attr('transform', 'translate(-20,20)rotate(-45)')\r\n\r\n  // Build Y scales and axis:\r\n  const y = d3.scaleBand()\r\n    .range([ height, 0 ])\r\n    .domain(myVars)\r\n    .padding(0.01)\r\n  svg.append(\"g\")\r\n    .call(d3.axisLeft(y))\r\n\r\n  // Build color scale\r\n  const myColor = d3.scaleLinear()\r\n    .range([\"white\", \"#ff0000\"])\r\n\r\n\r\n  function transformData(d, departureDate, arrivalDate) {\r\n    let map = heatmapMap()\r\n\r\n    const data = d.filter((line) => {\r\n      return departureDate <= line['Departure Date'] && arrivalDate >= line['Arrival Date']\r\n    })\r\n\r\n    data.forEach(line => {\r\n      const keyStart = line['Departure Region']+line['Global Vessel Type'];\r\n      const keyStop = line['Arrival Region']+line['Global Vessel Type'];\r\n      if (!map.has(keyStart)) {\r\n        map.set(keyStart, {\r\n          'Region': line['Departure Region'].slice(0,-7),\r\n          'Type': line['Global Vessel Type'],\r\n          'count': 1\r\n          });\r\n      } else {\r\n        const current = map.get(keyStart);\r\n        current.count += 1;\r\n        map.set(keyStart, current);\r\n      }\r\n      if (!map.has(keyStop)) {\r\n        map.set(keyStop, {\r\n          'Region': line['Arrival Region'].slice(0,-7),\r\n          'Type': line['Global Vessel Type'],\r\n          'count': 1\r\n          });\r\n      } else {\r\n        const current = map.get(keyStop);\r\n        current.count += 1;\r\n        map.set(keyStop, current);\r\n      }\r\n    })\r\n\r\n    const p = [];\r\n    let max = 0\r\n    Array.from(map.values()).forEach((value) => {\r\n      p.push({\r\n        'Region': value.Region,\r\n        'Type': value.Type,\r\n        'count' : (value.count / (2*data.length)) * 100\r\n      })\r\n      if ((value.count / (2*data.length)) * 100 >= max) {\r\n        max = (value.count / (2*data.length)) * 100\r\n      }\r\n    })\r\n    myColor.domain([0,max])\r\n\r\n    return p\r\n  }\r\n\r\n  //Read the data\r\n  d3.csv(\"./TRIP_HEATMAP.csv\").then( function(data) {\r\n    // add the squares and interaction\r\n    const transformedData = transformData(data, startDate, endDate)\r\n    svg.selectAll()\r\n    .data(transformedData, function(d) {\r\n      return d.Type+':'+d.Region;\r\n    })\r\n    .enter()\r\n    .append(\"g\")\r\n    .attr(\"class\", \"square\")\r\n    .on('mouseenter', function() { rectSelect(this, x, y) })\r\n    .on('mouseleave', function() { rectUnselect(this) })\r\n    .append(\"rect\")\r\n      .attr(\"x\", function(d) { return x(d.Type) })\r\n      .attr(\"y\", function(d) { return y(d.Region) })\r\n      .attr(\"width\", x.bandwidth() )\r\n      .attr(\"height\", y.bandwidth() )\r\n      .style(\"fill\", function(d) { return myColor(d.count) })\r\n    \r\n      initLegend(svg,myColor)\r\n      drawLegend(width + margin.right + 10, 0, height, 15, 'url(#gradient)', myColor)\r\n  })\r\n}\r\n\r\nfunction heatmapMap() {\r\n  let map = new Map();\r\n\r\n  preproc.REGION_NAME.forEach((region) => {\r\n    preproc.GLOBAL_VESSEL_TYPE.forEach((type) => {\r\n      const key = region + type\r\n      map.set(key, {\r\n        'Region': region,\r\n        'Type': type,\r\n        'count': 0\r\n      })\r\n    })\r\n  })\r\n  return map\r\n}\r\n\r\nfunction rectSelect(element, x, y) {\r\n  d3.select(element)\r\n    .append(\"text\")\r\n    .attr('x', function(d) { return x(d.Type) + x.bandwidth() / 2; })\r\n    .attr('y', function(d) { return y(d.Region) + y.bandwidth() / 2; })\r\n    .attr('text-anchor', 'middle')\r\n    .attr('dominant-baseline', 'middle')\r\n    .text(function(d) {\r\n      return d.count.toFixed(2) + '%'\r\n    })\r\n}\r\n\r\nfunction rectUnselect(element) {\r\n  d3.select(element)\r\n    .select('text')\r\n    .remove()\r\n}\r\n\r\nfunction initLegend(svg, colorScale) {\r\n  const defs = svg.append('defs')\r\n  svg.append('rect').attr('class', 'legend bar')\r\n  svg.append('g').attr('class', 'legend axis')\r\n\r\n  const linearGradient = defs\r\n  .append('linearGradient')\r\n  .attr('id', 'gradient')\r\n  .attr('x1', 0).attr('y1', 1).attr('x2', 0).attr('y2', 0)\r\n\r\n  linearGradient.selectAll('stop')\r\n  .data(colorScale.ticks().map((tick, i, nodes) => (\r\n    {\r\n      offset: `${ (100*i / nodes.length)}%`,\r\n      color: colorScale(tick)\r\n    })))\r\n  .join('stop')\r\n  .attr('offset', d => d.offset)\r\n  .attr('stop-color', d => d.color)\r\n}\r\n\r\nfunction drawLegend(x, y, height, width, fill, colorScale) {\r\n  d3.select('.legend.bar')\r\n    .attr('fill', fill)\r\n    .attr('x', x)\r\n    .attr('y', y)\r\n    .attr('height', height)\r\n    .attr('width', width)\r\n    \r\n  const scale = d3.scaleLinear()\r\n  .domain(colorScale.domain())\r\n  .range([height, 0])\r\n\r\n  let axis = d3.axisRight()\r\n  .ticks(7)\r\n  .scale(scale);\r\n\r\n  d3.select('.legend.axis')\r\n  .call(axis)\r\n  .attr('transform', 'translate('+ (x+15) + ',' + y + ')')\r\n}\r\n","import * as preproc from './preprocess.js'\r\n\r\n// https://d3-graph-gallery.com/chord.html\r\n// https://observablehq.com/@d3/directed-chord-diagram\r\n// https://jyu-theartofml.github.io/posts/circos_plot\r\n// http://strongriley.github.io/d3/ex/chord.html\r\nexport function build(div, data, startDate, endDate) {\r\n  // TODO : Comment trouver la taille d'une div encore non chargée ?\r\n\r\n  let chordWidth = window.innerWidth / 2 // screen.width/2;\r\n\r\n  var margin = {\r\n    top: chordWidth*0.17,\r\n    right: chordWidth*0.05, \r\n    bottom: chordWidth*0.07,\r\n    left: chordWidth*0.20 }, // TODO : Revoir valeur\r\n  width = chordWidth - margin.left - margin.right,\r\n  height = chordWidth - margin.top - margin.bottom;\r\n\r\n  //const innerRadius = chordWidth / 4 // TODO : Revoir valeur\r\n  //const outerRadius = innerRadius + 10\r\n  const outerRadius = width/3.5;\r\n  const innerRadius = outerRadius-10\r\n  // create the svg area\r\n  const svg = div.select('#tab-3-chord-diagram')\r\n  .append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n  .append(\"g\")\r\n    .attr(\"transform\", \"translate(\" + (margin.left+outerRadius) + \",\" + (margin.top+outerRadius) + \")\");\r\n\r\n  // create input data: a square matrix that provides flow between entities\r\n  const matrix = preproc.chordMatrix(data, startDate, endDate)\r\n  \r\n  const colors = preproc.REGION_COLOR\r\n\r\n  // give this matrix to d3.chord(): it will calculates all the info we need to draw arc and ribbon\r\n  const res = d3.chord()\r\n    .padAngle(0.05)     // padding between entities (black arc)\r\n    .sortSubgroups(d3.descending)\r\n    (matrix)\r\n\r\n  // add the links between groups\r\n  const links = svg\r\n  .datum(res)\r\n  .append(\"g\")\r\n  .attr(\"id\", \"links\")\r\n  .selectAll(\"path\")\r\n  .data(function(d) { return d; })\r\n  .enter()\r\n  .append(\"path\")\r\n    .attr(\"class\", \"chord\")\r\n    .on('mouseenter', function({source, target}, _) {\r\n      const tooltip = d3.select(`#${preproc.REGION_NAME_ALT[source.index]}${preproc.REGION_NAME_ALT[source.subindex]}`)\r\n      return tooltip.style(\"visibility\", \"visible\");\r\n    })\r\n    .on('mouseleave', function({source, target}, _) {\r\n      const tooltip = d3.select(`#${preproc.REGION_NAME_ALT[source.index]}${preproc.REGION_NAME_ALT[source.subindex]}`)\r\n      return tooltip.style(\"visibility\", \"hidden\");\r\n    })\r\n    .attr(\"d\", d3.ribbon()\r\n      .radius(innerRadius)\r\n    )\r\n    .style(\"fill\", function(d){ return(colors[d.source.index]) }) // colors depend on the source group. Change to target otherwise.\r\n    .style(\"stroke\", \"black\")\r\n    .attr(\"opacity\", 0.5)\r\n\r\n  const tooltips = svg\r\n    .datum(res)\r\n    .append(\"g\")\r\n    .attr(\"id\",\"tooltip\")\r\n    .selectAll(\"path\")\r\n    .data(function(d) { return d; })\r\n    .enter()\r\n    .append(\"text\")\r\n      .attr(\"id\",function(d) {\r\n        return (`${preproc.REGION_NAME_ALT[d.source.index]}${preproc.REGION_NAME_ALT[d.source.subindex]}`);})\r\n      .attr(\"class\", \"tooltip\")\r\n      .attr(\"x\",0)\r\n      .attr(\"y\",outerRadius+25)\r\n      .attr('text-anchor', 'middle')\r\n      .attr('dominant-baseline', 'middle')\r\n      .text(function(d) {\r\n        return `${preproc.REGION_NAME[d.source.index]} --> ${preproc.REGION_NAME[d.source.subindex]} : ${d.source.value} navires`\r\n      })\r\n      .style(\"visibility\", \"hidden\")\r\n\r\n  // add the groups on the outer part of the circle\r\n  svg.datum(res)\r\n    .append(\"g\")\r\n    .attr(\"id\", \"groups\")\r\n    .selectAll(\"g\")\r\n    .data(function(d) { return d.groups; })\r\n    .enter()\r\n    .append(\"g\")\r\n    .attr(\"class\", \"group\")\r\n    .append(\"path\")\r\n      .style(\"fill\", function(_,i){ return colors[i] })\r\n      .style(\"stroke\", \"black\")\r\n      .attr(\"d\", d3.arc()\r\n        .innerRadius(innerRadius)\r\n        .outerRadius(outerRadius)\r\n      )\r\n      .on(\"mouseover\", function(event, _) {\r\n        console.log(`Région ${preproc.REGION_NAME[event.index]} (${event.value} navires)`)\r\n        highlightGroup(event, links)\r\n      })\r\n      .on(\"mouseleave\", function() {\r\n        unhighlightGroup(links)\r\n      })\r\n\r\n  // add the label of groups\r\n  svg.datum(res)\r\n    .append(\"g\")\r\n    .attr(\"id\", \"labels\")\r\n    .selectAll(\"text\")\r\n    .data(function(d) { return d.groups; })\r\n    .enter()\r\n    .append(\"g\")\r\n    .attr(\"transform\", function(d) { return \"rotate(\" + (d.startAngle * 180 / Math.PI - 90) + \") translate(\" + outerRadius + \",0)\"; })  // TODO : Revoir valeur\r\n    .append(\"text\")\r\n    .attr(\"x\", 8)\r\n    .attr(\"dy\", \".25em\")\r\n    .attr(\"transform\", function(d) { return d.startAngle > Math.PI ? \"rotate(180) translate(-16)\" : null; })\r\n    .style(\"text-anchor\", function(d) { return d.startAngle > Math.PI ? \"end\" : null; })\r\n    .style(\"fill\", function(_, i){ return(colors[i]) })\r\n    .style(\"font-weight\", \"bold\")\r\n    .style(\"font-size\",12)\r\n    .text(function(d) {\r\n      return preproc.REGION_NAME[d.index]\r\n      // if (d.index != 7 && d.index != 8) {\r\n      //   return preproc.REGION_NAME[d.index]\r\n      // } else if (d.index == 7) {\r\n      //   console.log(preproc.REGION_NAME[d.index])\r\n      //   return preproc.REGION_NAME[d.index].slice(0, 12) + \"tspan\" + preproc.REGION_NAME[d.index].slice(12,)\r\n      // } else {\r\n      //   console.log(preproc.REGION_NAME[d.index])\r\n      //   return preproc.REGION_NAME[d.index].slice(0, 13) \r\n      // }\r\n    })\r\n}\r\n\r\nfunction highlightGroup(event, links) {\r\n  links\r\n    .filter(function(d) { return d.source.index != event.index })\r\n    .attr(\"opacity\", 0.1)\r\n}\r\n\r\nfunction unhighlightGroup(links) {\r\n  links.attr(\"opacity\", 0.5)\r\n}\r\n\r\nexport function rebuild(div, data, startDate, endDate) {\r\n  div.select('#tab-3-chord-diagram')\r\n    .select('svg')\r\n    .remove()\r\n\r\n  build(div, data, startDate, endDate)\r\n}","import * as onglet1 from './scripts/onglet1.js'\r\nimport * as onglet3 from './scripts/onglet3.js'\r\nimport * as chord from './scripts/chord.js'\r\n\r\n(function (d3) {\r\n    onglet1.build(d3.select('#tab-1-content'))\r\n\r\n    let chordData;\r\n    d3.csv('./TRIP_CHORD.csv').then(function(data) {\r\n        chordData = data\r\n        chord.build(d3.select('#tab-3-content'), data, \"2010-01-01\", \"2023-01-01\")\r\n    })\r\n\r\n    onglet3.buildHeatmap(d3.select('#tab-3-content'), \"2010-01-01\", \"2023-01-01\")\r\n\r\n    d3.select('#tab-3-content #date-control-refresh').on('click', function() {\r\n        const start = d3.select('#date-start-control').property('value')\r\n        const end = d3.select('#date-end-control').property('value')\r\n\r\n        console.log(start, end)\r\n        chord.rebuild(d3.select('#tab-3-content'), chordData, start, end)\r\n        onglet3.rebuild(d3.select('#tab-3-content'), start, end)\r\n    })\r\n\r\n})(d3)\r\n\r\n$('.tab-button').click(function () {\r\n    if (!$(this).hasClass('tab-button-active')) {\r\n        const tab = $(this).data('tab')\r\n    \r\n        $('button.tab-button').removeClass('tab-button-active')\r\n        $(this).addClass('tab-button-active')\r\n    \r\n        $('.tab-content').removeClass('visible-tab')\r\n        $(`.tab-content#tab-${tab}-content`).addClass('visible-tab')\r\n    }\r\n})"]}